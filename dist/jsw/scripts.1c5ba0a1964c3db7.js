var fabric=fabric||{version:"5.2.1"};if(typeof exports<"u"?exports.fabric=fabric:"function"==typeof define&&define.amd&&define([],function(){return fabric}),typeof document<"u"&&typeof window<"u")fabric.document=document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?document:document.implementation.createHTMLDocument(""),fabric.window=window;else{var jsdom=require("jsdom"),virtualWindow=new jsdom.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;fabric.document=virtualWindow.document,fabric.jsdomImplForWrapper=require("jsdom/lib/jsdom/living/generated/utils").implForWrapper,fabric.nodeCanvas=require("jsdom/lib/jsdom/utils").Canvas,fabric.window=virtualWindow,DOMParser=fabric.window.DOMParser}function resizeCanvasIfNeeded(h){var n=h.targetCanvas,t=h.destinationWidth,e=h.destinationHeight;n.width===t&&n.height===e||(n.width=t,n.height=e)}function copyGLTo2DDrawImage(h,n){var a=h.canvas,l=n.targetCanvas,t=l.getContext("2d");t.translate(0,l.height),t.scale(1,-1),t.drawImage(a,0,a.height-l.height,l.width,l.height,0,0,l.width,l.height)}function copyGLTo2DPutImageData(h,n){var a=n.targetCanvas.getContext("2d"),l=n.destinationWidth,t=n.destinationHeight,e=l*t*4,i=new Uint8Array(this.imageBuffer,0,e),s=new Uint8ClampedArray(this.imageBuffer,0,e);h.readPixels(0,0,l,t,h.RGBA,h.UNSIGNED_BYTE,i);var r=new ImageData(s,l,t);a.putImageData(r,0,0)}fabric.isTouchSupported="ontouchstart"in fabric.window||"ontouchstart"in fabric.document||fabric.window&&fabric.window.navigator&&0<fabric.window.navigator.maxTouchPoints,fabric.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",fabric.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],fabric.DPI=96,fabric.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",fabric.commaWsp="(?:\\s+,?\\s*|,\\s*)",fabric.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/gi,fabric.reNonWord=/[ \n\.,;!\?\-]/,fabric.fontPaths={},fabric.iMatrix=[1,0,0,1,0,0],fabric.svgNS="http://www.w3.org/2000/svg",fabric.perfLimitSizeTotal=2097152,fabric.maxCacheSideLimit=4096,fabric.minCacheSideLimit=256,fabric.charWidthsCache={},fabric.textureSize=2048,fabric.disableStyleCopyPaste=!1,fabric.enableGLFiltering=!0,fabric.devicePixelRatio=fabric.window.devicePixelRatio||fabric.window.webkitDevicePixelRatio||fabric.window.mozDevicePixelRatio||1,fabric.browserShadowBlurConstant=1,fabric.arcToSegmentsCache={},fabric.boundsOfCurveCache={},fabric.cachesBoundsOfCurve=!0,fabric.forceGLPutImageData=!1,fabric.initFilterBackend=function(){return fabric.enableGLFiltering&&fabric.isWebglSupported&&fabric.isWebglSupported(fabric.textureSize)?(console.log("max texture size: "+fabric.maxTextureSize),new fabric.WebglFilterBackend({tileSize:fabric.textureSize})):fabric.Canvas2dFilterBackend?new fabric.Canvas2dFilterBackend:void 0},typeof document<"u"&&typeof window<"u"&&(window.fabric=fabric),function(){function h(a,l){if(this.__eventListeners[a]){var t=this.__eventListeners[a];l?t[t.indexOf(l)]=!1:fabric.util.array.fill(t,!1)}}function n(a,l){var t=function(){l.apply(this,arguments),this.off(a,t)}.bind(this);this.on(a,t)}fabric.Observable={fire:function(a,l){if(!this.__eventListeners)return this;var t=this.__eventListeners[a];if(!t)return this;for(var e=0,i=t.length;e<i;e++)t[e]&&t[e].call(this,l||{});return this.__eventListeners[a]=t.filter(function(s){return!1!==s}),this},on:function(a,l){if(this.__eventListeners||(this.__eventListeners={}),1===arguments.length)for(var t in a)this.on(t,a[t]);else this.__eventListeners[a]||(this.__eventListeners[a]=[]),this.__eventListeners[a].push(l);return this},once:function(a,l){if(1===arguments.length)for(var t in a)n.call(this,t,a[t]);else n.call(this,a,l);return this},off:function(a,l){if(!this.__eventListeners)return this;if(0===arguments.length)for(a in this.__eventListeners)h.call(this,a);else if(1===arguments.length&&"object"==typeof a)for(var t in a)h.call(this,t,a[t]);else h.call(this,a,l);return this}}}(),fabric.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var h=0,n=arguments.length;h<n;h++)this._onObjectAdded(arguments[h]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(h,n,a){var l=this._objects;return a?l[n]=h:l.splice(n,0,h),this._onObjectAdded&&this._onObjectAdded(h),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var h,n=this._objects,a=!1,l=0,t=arguments.length;l<t;l++)-1!==(h=n.indexOf(arguments[l]))&&(a=!0,n.splice(h,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[l]));return this.renderOnAddRemove&&a&&this.requestRenderAll(),this},forEachObject:function(h,n){for(var a=this.getObjects(),l=0,t=a.length;l<t;l++)h.call(n,a[l],l,a);return this},getObjects:function(h){return void 0===h?this._objects.concat():this._objects.filter(function(n){return n.type===h})},item:function(h){return this._objects[h]},isEmpty:function(){return 0===this._objects.length},size:function(){return this._objects.length},contains:function(h,n){return-1<this._objects.indexOf(h)||!!n&&this._objects.some(function(a){return"function"==typeof a.contains&&a.contains(h,!0)})},complexity:function(){return this._objects.reduce(function(h,n){return h+(n.complexity?n.complexity():0)},0)}},fabric.CommonMethods={_setOptions:function(h){for(var n in h)this.set(n,h[n])},_initGradient:function(h,n){!h||!h.colorStops||h instanceof fabric.Gradient||this.set(n,new fabric.Gradient(h))},_initPattern:function(h,n,a){!h||!h.source||h instanceof fabric.Pattern?a&&a():this.set(n,new fabric.Pattern(h,a))},_setObject:function(h){for(var n in h)this._set(n,h[n])},set:function(h,n){return"object"==typeof h?this._setObject(h):this._set(h,n),this},_set:function(h,n){this[h]=n},toggle:function(h){var n=this.get(h);return"boolean"==typeof n&&this.set(h,!n),this},get:function(h){return this[h]}},function(h){var n=Math.sqrt,a=Math.atan2,l=Math.pow,t=Math.PI/180,e=Math.PI/2;fabric.util={cos:function(i){if(0===i)return 1;switch(i<0&&(i=-i),i/e){case 1:case 3:return 0;case 2:return-1}return Math.cos(i)},sin:function(i){if(0===i)return 0;var s=1;switch(i<0&&(s=-1),i/e){case 1:return s;case 2:return 0;case 3:return-s}return Math.sin(i)},removeFromArray:function(i,s){var r=i.indexOf(s);return-1!==r&&i.splice(r,1),i},getRandomInt:function(i,s){return Math.floor(Math.random()*(s-i+1))+i},degreesToRadians:function(i){return i*t},radiansToDegrees:function(i){return i/t},rotatePoint:function(i,s,r){var o=new fabric.Point(i.x-s.x,i.y-s.y),f=fabric.util.rotateVector(o,r);return new fabric.Point(f.x,f.y).addEquals(s)},rotateVector:function(i,s){var r=fabric.util.sin(s),o=fabric.util.cos(s);return{x:i.x*o-i.y*r,y:i.x*r+i.y*o}},createVector:function(i,s){return new fabric.Point(s.x-i.x,s.y-i.y)},calcAngleBetweenVectors:function(i,s){return Math.acos((i.x*s.x+i.y*s.y)/(Math.hypot(i.x,i.y)*Math.hypot(s.x,s.y)))},getHatVector:function(i){return new fabric.Point(i.x,i.y).multiply(1/Math.hypot(i.x,i.y))},getBisector:function(i,s,r){var o=fabric.util.createVector(i,s),f=fabric.util.createVector(i,r),m=fabric.util.calcAngleBetweenVectors(o,f),b=m*(0===fabric.util.calcAngleBetweenVectors(fabric.util.rotateVector(o,m),f)?1:-1)/2;return{vector:fabric.util.getHatVector(fabric.util.rotateVector(o,b)),angle:m}},projectStrokeOnPoints:function(i,s,r){var o=[],f=s.strokeWidth/2,m=s.strokeUniform?new fabric.Point(1/s.scaleX,1/s.scaleY):new fabric.Point(1,1),b=function(C){var w=f/Math.hypot(C.x,C.y);return new fabric.Point(C.x*w*m.x,C.y*w*m.y)};return i.length<=1||i.forEach(function(C,w){var E,M,N=new fabric.Point(C.x,C.y);0===w?(M=i[w+1],E=r?b(fabric.util.createVector(M,N)).addEquals(N):i[i.length-1]):w===i.length-1?(E=i[w-1],M=r?b(fabric.util.createVector(E,N)).addEquals(N):i[0]):(E=i[w-1],M=i[w+1]);var H,nt,st=fabric.util.getBisector(N,E,M),p=st.vector;if("miter"===s.strokeLineJoin&&(H=-f/Math.sin(st.angle/2),nt=new fabric.Point(p.x*H*m.x,p.y*H*m.y),Math.hypot(nt.x,nt.y)/f<=s.strokeMiterLimit))return o.push(N.add(nt)),void o.push(N.subtract(nt));H=-f*Math.SQRT2,nt=new fabric.Point(p.x*H*m.x,p.y*H*m.y),o.push(N.add(nt)),o.push(N.subtract(nt))}),o},transformPoint:function(i,s,r){return r?new fabric.Point(s[0]*i.x+s[2]*i.y,s[1]*i.x+s[3]*i.y):new fabric.Point(s[0]*i.x+s[2]*i.y+s[4],s[1]*i.x+s[3]*i.y+s[5])},makeBoundingBoxFromPoints:function(i,s){if(s)for(var r=0;r<i.length;r++)i[r]=fabric.util.transformPoint(i[r],s);var o=[i[0].x,i[1].x,i[2].x,i[3].x],f=fabric.util.array.min(o),m=fabric.util.array.max(o)-f,b=[i[0].y,i[1].y,i[2].y,i[3].y],C=fabric.util.array.min(b);return{left:f,top:C,width:m,height:fabric.util.array.max(b)-C}},invertTransform:function(i){var s=1/(i[0]*i[3]-i[1]*i[2]),r=[s*i[3],-s*i[1],-s*i[2],s*i[0]],o=fabric.util.transformPoint({x:i[4],y:i[5]},r,!0);return r[4]=-o.x,r[5]=-o.y,r},toFixed:function(i,s){return parseFloat(Number(i).toFixed(s))},parseUnit:function(i,s){var r=/\D{0,2}$/.exec(i),o=parseFloat(i);switch(s||(s=fabric.Text.DEFAULT_SVG_FONT_SIZE),r[0]){case"mm":return o*fabric.DPI/25.4;case"cm":return o*fabric.DPI/2.54;case"in":return o*fabric.DPI;case"pt":return o*fabric.DPI/72;case"pc":return o*fabric.DPI/72*12;case"em":return o*s;default:return o}},falseFunction:function(){return!1},getKlass:function(i,s){return i=fabric.util.string.camelize(i.charAt(0).toUpperCase()+i.slice(1)),fabric.util.resolveNamespace(s)[i]},getSvgAttributes:function(i){var s=["instantiated_by_use","style","id","class"];switch(i){case"linearGradient":s=s.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":s=s.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":s=s.concat(["offset","stop-color","stop-opacity"])}return s},resolveNamespace:function(i){if(!i)return fabric;var s,r=i.split("."),o=r.length,f=h||fabric.window;for(s=0;s<o;++s)f=f[r[s]];return f},loadImage:function(i,s,r,o){if(i){var f=fabric.util.createImage(),m=function(){s&&s.call(r,f,!1),f=f.onload=f.onerror=null};f.onload=m,f.onerror=function(){fabric.log("Error loading "+f.src),s&&s.call(r,null,!0),f=f.onload=f.onerror=null},0!==i.indexOf("data")&&null!=o&&(f.crossOrigin=o),"data:image/svg"===i.substring(0,14)&&(f.onload=null,fabric.util.loadImageInDom(f,m)),f.src=i}else s&&s.call(r,i)},loadImageInDom:function(i,s){var r=fabric.document.createElement("div");r.style.width=r.style.height="1px",r.style.left=r.style.top="-100%",r.style.position="absolute",r.appendChild(i),fabric.document.querySelector("body").appendChild(r),i.onload=function(){s(),r.parentNode.removeChild(r),r=null}},enlivenObjects:function(i,s,r,o){var f=[],m=0,b=(i=i||[]).length;function C(){++m===b&&s&&s(f.filter(function(w){return w}))}b?i.forEach(function(w,E){w&&w.type?fabric.util.getKlass(w.type,r).fromObject(w,function(M,N){N||(f[E]=M),o&&o(w,M,N),C()}):C()}):s&&s(f)},enlivenObjectEnlivables:function(i,s,r){var o=fabric.Object.ENLIVEN_PROPS.filter(function(f){return!!i[f]});fabric.util.enlivenObjects(o.map(function(f){return i[f]}),function(f){var m={};o.forEach(function(b,C){m[b]=f[C],s&&(s[b]=f[C])}),r&&r(m)})},enlivenPatterns:function(i,s){function r(){++f===m&&s&&s(o)}var o=[],f=0,m=(i=i||[]).length;m?i.forEach(function(b,C){b&&b.source?new fabric.Pattern(b,function(w){o[C]=w,r()}):(o[C]=b,r())}):s&&s(o)},groupSVGElements:function(i,s,r){var o;return i&&1===i.length?i[0]:(s&&(s.width&&s.height?s.centerPoint={x:s.width/2,y:s.height/2}:(delete s.width,delete s.height)),o=new fabric.Group(i,s),void 0!==r&&(o.sourcePath=r),o)},populateWithProperties:function(i,s,r){if(r&&Array.isArray(r))for(var o=0,f=r.length;o<f;o++)r[o]in i&&(s[r[o]]=i[r[o]])},createCanvasElement:function(){return fabric.document.createElement("canvas")},copyCanvasElement:function(i){var s=fabric.util.createCanvasElement();return s.width=i.width,s.height=i.height,s.getContext("2d").drawImage(i,0,0),s},toDataURL:function(i,s,r){return i.toDataURL("image/"+s,r)},createImage:function(){return fabric.document.createElement("img")},multiplyTransformMatrices:function(i,s,r){return[i[0]*s[0]+i[2]*s[1],i[1]*s[0]+i[3]*s[1],i[0]*s[2]+i[2]*s[3],i[1]*s[2]+i[3]*s[3],r?0:i[0]*s[4]+i[2]*s[5]+i[4],r?0:i[1]*s[4]+i[3]*s[5]+i[5]]},qrDecompose:function(i){var s=a(i[1],i[0]),r=l(i[0],2)+l(i[1],2),o=n(r),f=(i[0]*i[3]-i[2]*i[1])/o,m=a(i[0]*i[2]+i[1]*i[3],r);return{angle:s/t,scaleX:o,scaleY:f,skewX:m/t,skewY:0,translateX:i[4],translateY:i[5]}},calcRotateMatrix:function(i){if(!i.angle)return fabric.iMatrix.concat();var s=fabric.util.degreesToRadians(i.angle),r=fabric.util.cos(s),o=fabric.util.sin(s);return[r,o,-o,r,0,0]},calcDimensionsMatrix:function(i){var s=void 0===i.scaleX?1:i.scaleX,r=void 0===i.scaleY?1:i.scaleY,o=[i.flipX?-s:s,0,0,i.flipY?-r:r,0,0],f=fabric.util.multiplyTransformMatrices,m=fabric.util.degreesToRadians;return i.skewX&&(o=f(o,[1,0,Math.tan(m(i.skewX)),1],!0)),i.skewY&&(o=f(o,[1,Math.tan(m(i.skewY)),0,1],!0)),o},composeMatrix:function(i){var s=[1,0,0,1,i.translateX||0,i.translateY||0],r=fabric.util.multiplyTransformMatrices;return i.angle&&(s=r(s,fabric.util.calcRotateMatrix(i))),(1!==i.scaleX||1!==i.scaleY||i.skewX||i.skewY||i.flipX||i.flipY)&&(s=r(s,fabric.util.calcDimensionsMatrix(i))),s},resetObjectTransform:function(i){i.scaleX=1,i.scaleY=1,i.skewX=0,i.skewY=0,i.flipX=!1,i.flipY=!1,i.rotate(0)},saveObjectTransform:function(i){return{scaleX:i.scaleX,scaleY:i.scaleY,skewX:i.skewX,skewY:i.skewY,angle:i.angle,left:i.left,flipX:i.flipX,flipY:i.flipY,top:i.top}},isTransparent:function(i,s,r,o){0<o&&(o<s?s-=o:s=0,o<r?r-=o:r=0);var f,m=!0,b=i.getImageData(s,r,2*o||1,2*o||1),C=b.data.length;for(f=3;f<C&&(m=b.data[f]<=0);f+=4);return b=null,m},parsePreserveAspectRatioAttribute:function(i){var s,r="meet",o=i.split(" ");return o&&o.length&&("meet"!==(r=o.pop())&&"slice"!==r?(s=r,r="meet"):o.length&&(s=o.pop())),{meetOrSlice:r,alignX:"none"!==s?s.slice(1,4):"none",alignY:"none"!==s?s.slice(5,8):"none"}},clearFabricFontCache:function(i){(i=(i||"").toLowerCase())?fabric.charWidthsCache[i]&&delete fabric.charWidthsCache[i]:fabric.charWidthsCache={}},limitDimsByArea:function(i,s){var r=Math.sqrt(s*i),o=Math.floor(s/r);return{x:Math.floor(r),y:o}},capValue:function(i,s,r){return Math.max(i,Math.min(s,r))},findScaleToFit:function(i,s){return Math.min(s.width/i.width,s.height/i.height)},findScaleToCover:function(i,s){return Math.max(s.width/i.width,s.height/i.height)},matrixToSVG:function(i){return"matrix("+i.map(function(s){return fabric.util.toFixed(s,fabric.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(i,s){var r=fabric.util.invertTransform(s),o=fabric.util.multiplyTransformMatrices(r,i.calcOwnMatrix());fabric.util.applyTransformToObject(i,o)},addTransformToObject:function(i,s){fabric.util.applyTransformToObject(i,fabric.util.multiplyTransformMatrices(s,i.calcOwnMatrix()))},applyTransformToObject:function(i,s){var r=fabric.util.qrDecompose(s),o=new fabric.Point(r.translateX,r.translateY);i.flipX=!1,i.flipY=!1,i.set("scaleX",r.scaleX),i.set("scaleY",r.scaleY),i.skewX=r.skewX,i.skewY=r.skewY,i.angle=r.angle,i.setPositionByOrigin(o,"center","center")},sizeAfterTransform:function(i,s,r){var o=i/2,f=s/2,m=[{x:-o,y:-f},{x:o,y:-f},{x:-o,y:f},{x:o,y:f}],b=fabric.util.calcDimensionsMatrix(r),C=fabric.util.makeBoundingBoxFromPoints(m,b);return{x:C.width,y:C.height}},mergeClipPaths:function(i,s){var r=i,o=s;r.inverted&&!o.inverted&&(r=s,o=i),fabric.util.applyTransformToObject(o,fabric.util.multiplyTransformMatrices(fabric.util.invertTransform(r.calcTransformMatrix()),o.calcTransformMatrix()));var f=r.inverted&&o.inverted;return f&&(r.inverted=o.inverted=!1),new fabric.Group([r],{clipPath:o,inverted:f})}}}(typeof exports<"u"?exports:this),function(){var h=Array.prototype.join,n={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},a={m:"l",M:"L"};function l(C,w,E,M){var N=Math.atan2(w,C),H=Math.atan2(M,E);return N<=H?H-N:2*Math.PI-(N-H)}function t(C,w,E){for(var p=function(et,ot,ct,W,z,tt,ft){var at=Math.PI,mt=ft*at/180,_t=fabric.util.sin(mt),G=fabric.util.cos(mt),bt=0,Ct=0,Q=-G*et*.5-_t*ot*.5,St=-G*ot*.5+_t*et*.5,Tt=(ct=Math.abs(ct))*ct,Lt=(W=Math.abs(W))*W,Wt=St*St,Xt=Q*Q,we=Tt*Lt-Tt*Wt-Lt*Xt,ve=0;if(we<0){var ne=Math.sqrt(1-we/(Tt*Lt));ct*=ne,W*=ne}else ve=(z===tt?-1:1)*Math.sqrt(we/(Tt*Wt+Lt*Xt));var re=ve*ct*St/W,jt=-ve*W*Q/ct,Fe=G*re-_t*jt+.5*et,Ft=_t*re+G*jt+.5*ot,Rt=l(1,0,(Q-re)/ct,(St-jt)/W),qe=l((Q-re)/ct,(St-jt)/W,(-Q-re)/ct,(-St-jt)/W);0===tt&&0<qe?qe-=2*at:1===tt&&qe<0&&(qe+=2*at);for(var Je,Ne,me,_e,Ce,Se,ri,Li,He,oi,Ci,Pe,he,We,Re,ai,ze,ae=Math.ceil(Math.abs(qe/at*2)),O=[],I=qe/ae,X=8/3*Math.sin(I/4)*Math.sin(I/4)/Math.sin(I/2),J=Rt+I,pt=0;pt<ae;pt++)O[pt]=(Ne=J,me=G,_e=_t,Ce=ct,Se=W,ri=Fe,Li=Ft,He=X,oi=bt,Ci=Ct,Pe=fabric.util.cos(Je=Rt),["C",oi+He*(-me*Ce*(he=fabric.util.sin(Je))-_e*Se*Pe),Ci+He*(-_e*Ce*he+me*Se*Pe),(ai=me*Ce*(We=fabric.util.cos(Ne))-_e*Se*(Re=fabric.util.sin(Ne))+ri)+He*(me*Ce*Re+_e*Se*We),(ze=_e*Ce*We+me*Se*Re+Li)+He*(_e*Ce*Re-me*Se*We),ai,ze]),bt=O[pt][5],Ct=O[pt][6],Rt=J,J+=I;return O}(E[6]-C,E[7]-w,E[1],E[2],E[4],E[5],E[3]),F=0,V=p.length;F<V;F++)p[F][1]+=C,p[F][2]+=w,p[F][3]+=C,p[F][4]+=w,p[F][5]+=C,p[F][6]+=w;return p}function e(C,w,E,M){return Math.sqrt((E-C)*(E-C)+(M-w)*(M-w))}function i(C,w,E,M,N,H,nt,st){return function(p){var F,V,et,ot,ct=(ot=p)*ot*ot,W=3*(et=p)*et*(1-et),z=3*(V=p)*(1-V)*(1-V),tt=(1-(F=p))*(1-F)*(1-F);return{x:nt*ct+N*W+E*z+C*tt,y:st*ct+H*W+M*z+w*tt}}}function s(C,w,E,M,N,H,nt,st){return function(p){var F=1-p;return Math.atan2(3*F*F*(M-w)+6*F*p*(H-M)+3*p*p*(st-H),3*F*F*(E-C)+6*F*p*(N-E)+3*p*p*(nt-N))}}function r(C,w,E,M,N,H){return function(nt){var st,p,F,V=(F=nt)*F,et=2*(p=nt)*(1-p),ot=(1-(st=nt))*(1-st);return{x:N*V+E*et+C*ot,y:H*V+M*et+w*ot}}}function o(C,w,E,M,N,H){return function(nt){var st=1-nt;return Math.atan2(2*st*(M-w)+2*nt*(H-M),2*st*(E-C)+2*nt*(N-E))}}function f(C,w,E){var M,N,H={x:w,y:E},nt=0;for(N=1;N<=100;N+=1)M=C(N/100),nt+=e(H.x,H.y,M.x,M.y),H=M;return nt}function b(C){for(var w,E,M,N,H=0,nt=C.length,st=0,p=0,F=0,V=0,et=[],ot=0;ot<nt;ot++){switch(M={x:st,y:p,command:(w=C[ot])[0]},w[0]){case"M":M.length=0,F=st=w[1],V=p=w[2];break;case"L":M.length=e(st,p,w[1],w[2]),st=w[1],p=w[2];break;case"C":E=i(st,p,w[1],w[2],w[3],w[4],w[5],w[6]),N=s(st,p,w[1],w[2],w[3],w[4],w[5],w[6]),M.iterator=E,M.angleFinder=N,M.length=f(E,st,p),st=w[5],p=w[6];break;case"Q":E=r(st,p,w[1],w[2],w[3],w[4]),N=o(st,p,w[1],w[2],w[3],w[4]),M.iterator=E,M.angleFinder=N,M.length=f(E,st,p),st=w[3],p=w[4];break;case"Z":case"z":M.destX=F,M.destY=V,M.length=e(st,p,F,V),st=F,p=V}H+=M.length,et.push(M)}return et.push({length:H,x:st,y:p}),et}fabric.util.joinPath=function(C){return C.map(function(w){return w.join(" ")}).join(" ")},fabric.util.parsePath=function(C){var w,E,M,N,H,nt=[],st=[],p=fabric.rePathCommand,F="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",V="("+F+")"+fabric.commaWsp,et="([01])"+fabric.commaWsp+"?",ot=new RegExp(V+"?"+V+"?"+V+et+et+V+"?("+F+")","g");if(!C||!C.match)return nt;for(var ct,W=0,z=(H=C.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi)).length;W<z;W++){N=(w=H[W]).slice(1).trim(),st.length=0;var tt=w.charAt(0);if(ct=[tt],"a"===tt.toLowerCase())for(var ft;ft=ot.exec(N);)for(var at=1;at<ft.length;at++)st.push(ft[at]);else for(;M=p.exec(N);)st.push(M[0]);at=0;for(var mt=st.length;at<mt;at++)E=parseFloat(st[at]),isNaN(E)||ct.push(E);var _t=n[tt.toLowerCase()],G=a[tt]||tt;if(ct.length-1>_t)for(var bt=1,Ct=ct.length;bt<Ct;bt+=_t)nt.push([tt].concat(ct.slice(bt,bt+_t))),tt=G;else nt.push(ct)}return nt},fabric.util.makePathSimpler=function(C){var w,E,M,N,H,nt,st=0,p=0,F=C.length,V=0,et=0,ot=[];for(E=0;E<F;++E){switch(M=!1,(w=C[E].slice(0))[0]){case"l":w[0]="L",w[1]+=st,w[2]+=p;case"L":st=w[1],p=w[2];break;case"h":w[1]+=st;case"H":w[0]="L",w[2]=p,st=w[1];break;case"v":w[1]+=p;case"V":w[0]="L",p=w[1],w[1]=st,w[2]=p;break;case"m":w[0]="M",w[1]+=st,w[2]+=p;case"M":st=w[1],p=w[2],V=w[1],et=w[2];break;case"c":w[0]="C",w[1]+=st,w[2]+=p,w[3]+=st,w[4]+=p,w[5]+=st,w[6]+=p;case"C":H=w[3],nt=w[4],st=w[5],p=w[6];break;case"s":w[0]="S",w[1]+=st,w[2]+=p,w[3]+=st,w[4]+=p;case"S":"C"===N?(H=2*st-H,nt=2*p-nt):(H=st,nt=p),st=w[3],p=w[4],w[0]="C",w[5]=w[3],w[6]=w[4],w[3]=w[1],w[4]=w[2],w[1]=H,w[2]=nt,H=w[3],nt=w[4];break;case"q":w[0]="Q",w[1]+=st,w[2]+=p,w[3]+=st,w[4]+=p;case"Q":H=w[1],nt=w[2],st=w[3],p=w[4];break;case"t":w[0]="T",w[1]+=st,w[2]+=p;case"T":"Q"===N?(H=2*st-H,nt=2*p-nt):(H=st,nt=p),w[0]="Q",st=w[1],p=w[2],w[1]=H,w[2]=nt,w[3]=st,w[4]=p;break;case"a":w[0]="A",w[6]+=st,w[7]+=p;case"A":M=!0,ot=ot.concat(t(st,p,w)),st=w[6],p=w[7];break;case"z":case"Z":st=V,p=et}M||ot.push(w),N=w[0]}return ot},fabric.util.getSmoothPathFromPoints=function(C,w){var E,M=[],N=new fabric.Point(C[0].x,C[0].y),H=new fabric.Point(C[1].x,C[1].y),nt=C.length,st=1,p=0,F=2<nt;for(F&&(st=C[2].x<H.x?-1:C[2].x===H.x?0:1,p=C[2].y<H.y?-1:C[2].y===H.y?0:1),M.push(["M",N.x-st*(w=w||0),N.y-p*w]),E=1;E<nt;E++){if(!N.eq(H)){var V=N.midPointFrom(H);M.push(["Q",N.x,N.y,V.x,V.y])}N=C[E],E+1<C.length&&(H=C[E+1])}return F&&(st=N.x>C[E-2].x?1:N.x===C[E-2].x?0:-1,p=N.y>C[E-2].y?1:N.y===C[E-2].y?0:-1),M.push(["L",N.x+st*w,N.y+p*w]),M},fabric.util.getPathSegmentsInfo=b,fabric.util.getBoundsOfCurve=function(C,w,E,M,N,H,nt,st){var p;if(fabric.cachesBoundsOfCurve&&(p=h.call(arguments),fabric.boundsOfCurveCache[p]))return fabric.boundsOfCurveCache[p];var F,V,et,ot,ct,W,z,tt,ft=Math.sqrt,at=Math.min,mt=Math.max,_t=Math.abs,G=[],bt=[[],[]];V=6*C-12*E+6*N,F=-3*C+9*E-9*N+3*nt,et=3*E-3*C;for(var Ct=0;Ct<2;++Ct)if(0<Ct&&(V=6*w-12*M+6*H,F=-3*w+9*M-9*H+3*st,et=3*M-3*w),_t(F)<1e-12){if(_t(V)<1e-12)continue;0<(ot=-et/V)&&ot<1&&G.push(ot)}else(z=V*V-4*et*F)<0||(0<(ct=(-V+(tt=ft(z)))/(2*F))&&ct<1&&G.push(ct),0<(W=(-V-tt)/(2*F))&&W<1&&G.push(W));for(var Q,Tt,Lt=G.length,Wt=Lt;Lt--;)Q=(Tt=1-(ot=G[Lt]))*Tt*Tt*C+3*Tt*Tt*ot*E+3*Tt*ot*ot*N+ot*ot*ot*nt,bt[0][Lt]=Q,bt[1][Lt]=Tt*Tt*Tt*w+3*Tt*Tt*ot*M+3*Tt*ot*ot*H+ot*ot*ot*st;bt[0][Wt]=C,bt[1][Wt]=w,bt[0][Wt+1]=nt,bt[1][Wt+1]=st;var Xt=[{x:at.apply(null,bt[0]),y:at.apply(null,bt[1])},{x:mt.apply(null,bt[0]),y:mt.apply(null,bt[1])}];return fabric.cachesBoundsOfCurve&&(fabric.boundsOfCurveCache[p]=Xt),Xt},fabric.util.getPointOnPath=function(C,w,E){E||(E=b(C));for(var M=0;0<w-E[M].length&&M<E.length-2;)w-=E[M].length,M++;var N,H=E[M],nt=w/H.length,p=C[M];switch(H.command){case"M":return{x:H.x,y:H.y,angle:0};case"Z":case"z":return(N=new fabric.Point(H.x,H.y).lerp(new fabric.Point(H.destX,H.destY),nt)).angle=Math.atan2(H.destY-H.y,H.destX-H.x),N;case"L":return(N=new fabric.Point(H.x,H.y).lerp(new fabric.Point(p[1],p[2]),nt)).angle=Math.atan2(p[2]-H.y,p[1]-H.x),N;case"C":case"Q":return function m(C,w){for(var E,M,N,H=0,nt=0,st=C.iterator,p={x:C.x,y:C.y},F=.01,V=C.angleFinder;nt<w&&1e-4<F;)E=st(H),N=H,w<(M=e(p.x,p.y,E.x,E.y))+nt?(H-=F,F/=2):(p=E,H+=F,nt+=M);return E.angle=V(N),E}(H,w)}},fabric.util.transformPath=function(C,w,E){return E&&(w=fabric.util.multiplyTransformMatrices(w,[1,0,0,1,-E.x,-E.y])),C.map(function(M){for(var N=M.slice(0),H={},nt=1;nt<M.length-1;nt+=2)H.x=M[nt],H.y=M[nt+1],H=fabric.util.transformPoint(H,w),N[nt]=H.x,N[nt+1]=H.y;return N})}}(),function(){var h=Array.prototype.slice;function n(a,l,t){if(a&&0!==a.length){var e=a.length-1,i=l?a[e][l]:a[e];if(l)for(;e--;)t(a[e][l],i)&&(i=a[e][l]);else for(;e--;)t(a[e],i)&&(i=a[e]);return i}}fabric.util.array={fill:function(a,l){for(var t=a.length;t--;)a[t]=l;return a},invoke:function(a,l){for(var t=h.call(arguments,2),e=[],i=0,s=a.length;i<s;i++)e[i]=t.length?a[i][l].apply(a[i],t):a[i][l].call(a[i]);return e},min:function(a,l){return n(a,l,function(t,e){return t<e})},max:function(a,l){return n(a,l,function(t,e){return e<=t})}}}(),function(){function h(n,a,l){if(l)if(!fabric.isLikelyNode&&a instanceof Element)n=a;else if(a instanceof Array){n=[];for(var t=0,e=a.length;t<e;t++)n[t]=h({},a[t],l)}else if(a&&"object"==typeof a)for(var i in a)"canvas"===i||"group"===i?n[i]=null:a.hasOwnProperty(i)&&(n[i]=h({},a[i],l));else n=a;else for(var i in a)n[i]=a[i];return n}fabric.util.object={extend:h,clone:function(n,a){return h({},n,a)}},fabric.util.object.extend(fabric.util,fabric.Observable)}(),function(){function h(n,a){var l=n.charCodeAt(a);if(isNaN(l))return"";if(l<55296||57343<l)return n.charAt(a);if(55296<=l&&l<=56319){if(n.length<=a+1)throw"High surrogate without following low surrogate";var t=n.charCodeAt(a+1);if(t<56320||57343<t)throw"High surrogate without following low surrogate";return n.charAt(a)+n.charAt(a+1)}if(0===a)throw"Low surrogate without preceding high surrogate";var e=n.charCodeAt(a-1);if(e<55296||56319<e)throw"Low surrogate without preceding high surrogate";return!1}fabric.util.string={camelize:function(n){return n.replace(/-+(.)?/g,function(a,l){return l?l.toUpperCase():""})},capitalize:function(n,a){return n.charAt(0).toUpperCase()+(a?n.slice(1):n.slice(1).toLowerCase())},escapeXml:function(n){return n.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},graphemeSplit:function(n){var a,l=0,t=[];for(l=0;l<n.length;l++)!1!==(a=h(n,l))&&t.push(a);return t}}}(),function(){var h=Array.prototype.slice,n=function(){},a=function(){for(var i in{toString:1})if("toString"===i)return!1;return!0}(),l=function(i,s,r){for(var o in s)i.prototype[o]=o in i.prototype&&"function"==typeof i.prototype[o]&&-1<(s[o]+"").indexOf("callSuper")?function(f){return function(){var m=this.constructor.superclass;this.constructor.superclass=r;var b=s[f].apply(this,arguments);if(this.constructor.superclass=m,"initialize"!==f)return b}}(o):s[o],a&&(s.toString!==Object.prototype.toString&&(i.prototype.toString=s.toString),s.valueOf!==Object.prototype.valueOf&&(i.prototype.valueOf=s.valueOf))};function t(){}function e(i){for(var s=null,r=this;r.constructor.superclass;){var o=r.constructor.superclass.prototype[i];if(r[i]!==o){s=o;break}r=r.constructor.superclass.prototype}return s?1<arguments.length?s.apply(this,h.call(arguments,1)):s.call(this):console.log("tried to callSuper "+i+", method not found in prototype chain",this)}fabric.util.createClass=function(){var i=null,s=h.call(arguments,0);function r(){this.initialize.apply(this,arguments)}"function"==typeof s[0]&&(i=s.shift()),r.superclass=i,r.subclasses=[],i&&(t.prototype=i.prototype,r.prototype=new t,i.subclasses.push(r));for(var o=0,f=s.length;o<f;o++)l(r,s[o],i);return r.prototype.initialize||(r.prototype.initialize=n),(r.prototype.constructor=r).prototype.callSuper=e,r}}(),function(){var h=!!fabric.document.createElement("div").attachEvent,n=["touchstart","touchmove","touchend"];fabric.util.addListener=function(a,l,t,e){a&&a.addEventListener(l,t,!h&&e)},fabric.util.removeListener=function(a,l,t,e){a&&a.removeEventListener(l,t,!h&&e)},fabric.util.getPointer=function(a){var l,t,i=fabric.util.getScrollLeftTop(a.target),s=(t=(l=a).changedTouches)&&t[0]?t[0]:l;return{x:s.clientX+i.left,y:s.clientY+i.top}},fabric.util.isTouchEvent=function(a){return-1<n.indexOf(a.type)||"touch"===a.pointerType}}(),function(){var h=fabric.document.createElement("div"),l=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,t=function(e){return e};"string"==typeof h.style.opacity?t=function(e,i){return e.style.opacity=i,e}:"string"==typeof h.style.filter&&(t=function(e,i){var s=e.style;return e.currentStyle&&!e.currentStyle.hasLayout&&(s.zoom=1),l.test(s.filter)?s.filter=s.filter.replace(l,i=.9999<=i?"":"alpha(opacity="+100*i+")"):s.filter+=" alpha(opacity="+100*i+")",e}),fabric.util.setStyle=function(e,i){var s=e.style;if(!s)return e;if("string"==typeof i)return e.style.cssText+=";"+i,-1<i.indexOf("opacity")?t(e,i.match(/opacity:\s*(\d?\.?\d*)/)[1]):e;for(var r in i)"opacity"===r?t(e,i[r]):s["float"===r||"cssFloat"===r?void 0===s.styleFloat?"cssFloat":"styleFloat":r]=i[r];return e}}(),function(){var n,a,l,t,h=Array.prototype.slice,e=function(r){return h.call(r,0)};try{n=e(fabric.document.childNodes)instanceof Array}catch{}function i(r,o){var f=fabric.document.createElement(r);for(var m in o)"class"===m?f.className=o[m]:"for"===m?f.htmlFor=o[m]:f.setAttribute(m,o[m]);return f}function s(r){for(var o=0,f=0,m=fabric.document.documentElement,b=fabric.document.body||{scrollLeft:0,scrollTop:0};r&&(r.parentNode||r.host)&&((r=r.parentNode||r.host)===fabric.document?(o=b.scrollLeft||m.scrollLeft||0,f=b.scrollTop||m.scrollTop||0):(o+=r.scrollLeft||0,f+=r.scrollTop||0),1!==r.nodeType||"fixed"!==r.style.position););return{left:o,top:f}}n||(e=function(r){for(var o=new Array(r.length),f=r.length;f--;)o[f]=r[f];return o}),a=fabric.document.defaultView&&fabric.document.defaultView.getComputedStyle?function(r,o){var f=fabric.document.defaultView.getComputedStyle(r,null);return f?f[o]:void 0}:function(r,o){var f=r.style[o];return!f&&r.currentStyle&&(f=r.currentStyle[o]),f},t="userSelect"in(l=fabric.document.documentElement.style)?"userSelect":"MozUserSelect"in l?"MozUserSelect":"WebkitUserSelect"in l?"WebkitUserSelect":"KhtmlUserSelect"in l?"KhtmlUserSelect":"",fabric.util.makeElementUnselectable=function(r){return void 0!==r.onselectstart&&(r.onselectstart=fabric.util.falseFunction),t?r.style[t]="none":"string"==typeof r.unselectable&&(r.unselectable="on"),r},fabric.util.makeElementSelectable=function(r){return void 0!==r.onselectstart&&(r.onselectstart=null),t?r.style[t]="":"string"==typeof r.unselectable&&(r.unselectable=""),r},fabric.util.setImageSmoothing=function(r,o){r.imageSmoothingEnabled=r.imageSmoothingEnabled||r.webkitImageSmoothingEnabled||r.mozImageSmoothingEnabled||r.msImageSmoothingEnabled||r.oImageSmoothingEnabled,r.imageSmoothingEnabled=o},fabric.util.getById=function(r){return"string"==typeof r?fabric.document.getElementById(r):r},fabric.util.toArray=e,fabric.util.addClass=function(r,o){r&&-1===(" "+r.className+" ").indexOf(" "+o+" ")&&(r.className+=(r.className?" ":"")+o)},fabric.util.makeElement=i,fabric.util.wrapElement=function(r,o,f){return"string"==typeof o&&(o=i(o,f)),r.parentNode&&r.parentNode.replaceChild(o,r),o.appendChild(r),o},fabric.util.getScrollLeftTop=s,fabric.util.getElementOffset=function(r){var o,f,m=r&&r.ownerDocument,b={left:0,top:0},C={left:0,top:0},w={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!m)return C;for(var E in w)C[w[E]]+=parseInt(a(r,E),10)||0;return o=m.documentElement,void 0!==r.getBoundingClientRect&&(b=r.getBoundingClientRect()),f=s(r),{left:b.left+f.left-(o.clientLeft||0)+C.left,top:b.top+f.top-(o.clientTop||0)+C.top}},fabric.util.getNodeCanvas=function(r){var o=fabric.jsdomImplForWrapper(r);return o._canvas||o._image},fabric.util.cleanUpJsdomNode=function(r){if(fabric.isLikelyNode){var o=fabric.jsdomImplForWrapper(r);o&&(o._image=null,o._canvas=null,o._currentSrc=null,o._attributes=null,o._classList=null)}}}(),function(){function h(){}fabric.util.request=function(n,a){a||(a={});var l,t,e=a.method?a.method.toUpperCase():"GET",i=a.onComplete||function(){},s=new fabric.window.XMLHttpRequest,r=a.body||a.parameters;return s.onreadystatechange=function(){4===s.readyState&&(i(s),s.onreadystatechange=h)},"GET"===e&&(r=null,"string"==typeof a.parameters&&(t=a.parameters,n=(l=n)+(/\?/.test(l)?"&":"?")+t)),s.open(e,n,!0),"POST"!==e&&"PUT"!==e||s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.send(r),s}}(),fabric.log=console.log,fabric.warn=console.warn,function(){var h=fabric.util.object.extend,n=fabric.util.object.clone,a=[];function l(){return!1}function t(r,o,f,m){return-f*Math.cos(r/m*(Math.PI/2))+f+o}fabric.util.object.extend(a,{cancelAll:function(){var r=this.splice(0);return r.forEach(function(o){o.cancel()}),r},cancelByCanvas:function(r){if(!r)return[];var o=this.filter(function(f){return"object"==typeof f.target&&f.target.canvas===r});return o.forEach(function(f){f.cancel()}),o},cancelByTarget:function(r){var o=this.findAnimationsByTarget(r);return o.forEach(function(f){f.cancel()}),o},findAnimationIndex:function(r){return this.indexOf(this.findAnimation(r))},findAnimation:function(r){return this.find(function(o){return o.cancel===r})},findAnimationsByTarget:function(r){return r?this.filter(function(o){return o.target===r}):[]}});var e=fabric.window.requestAnimationFrame||fabric.window.webkitRequestAnimationFrame||fabric.window.mozRequestAnimationFrame||fabric.window.oRequestAnimationFrame||fabric.window.msRequestAnimationFrame||function(r){return fabric.window.setTimeout(r,1e3/60)},i=fabric.window.cancelAnimationFrame||fabric.window.clearTimeout;function s(){return e.apply(fabric.window,arguments)}fabric.util.animate=function(r){r||(r={});var o,f=!1,m=function(){var b=fabric.runningAnimations.indexOf(o);return-1<b&&fabric.runningAnimations.splice(b,1)[0]};return o=h(n(r),{cancel:function(){return f=!0,m()},currentValue:"startValue"in r?r.startValue:0,completionRate:0,durationRate:0}),fabric.runningAnimations.push(o),s(function(b){var C,w=b||+new Date,E=r.duration||500,M=w+E,N=r.onChange||l,H=r.abort||l,nt=r.onComplete||l,st=r.easing||t,p="startValue"in r&&0<r.startValue.length,F="startValue"in r?r.startValue:0,V="endValue"in r?r.endValue:100,et=r.byValue||(p?F.map(function(ot,ct){return V[ct]-F[ct]}):V-F);r.onStart&&r.onStart(),function ot(ct){C=ct||+new Date;var W=M<C?E:C-w,z=W/E,tt=p?F.map(function(at,mt){return st(W,F[mt],et[mt],E)}):st(W,F,et,E),ft=Math.abs(p?(tt[0]-F[0])/et[0]:(tt-F)/et);if(o.currentValue=p?tt.slice():tt,o.completionRate=ft,o.durationRate=z,!f){if(!H(tt,ft,z))return M<C?(o.currentValue=p?V.slice():V,o.completionRate=1,o.durationRate=1,N(p?V.slice():V,1,1),nt(V,1,1),void m()):(N(tt,ft,z),void s(ot));m()}}(w)}),o.cancel},fabric.util.requestAnimFrame=s,fabric.util.cancelAnimFrame=function(){return i.apply(fabric.window,arguments)},fabric.runningAnimations=a}(),function(){function h(n,a,l){var t="rgba("+parseInt(n[0]+l*(a[0]-n[0]),10)+","+parseInt(n[1]+l*(a[1]-n[1]),10)+","+parseInt(n[2]+l*(a[2]-n[2]),10);return(t+=","+(n&&a?parseFloat(n[3]+l*(a[3]-n[3])):1))+")"}fabric.util.animateColor=function(n,a,l,t){var e=new fabric.Color(n).getSource(),i=new fabric.Color(a).getSource(),s=t.onComplete,r=t.onChange;return fabric.util.animate(fabric.util.object.extend(t=t||{},{duration:l||500,startValue:e,endValue:i,byValue:i,easing:function(o,f,m,b){return h(f,m,t.colorEasing?t.colorEasing(o,b):1-Math.cos(o/b*(Math.PI/2)))},onComplete:function(o,f,m){if(s)return s(h(i,i,0),f,m)},onChange:function(o,f,m){if(r){if(Array.isArray(o))return r(h(o,o,0),f,m);r(o,f,m)}}}))}}(),function(){function h(t,e,i,s){return t<Math.abs(e)?(t=e,s=i/4):s=0===e&&0===t?i/(2*Math.PI)*Math.asin(1):i/(2*Math.PI)*Math.asin(e/t),{a:t,c:e,p:i,s}}function n(t,e,i){return t.a*Math.pow(2,10*(e-=1))*Math.sin((e*i-t.s)*(2*Math.PI)/t.p)}function a(t,e,i,s){return i-l(s-t,0,i,s)+e}function l(t,e,i,s){return(t/=s)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e}fabric.util.ease={easeInQuad:function(t,e,i,s){return i*(t/=s)*t+e},easeOutQuad:function(t,e,i,s){return-i*(t/=s)*(t-2)+e},easeInOutQuad:function(t,e,i,s){return(t/=s/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,i,s){return i*(t/=s)*t*t+e},easeOutCubic:function(t,e,i,s){return i*((t=t/s-1)*t*t+1)+e},easeInOutCubic:function(t,e,i,s){return(t/=s/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,i,s){return i*(t/=s)*t*t*t+e},easeOutQuart:function(t,e,i,s){return-i*((t=t/s-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,i,s){return(t/=s/2)<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,i,s){return i*(t/=s)*t*t*t*t+e},easeOutQuint:function(t,e,i,s){return i*((t=t/s-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,i,s){return(t/=s/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,i,s){return-i*Math.cos(t/s*(Math.PI/2))+i+e},easeOutSine:function(t,e,i,s){return i*Math.sin(t/s*(Math.PI/2))+e},easeInOutSine:function(t,e,i,s){return-i/2*(Math.cos(Math.PI*t/s)-1)+e},easeInExpo:function(t,e,i,s){return 0===t?e:i*Math.pow(2,10*(t/s-1))+e},easeOutExpo:function(t,e,i,s){return t===s?e+i:i*(1-Math.pow(2,-10*t/s))+e},easeInOutExpo:function(t,e,i,s){return 0===t?e:t===s?e+i:(t/=s/2)<1?i/2*Math.pow(2,10*(t-1))+e:i/2*(2-Math.pow(2,-10*--t))+e},easeInCirc:function(t,e,i,s){return-i*(Math.sqrt(1-(t/=s)*t)-1)+e},easeOutCirc:function(t,e,i,s){return i*Math.sqrt(1-(t=t/s-1)*t)+e},easeInOutCirc:function(t,e,i,s){return(t/=s/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,i,s){var r=0;return 0===t?e:1==(t/=s)?e+i:(r||(r=.3*s),-n(h(i,i,r,1.70158),t,s)+e)},easeOutElastic:function(t,e,i,s){var r=0;if(0===t)return e;if(1==(t/=s))return e+i;r||(r=.3*s);var o=h(i,i,r,1.70158);return o.a*Math.pow(2,-10*t)*Math.sin((t*s-o.s)*(2*Math.PI)/o.p)+o.c+e},easeInOutElastic:function(t,e,i,s){var r=0;if(0===t)return e;if(2==(t/=s/2))return e+i;r||(r=s*(.3*1.5));var o=h(i,i,r,1.70158);return t<1?-.5*n(o,t,s)+e:o.a*Math.pow(2,-10*(t-=1))*Math.sin((t*s-o.s)*(2*Math.PI)/o.p)*.5+o.c+e},easeInBack:function(t,e,i,s,r){return void 0===r&&(r=1.70158),i*(t/=s)*t*((r+1)*t-r)+e},easeOutBack:function(t,e,i,s,r){return void 0===r&&(r=1.70158),i*((t=t/s-1)*t*((r+1)*t+r)+1)+e},easeInOutBack:function(t,e,i,s,r){return void 0===r&&(r=1.70158),(t/=s/2)<1?i/2*(t*t*((1+(r*=1.525))*t-r))+e:i/2*((t-=2)*t*((1+(r*=1.525))*t+r)+2)+e},easeInBounce:a,easeOutBounce:l,easeInOutBounce:function(t,e,i,s){return t<s/2?.5*a(2*t,0,i,s)+e:.5*l(2*t-s,0,i,s)+.5*i+e}}}(),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.util.object.extend,l=n.util.object.clone,t=n.util.toFixed,e=n.util.parseUnit,i=n.util.multiplyTransformMatrices,s={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},r={stroke:"strokeOpacity",fill:"fillOpacity"},o="font-size",f="clip-path";function m(p,F,V,et){var ot,ct=Array.isArray(F);if("fill"!==p&&"stroke"!==p||"none"!==F){if("strokeUniform"===p)return"non-scaling-stroke"===F;if("strokeDashArray"===p)F="none"===F?null:F.replace(/,/g," ").split(/\s+/).map(parseFloat);else if("transformMatrix"===p)F=V&&V.transformMatrix?i(V.transformMatrix,n.parseTransformAttribute(F)):n.parseTransformAttribute(F);else if("visible"===p)F="none"!==F&&"hidden"!==F,V&&!1===V.visible&&(F=!1);else if("opacity"===p)F=parseFloat(F),V&&void 0!==V.opacity&&(F*=V.opacity);else if("textAnchor"===p)F="start"===F?"left":"end"===F?"right":"center";else if("charSpacing"===p)ot=e(F,et)/et*1e3;else if("paintFirst"===p){var W=F.indexOf("fill"),z=F.indexOf("stroke");F="fill",(-1<W&&-1<z&&z<W||-1===W&&-1<z)&&(F="stroke")}else{if("href"===p||"xlink:href"===p||"font"===p)return F;if("imageSmoothing"===p)return"optimizeQuality"===F;ot=ct?F.map(e):e(F,et)}}else F="";return!ct&&isNaN(ot)?F:ot}function b(p){return new RegExp("^("+p.join("|")+")\\b","i")}function C(p,F){var et,ot,ct,W=[];for(ot=0,ct=F.length;ot<ct;ot++)et=p.getElementsByTagName(F[ot]),W=W.concat(Array.prototype.slice.call(et));return W}function w(p,F){var V,et=!0;return(V=E(p,F.pop()))&&F.length&&(et=function(ot,ct){for(var W,z=!0;ot.parentNode&&1===ot.parentNode.nodeType&&ct.length;)z&&(W=ct.pop()),z=E(ot=ot.parentNode,W);return 0===ct.length}(p,F)),V&&et&&0===F.length}function E(p,F){var V,et,ot=p.nodeName,ct=p.getAttribute("class"),W=p.getAttribute("id");if(V=new RegExp("^"+ot,"i"),F=F.replace(V,""),W&&F.length&&(V=new RegExp("#"+W+"(?![a-zA-Z\\-]+)","i"),F=F.replace(V,"")),ct&&F.length)for(et=(ct=ct.split(" ")).length;et--;)V=new RegExp("\\."+ct[et]+"(?![a-zA-Z\\-]+)","i"),F=F.replace(V,"");return 0===F.length}function M(p,F){var V;if(p.getElementById&&(V=p.getElementById(F)),V)return V;var et,ot,ct,W=p.getElementsByTagName("*");for(ot=0,ct=W.length;ot<ct;ot++)if(F===(et=W[ot]).getAttribute("id"))return et}n.svgValidTagNamesRegEx=b(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]),n.svgViewBoxElementsRegEx=b(["symbol","image","marker","pattern","view","svg"]),n.svgInvalidAncestorsRegEx=b(["pattern","defs","symbol","metadata","clipPath","mask","desc"]),n.svgValidParentsRegEx=b(["symbol","g","a","svg","clipPath","defs"]),n.cssRules={},n.gradientDefs={},n.clipPaths={},n.parseTransformAttribute=function(){function p(z,tt,ft){z[ft]=Math.tan(n.util.degreesToRadians(tt[0]))}var F=n.iMatrix,V=n.reNum,et=n.commaWsp,ot="(?:(?:(matrix)\\s*\\(\\s*("+V+")"+et+"("+V+")"+et+"("+V+")"+et+"("+V+")"+et+"("+V+")"+et+"("+V+")\\s*\\))|(?:(translate)\\s*\\(\\s*("+V+")(?:"+et+"("+V+"))?\\s*\\))|(?:(scale)\\s*\\(\\s*("+V+")(?:"+et+"("+V+"))?\\s*\\))|(?:(rotate)\\s*\\(\\s*("+V+")(?:"+et+"("+V+")"+et+"("+V+"))?\\s*\\))|(?:(skewX)\\s*\\(\\s*("+V+")\\s*\\))|(?:(skewY)\\s*\\(\\s*("+V+")\\s*\\)))",ct=new RegExp("^\\s*(?:(?:"+ot+"(?:"+et+"*"+ot+")*)?)\\s*$"),W=new RegExp(ot,"g");return function(z){var tt=F.concat(),ft=[];if(!z||z&&!ct.test(z))return tt;z.replace(W,function(mt){var _t,G,bt,Ct,Q,St,Tt,Lt,Wt,Xt,we,ve,ne=new RegExp(ot).exec(mt).filter(function(Fe){return!!Fe}),re=ne[1],jt=ne.slice(2).map(parseFloat);switch(re){case"translate":(we=tt)[4]=(ve=jt)[0],2===ve.length&&(we[5]=ve[1]);break;case"rotate":jt[0]=n.util.degreesToRadians(jt[0]),Q=tt,Tt=n.util.cos((St=jt)[0]),Lt=n.util.sin(St[0]),Xt=Wt=0,3===St.length&&(Wt=St[1],Xt=St[2]),Q[0]=Tt,Q[1]=Lt,Q[2]=-Lt,Q[3]=Tt,Q[4]=Wt-(Tt*Wt-Lt*Xt),Q[5]=Xt-(Lt*Wt+Tt*Xt);break;case"scale":bt=(G=jt)[0],Ct=2===G.length?G[1]:G[0],(_t=tt)[0]=bt,_t[3]=Ct;break;case"skewX":p(tt,jt,2);break;case"skewY":p(tt,jt,1);break;case"matrix":tt=jt}ft.push(tt.concat()),tt=F.concat()});for(var at=ft[0];1<ft.length;)ft.shift(),at=n.util.multiplyTransformMatrices(at,ft[0]);return at}}();var N=new RegExp("^\\s*("+n.reNum+"+)\\s*,?\\s*("+n.reNum+"+)\\s*,?\\s*("+n.reNum+"+)\\s*,?\\s*("+n.reNum+"+)\\s*$");function H(p){if(!n.svgViewBoxElementsRegEx.test(p.nodeName))return{};var F,V,et,ot,ct,W,z=p.getAttribute("viewBox"),tt=1,ft=1,at=p.getAttribute("width"),mt=p.getAttribute("height"),_t=p.getAttribute("x")||0,G=p.getAttribute("y")||0,bt=p.getAttribute("preserveAspectRatio")||"",Ct=!z||!(z=z.match(N)),Q=!at||!mt||"100%"===at||"100%"===mt,St=Ct&&Q,Tt={},Lt="",Wt=0,Xt=0;if(Tt.width=0,Tt.height=0,Tt.toBeParsed=St,Ct&&(_t||G)&&p.parentNode&&"#document"!==p.parentNode.nodeName&&(Lt=" translate("+e(_t)+" "+e(G)+") ",ct=(p.getAttribute("transform")||"")+Lt,p.setAttribute("transform",ct),p.removeAttribute("x"),p.removeAttribute("y")),St)return Tt;if(Ct)return Tt.width=e(at),Tt.height=e(mt),Tt;if(F=-parseFloat(z[1]),V=-parseFloat(z[2]),et=parseFloat(z[3]),ot=parseFloat(z[4]),Tt.minX=F,Tt.minY=V,Tt.viewBoxWidth=et,Tt.viewBoxHeight=ot,Q?(Tt.width=et,Tt.height=ot):(Tt.width=e(at),Tt.height=e(mt),tt=Tt.width/et,ft=Tt.height/ot),"none"!==(bt=n.util.parsePreserveAspectRatioAttribute(bt)).alignX&&("meet"===bt.meetOrSlice&&(ft=tt=ft<tt?ft:tt),"slice"===bt.meetOrSlice&&(ft=tt=ft<tt?tt:ft),Wt=Tt.width-et*tt,Xt=Tt.height-ot*tt,"Mid"===bt.alignX&&(Wt/=2),"Mid"===bt.alignY&&(Xt/=2),"Min"===bt.alignX&&(Wt=0),"Min"===bt.alignY&&(Xt=0)),1===tt&&1===ft&&0===F&&0===V&&0===_t&&0===G)return Tt;if((_t||G)&&"#document"!==p.parentNode.nodeName&&(Lt=" translate("+e(_t)+" "+e(G)+") "),ct=Lt+" matrix("+tt+" 0 0 "+ft+" "+(F*tt+Wt)+" "+(V*ft+Xt)+") ","svg"===p.nodeName){for(W=p.ownerDocument.createElementNS(n.svgNS,"g");p.firstChild;)W.appendChild(p.firstChild);p.appendChild(W)}else(W=p).removeAttribute("x"),W.removeAttribute("y"),ct=W.getAttribute("transform")+ct;return W.setAttribute("transform",ct),Tt}function nt(p,F){var V="xlink:href",et=M(p,F.getAttribute(V).slice(1));if(et&&et.getAttribute(V)&&nt(p,et),["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"].forEach(function(ct){et&&!F.hasAttribute(ct)&&et.hasAttribute(ct)&&F.setAttribute(ct,et.getAttribute(ct))}),!F.children.length)for(var ot=et.cloneNode(!0);ot.firstChild;)F.appendChild(ot.firstChild);F.removeAttribute(V)}n.parseSVGDocument=function(p,F,V,et){if(p){!function(_t){for(var G=C(_t,["use","svg:use"]),bt=0;G.length&&bt<G.length;){var Ct=G[bt],Q=Ct.getAttribute("xlink:href")||Ct.getAttribute("href");if(null===Q)return;var St,Tt,Lt,Wt,Xt=Q.slice(1),we=Ct.getAttribute("x")||0,ve=Ct.getAttribute("y")||0,ne=M(_t,Xt).cloneNode(!0),re=(ne.getAttribute("transform")||"")+" translate("+we+", "+ve+")",jt=G.length,Fe=n.svgNS;if(H(ne),/^svg$/i.test(ne.nodeName)){var Ft=ne.ownerDocument.createElementNS(Fe,"g");for(Tt=0,Wt=(Lt=ne.attributes).length;Tt<Wt;Tt++)St=Lt.item(Tt),Ft.setAttributeNS(Fe,St.nodeName,St.nodeValue);for(;ne.firstChild;)Ft.appendChild(ne.firstChild);ne=Ft}for(Tt=0,Wt=(Lt=Ct.attributes).length;Tt<Wt;Tt++)"x"!==(St=Lt.item(Tt)).nodeName&&"y"!==St.nodeName&&"xlink:href"!==St.nodeName&&"href"!==St.nodeName&&("transform"===St.nodeName?re=St.nodeValue+" "+re:ne.setAttribute(St.nodeName,St.nodeValue));ne.setAttribute("transform",re),ne.setAttribute("instantiated_by_use","1"),ne.removeAttribute("id"),Ct.parentNode.replaceChild(ne,Ct),G.length===jt&&bt++}}(p);var ot,ct,W=n.Object.__uid++,z=H(p),tt=n.util.toArray(p.getElementsByTagName("*"));if(z.crossOrigin=et&&et.crossOrigin,z.svgUid=W,0===tt.length&&n.isLikelyNode){var ft=[];for(ot=0,ct=(tt=p.selectNodes('//*[name(.)!="svg"]')).length;ot<ct;ot++)ft[ot]=tt[ot];tt=ft}var at=tt.filter(function(_t){return H(_t),n.svgValidTagNamesRegEx.test(_t.nodeName.replace("svg:",""))&&!function(G,bt){for(;G&&(G=G.parentNode);)if(G.nodeName&&bt.test(G.nodeName.replace("svg:",""))&&!G.getAttribute("instantiated_by_use"))return!0;return!1}(_t,n.svgInvalidAncestorsRegEx)});if(!at||at&&!at.length)F&&F([],{});else{var mt={};tt.filter(function(_t){return"clipPath"===_t.nodeName.replace("svg:","")}).forEach(function(_t){var G=_t.getAttribute("id");mt[G]=n.util.toArray(_t.getElementsByTagName("*")).filter(function(bt){return n.svgValidTagNamesRegEx.test(bt.nodeName.replace("svg:",""))})}),n.gradientDefs[W]=n.getGradientDefs(p),n.cssRules[W]=n.getCSSRules(p),n.clipPaths[W]=mt,n.parseElements(at,function(_t,G){F&&(F(_t,z,G,tt),delete n.gradientDefs[W],delete n.cssRules[W],delete n.clipPaths[W])},l(z),V,et)}}};var st=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+n.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+n.reNum+"))?\\s+(.*)");a(n,{parseFontDeclaration:function(p,F){var V=p.match(st);if(V){var et=V[1],ot=V[3],ct=V[4],W=V[5],z=V[6];et&&(F.fontStyle=et),ot&&(F.fontWeight=isNaN(parseFloat(ot))?ot:parseFloat(ot)),ct&&(F.fontSize=e(ct)),z&&(F.fontFamily=z),W&&(F.lineHeight="normal"===W?1:W)}},getGradientDefs:function(p){var F,V=C(p,["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"]),et=0,ot={};for(et=V.length;et--;)(F=V[et]).getAttribute("xlink:href")&&nt(p,F),ot[F.getAttribute("id")]=F;return ot},parseAttributes:function(p,F,V){if(p){var et,ot,ct,W={};void 0===V&&(V=p.getAttribute("svgUid")),p.parentNode&&n.svgValidParentsRegEx.test(p.parentNode.nodeName)&&(W=n.parseAttributes(p.parentNode,F,V));var z=F.reduce(function(Ct,Q){return(et=p.getAttribute(Q))&&(Ct[Q]=et),Ct},{}),tt=a(function(Ct,Q){var St={};for(var Tt in n.cssRules[Q])if(w(Ct,Tt.split(" ")))for(var Lt in n.cssRules[Q][Tt])St[Lt]=n.cssRules[Q][Tt][Lt];return St}(p,V),n.parseStyleAttribute(p));z=a(z,tt),tt[f]&&p.setAttribute(f,tt[f]),ot=ct=W.fontSize||n.Text.DEFAULT_SVG_FONT_SIZE,z[o]&&(z[o]=ot=e(z[o],ct));var ft,at,mt,_t={};for(var G in z)at=m(ft=(mt=G)in s?s[mt]:mt,z[G],W,ot),_t[ft]=at;_t&&_t.font&&n.parseFontDeclaration(_t.font,_t);var bt=a(W,_t);return n.svgValidParentsRegEx.test(p.nodeName)?bt:function(Ct){for(var Q in r)if(void 0!==Ct[r[Q]]&&""!==Ct[Q]){if(void 0===Ct[Q]){if(!n.Object.prototype[Q])continue;Ct[Q]=n.Object.prototype[Q]}if(0!==Ct[Q].indexOf("url(")){var St=new n.Color(Ct[Q]);Ct[Q]=St.setAlpha(t(St.getAlpha()*Ct[r[Q]],2)).toRgba()}}return Ct}(bt)}},parseElements:function(p,F,V,et,ot){new n.ElementsParser(p,F,V,et,ot).parse()},parseStyleAttribute:function(p){var F,V,et,ot={},ct=p.getAttribute("style");return ct&&("string"==typeof ct?(F=ot,ct.replace(/;\s*$/,"").split(";").forEach(function(W){var z=W.split(":");V=z[0].trim().toLowerCase(),et=z[1].trim(),F[V]=et})):function(W,z){for(var at in W)void 0!==W[at]&&(z[at.toLowerCase()]=W[at])}(ct,ot)),ot},parsePointsAttribute:function(p){if(!p)return null;var F,V,et=[];for(F=0,V=(p=(p=p.replace(/,/g," ").trim()).split(/\s+/)).length;F<V;F+=2)et.push({x:parseFloat(p[F]),y:parseFloat(p[F+1])});return et},getCSSRules:function(p){var F,V,et=p.getElementsByTagName("style"),ot={};for(F=0,V=et.length;F<V;F++){var ct=et[F].textContent;""!==(ct=ct.replace(/\/\*[\s\S]*?\*\//g,"")).trim()&&ct.split("}").filter(function(W){return W.trim()}).forEach(function(W){var z=W.split("{"),tt={},ft=z[1].trim().split(";").filter(function(G){return G.trim()});for(F=0,V=ft.length;F<V;F++){var at=ft[F].split(":"),mt=at[0].trim(),_t=at[1].trim();tt[mt]=_t}(W=z[0].trim()).split(",").forEach(function(G){""!==(G=G.replace(/^svg/i,"").trim())&&(ot[G]?n.util.object.extend(ot[G],tt):ot[G]=n.util.object.clone(tt))})})}return ot},loadSVGFromURL:function(p,F,V,et){p=p.replace(/^\n\s*/,"").trim(),new n.util.request(p,{method:"get",onComplete:function(ot){var ct=ot.responseXML;if(!ct||!ct.documentElement)return F&&F(null),!1;n.parseSVGDocument(ct.documentElement,function(W,z,tt,ft){F&&F(W,z,tt,ft)},V,et)}})},loadSVGFromString:function(p,F,V,et){var ot=(new n.window.DOMParser).parseFromString(p.trim(),"text/xml");n.parseSVGDocument(ot.documentElement,function(ct,W,z,tt){F(ct,W,z,tt)},V,et)}})}(typeof exports<"u"?exports:this),fabric.ElementsParser=function(h,n,a,l,t,e){this.elements=h,this.callback=n,this.options=a,this.reviver=l,this.svgUid=a&&a.svgUid||0,this.parsingOptions=t,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=e},function(h){h.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},h.createObjects=function(){var n=this;this.elements.forEach(function(a,l){a.setAttribute("svgUid",n.svgUid),n.createObject(a,l)})},h.findTag=function(n){return fabric[fabric.util.string.capitalize(n.tagName.replace("svg:",""))]},h.createObject=function(n,a){var l=this.findTag(n);if(l&&l.fromElement)try{l.fromElement(n,this.createCallback(a,n),this.options)}catch(t){fabric.log(t)}else this.checkIfDone()},h.createCallback=function(n,a){var l=this;return function(t){var e;l.resolveGradient(t,a,"fill"),l.resolveGradient(t,a,"stroke"),t instanceof fabric.Image&&t._originalElement&&(e=t.parsePreserveAspectRatioAttribute(a)),t._removeTransformMatrix(e),l.resolveClipPath(t,a),l.reviver&&l.reviver(a,t),l.instances[n]=t,l.checkIfDone()}},h.extractPropertyDefinition=function(n,a,l){var t=n[a],e=this.regexUrl;if(e.test(t)){e.lastIndex=0;var i=e.exec(t)[1];return e.lastIndex=0,fabric[l][this.svgUid][i]}},h.resolveGradient=function(n,a,l){var t=this.extractPropertyDefinition(n,l,"gradientDefs");if(t){var e=a.getAttribute(l+"-opacity"),i=fabric.Gradient.fromElement(t,n,e,this.options);n.set(l,i)}},h.createClipPathCallback=function(n,a){return function(l){l._removeTransformMatrix(),l.fillRule=l.clipRule,a.push(l)}},h.resolveClipPath=function(n,a){var l,t,e,i,s=this.extractPropertyDefinition(n,"clipPath","clipPaths");if(s){e=[],t=fabric.util.invertTransform(n.calcTransformMatrix());for(var r=s[0].parentNode,o=a;o.parentNode&&o.getAttribute("clip-path")!==n.clipPath;)o=o.parentNode;o.parentNode.appendChild(r);for(var f=0;f<s.length;f++)this.findTag(l=s[f]).fromElement(l,this.createClipPathCallback(n,e),this.options);s=1===e.length?e[0]:new fabric.Group(e),i=fabric.util.multiplyTransformMatrices(t,s.calcTransformMatrix()),s.clipPath&&this.resolveClipPath(s,o);var m=fabric.util.qrDecompose(i);s.flipX=!1,s.flipY=!1,s.set("scaleX",m.scaleX),s.set("scaleY",m.scaleY),s.angle=m.angle,s.skewX=m.skewX,s.skewY=0,s.setPositionByOrigin({x:m.translateX,y:m.translateY},"center","center"),n.clipPath=s}else delete n.clipPath},h.checkIfDone=function(){0==--this.numElements&&(this.instances=this.instances.filter(function(n){return null!=n}),this.callback(this.instances,this.elements))}}(fabric.ElementsParser.prototype),function(h){"use strict";var n=h.fabric||(h.fabric={});function a(l,t){this.x=l,this.y=t}n.Point?n.warn("fabric.Point is already defined"):(n.Point=a).prototype={type:"point",constructor:a,add:function(l){return new a(this.x+l.x,this.y+l.y)},addEquals:function(l){return this.x+=l.x,this.y+=l.y,this},scalarAdd:function(l){return new a(this.x+l,this.y+l)},scalarAddEquals:function(l){return this.x+=l,this.y+=l,this},subtract:function(l){return new a(this.x-l.x,this.y-l.y)},subtractEquals:function(l){return this.x-=l.x,this.y-=l.y,this},scalarSubtract:function(l){return new a(this.x-l,this.y-l)},scalarSubtractEquals:function(l){return this.x-=l,this.y-=l,this},multiply:function(l){return new a(this.x*l,this.y*l)},multiplyEquals:function(l){return this.x*=l,this.y*=l,this},divide:function(l){return new a(this.x/l,this.y/l)},divideEquals:function(l){return this.x/=l,this.y/=l,this},eq:function(l){return this.x===l.x&&this.y===l.y},lt:function(l){return this.x<l.x&&this.y<l.y},lte:function(l){return this.x<=l.x&&this.y<=l.y},gt:function(l){return this.x>l.x&&this.y>l.y},gte:function(l){return this.x>=l.x&&this.y>=l.y},lerp:function(l,t){return void 0===t&&(t=.5),t=Math.max(Math.min(1,t),0),new a(this.x+(l.x-this.x)*t,this.y+(l.y-this.y)*t)},distanceFrom:function(l){var t=this.x-l.x,e=this.y-l.y;return Math.sqrt(t*t+e*e)},midPointFrom:function(l){return this.lerp(l)},min:function(l){return new a(Math.min(this.x,l.x),Math.min(this.y,l.y))},max:function(l){return new a(Math.max(this.x,l.x),Math.max(this.y,l.y))},toString:function(){return this.x+","+this.y},setXY:function(l,t){return this.x=l,this.y=t,this},setX:function(l){return this.x=l,this},setY:function(l){return this.y=l,this},setFromPoint:function(l){return this.x=l.x,this.y=l.y,this},swap:function(l){var t=this.x,e=this.y;this.x=l.x,this.y=l.y,l.x=t,l.y=e},clone:function(){return new a(this.x,this.y)}}}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={});function a(l){this.status=l,this.points=[]}n.Intersection?n.warn("fabric.Intersection is already defined"):(n.Intersection=a,n.Intersection.prototype={constructor:a,appendPoint:function(l){return this.points.push(l),this},appendPoints:function(l){return this.points=this.points.concat(l),this}},n.Intersection.intersectLineLine=function(l,t,e,i){var s,r=(i.x-e.x)*(l.y-e.y)-(i.y-e.y)*(l.x-e.x),o=(t.x-l.x)*(l.y-e.y)-(t.y-l.y)*(l.x-e.x),f=(i.y-e.y)*(t.x-l.x)-(i.x-e.x)*(t.y-l.y);if(0!==f){var m=r/f,b=o/f;0<=m&&m<=1&&0<=b&&b<=1?(s=new a("Intersection")).appendPoint(new n.Point(l.x+m*(t.x-l.x),l.y+m*(t.y-l.y))):s=new a}else s=new a(0===r||0===o?"Coincident":"Parallel");return s},n.Intersection.intersectLinePolygon=function(l,t,e){var r,o,f=new a,m=e.length;for(o=0;o<m;o++)r=a.intersectLineLine(l,t,e[o],e[(o+1)%m]),f.appendPoints(r.points);return 0<f.points.length&&(f.status="Intersection"),f},n.Intersection.intersectPolygonPolygon=function(l,t){var e,i=new a,s=l.length;for(e=0;e<s;e++){var f=a.intersectLinePolygon(l[e],l[(e+1)%s],t);i.appendPoints(f.points)}return 0<i.points.length&&(i.status="Intersection"),i},n.Intersection.intersectPolygonRectangle=function(l,t,e){var i=t.min(e),s=t.max(e),r=new n.Point(s.x,i.y),o=new n.Point(i.x,s.y),f=a.intersectLinePolygon(i,r,l),m=a.intersectLinePolygon(r,s,l),b=a.intersectLinePolygon(s,o,l),C=a.intersectLinePolygon(o,i,l),w=new a;return w.appendPoints(f.points),w.appendPoints(m.points),w.appendPoints(b.points),w.appendPoints(C.points),0<w.points.length&&(w.status="Intersection"),w})}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={});function a(t){t?this._tryParsingColor(t):this.setSource([0,0,0,1])}function l(t,e,i){return i<0&&(i+=1),1<i&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}n.Color?n.warn("fabric.Color is already defined."):(n.Color=a,n.Color.prototype={_tryParsingColor:function(t){var e;t in a.colorNameMap&&(t=a.colorNameMap[t]),"transparent"===t&&(e=[255,255,255,0]),e||(e=a.sourceFromHex(t)),e||(e=a.sourceFromRgb(t)),e||(e=a.sourceFromHsl(t)),e||(e=[0,0,0,1]),e&&this.setSource(e)},_rgbToHsl:function(t,e,i){var s,r,o,f=n.util.array.max([t/=255,e/=255,i/=255]),m=n.util.array.min([t,e,i]);if(o=(f+m)/2,f===m)s=r=0;else{var b=f-m;switch(r=.5<o?b/(2-f-m):b/(f+m),f){case t:s=(e-i)/b+(e<i?6:0);break;case e:s=(i-t)/b+2;break;case i:s=(t-e)/b+4}s/=6}return[Math.round(360*s),Math.round(100*r),Math.round(100*o)]},getSource:function(){return this._source},setSource:function(t){this._source=t},toRgb:function(){var t=this.getSource();return"rgb("+t[0]+","+t[1]+","+t[2]+")"},toRgba:function(){var t=this.getSource();return"rgba("+t[0]+","+t[1]+","+t[2]+","+t[3]+")"},toHsl:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsl("+e[0]+","+e[1]+"%,"+e[2]+"%)"},toHsla:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsla("+e[0]+","+e[1]+"%,"+e[2]+"%,"+t[3]+")"},toHex:function(){var t,e,i,s=this.getSource();return t=1===(t=s[0].toString(16)).length?"0"+t:t,e=1===(e=s[1].toString(16)).length?"0"+e:e,i=1===(i=s[2].toString(16)).length?"0"+i:i,t.toUpperCase()+e.toUpperCase()+i.toUpperCase()},toHexa:function(){var t,e=this.getSource();return t=1===(t=(t=Math.round(255*e[3])).toString(16)).length?"0"+t:t,this.toHex()+t.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(t){var e=this.getSource();return e[3]=t,this.setSource(e),this},toGrayscale:function(){var t=this.getSource(),e=parseInt((.3*t[0]+.59*t[1]+.11*t[2]).toFixed(0),10);return this.setSource([e,e,e,t[3]]),this},toBlackWhite:function(t){var e=this.getSource(),i=(.3*e[0]+.59*e[1]+.11*e[2]).toFixed(0),s=e[3];return t=t||127,i=Number(i)<Number(t)?0:255,this.setSource([i,i,i,s]),this},overlayWith:function(t){t instanceof a||(t=new a(t));var e,i=[],s=this.getAlpha(),r=this.getSource(),o=t.getSource();for(e=0;e<3;e++)i.push(Math.round(.5*r[e]+.5*o[e]));return i[3]=s,this.setSource(i),this}},n.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,n.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,n.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,n.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},n.Color.fromRgb=function(t){return a.fromSource(a.sourceFromRgb(t))},n.Color.sourceFromRgb=function(t){var e=t.match(a.reRGBa);if(e){var i=parseInt(e[1],10)/(/%$/.test(e[1])?100:1)*(/%$/.test(e[1])?255:1),s=parseInt(e[2],10)/(/%$/.test(e[2])?100:1)*(/%$/.test(e[2])?255:1),r=parseInt(e[3],10)/(/%$/.test(e[3])?100:1)*(/%$/.test(e[3])?255:1);return[parseInt(i,10),parseInt(s,10),parseInt(r,10),e[4]?parseFloat(e[4]):1]}},n.Color.fromRgba=a.fromRgb,n.Color.fromHsl=function(t){return a.fromSource(a.sourceFromHsl(t))},n.Color.sourceFromHsl=function(t){var e=t.match(a.reHSLa);if(e){var i,s,r,o=(parseFloat(e[1])%360+360)%360/360,f=parseFloat(e[2])/(/%$/.test(e[2])?100:1),m=parseFloat(e[3])/(/%$/.test(e[3])?100:1);if(0===f)i=s=r=m;else{var b=m<=.5?m*(f+1):m+f-m*f,C=2*m-b;i=l(C,b,o+1/3),s=l(C,b,o),r=l(C,b,o-1/3)}return[Math.round(255*i),Math.round(255*s),Math.round(255*r),e[4]?parseFloat(e[4]):1]}},n.Color.fromHsla=a.fromHsl,n.Color.fromHex=function(t){return a.fromSource(a.sourceFromHex(t))},n.Color.sourceFromHex=function(t){if(t.match(a.reHex)){var e=t.slice(t.indexOf("#")+1),i=3===e.length||4===e.length,s=8===e.length||4===e.length,r=i?e.charAt(0)+e.charAt(0):e.substring(0,2),o=i?e.charAt(1)+e.charAt(1):e.substring(2,4),f=i?e.charAt(2)+e.charAt(2):e.substring(4,6),m=s?i?e.charAt(3)+e.charAt(3):e.substring(6,8):"FF";return[parseInt(r,16),parseInt(o,16),parseInt(f,16),parseFloat((parseInt(m,16)/255).toFixed(2))]}},n.Color.fromSource=function(t){var e=new a;return e.setSource(t),e})}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=["e","se","s","sw","w","nw","n","ne","e"],l=["ns","nesw","ew","nwse"],t={},e="left",i="top",s="right",r="bottom",o="center",f={top:r,bottom:i,left:s,right:e,center:o},m=n.util.radiansToDegrees,b=Math.sign||function(W){return(0<W)-(W<0)||+W};function C(W,z){var tt=W.angle+m(Math.atan2(z.y,z.x))+360;return Math.round(tt%360/45)}function w(W,z){var tt=z.transform.target,ft=tt.canvas,at=n.util.object.clone(z);at.target=tt,ft&&ft.fire("object:"+W,at),tt.fire(W,z)}function E(W,z){var tt=z.canvas,ft=W[tt.uniScaleKey];return tt.uniformScaling&&!ft||!tt.uniformScaling&&ft}function M(W){return W.originX===o&&W.originY===o}function N(W,z,tt){var ft=W.lockScalingX,at=W.lockScalingY;return!((!ft||!at)&&(z||!ft&&!at||!tt)&&(!ft||"x"!==z)&&(!at||"y"!==z))}function H(W,z,tt,ft){return{e:W,transform:z,pointer:{x:tt,y:ft}}}function nt(W){return function(z,tt,ft,at){var mt=tt.target,_t=mt.getCenterPoint(),G=mt.translateToOriginPoint(_t,tt.originX,tt.originY),bt=W(z,tt,ft,at);return mt.setPositionByOrigin(G,tt.originX,tt.originY),bt}}function st(W,z){return function(tt,ft,at,mt){var _t=z(tt,ft,at,mt);return _t&&w(W,H(tt,ft,at,mt)),_t}}function p(W,z,tt,ft,at){var mt=W.target,_t=mt.controls[W.corner],G=mt.canvas.getZoom(),bt=mt.padding/G,Ct=mt.toLocalPoint(new n.Point(ft,at),z,tt);return Ct.x>=bt&&(Ct.x-=bt),Ct.x<=-bt&&(Ct.x+=bt),Ct.y>=bt&&(Ct.y-=bt),Ct.y<=bt&&(Ct.y+=bt),Ct.x-=_t.offsetX,Ct.y-=_t.offsetY,Ct}function F(W){return W.flipX!==W.flipY}function V(W,z,tt,ft,at){if(0!==W[z]){var mt=at/W._getTransformedDimensions()[ft]*W[tt];W.set(tt,mt)}}function et(W,z,tt,ft){var at,mt=z.target,_t=mt._getTransformedDimensions(0,mt.skewY),G=p(z,z.originX,z.originY,tt,ft),bt=Math.abs(2*G.x)-_t.x,Ct=mt.skewX;bt<2?at=0:(at=m(Math.atan2(bt/mt.scaleX,_t.y/mt.scaleY)),z.originX===e&&z.originY===r&&(at=-at),z.originX===s&&z.originY===i&&(at=-at),F(mt)&&(at=-at));var Q=Ct!==at;if(Q){var St=mt._getTransformedDimensions().y;mt.set("skewX",at),V(mt,"skewY","scaleY","y",St)}return Q}function ot(W,z,tt,ft){var at,mt=z.target,_t=mt._getTransformedDimensions(mt.skewX,0),G=p(z,z.originX,z.originY,tt,ft),bt=Math.abs(2*G.y)-_t.y,Ct=mt.skewY;bt<2?at=0:(at=m(Math.atan2(bt/mt.scaleY,_t.x/mt.scaleX)),z.originX===e&&z.originY===r&&(at=-at),z.originX===s&&z.originY===i&&(at=-at),F(mt)&&(at=-at));var Q=Ct!==at;if(Q){var St=mt._getTransformedDimensions().x;mt.set("skewY",at),V(mt,"skewX","scaleX","x",St)}return Q}function ct(W,z,tt,ft,at){var mt,_t,G,bt,Ct,Q,St=z.target,Tt=St.lockScalingX,Lt=St.lockScalingY,Wt=(at=at||{}).by,Xt=E(W,St),we=N(St,Wt,Xt),ve=z.gestureScale;if(we)return!1;if(ve)_t=z.scaleX*ve,G=z.scaleY*ve;else{if(mt=p(z,z.originX,z.originY,tt,ft),Ct="y"!==Wt?b(mt.x):1,Q="x"!==Wt?b(mt.y):1,z.signX||(z.signX=Ct),z.signY||(z.signY=Q),St.lockScalingFlip&&(z.signX!==Ct||z.signY!==Q))return!1;if(bt=St._getTransformedDimensions(),Xt&&!Wt){var ne=Math.abs(mt.x)+Math.abs(mt.y),re=z.original,jt=ne/(Math.abs(bt.x*re.scaleX/St.scaleX)+Math.abs(bt.y*re.scaleY/St.scaleY));_t=re.scaleX*jt,G=re.scaleY*jt}else _t=Math.abs(mt.x*St.scaleX/bt.x),G=Math.abs(mt.y*St.scaleY/bt.y);M(z)&&(_t*=2,G*=2),z.signX!==Ct&&"y"!==Wt&&(z.originX=f[z.originX],_t*=-1,z.signX=Ct),z.signY!==Q&&"x"!==Wt&&(z.originY=f[z.originY],G*=-1,z.signY=Q)}var Fe=St.scaleX,Ft=St.scaleY;return Wt?("x"===Wt&&St.set("scaleX",_t),"y"===Wt&&St.set("scaleY",G)):(!Tt&&St.set("scaleX",_t),!Lt&&St.set("scaleY",G)),Fe!==St.scaleX||Ft!==St.scaleY}t.scaleCursorStyleHandler=function(W,z,tt){var ft=E(W,tt),at="";if(0!==z.x&&0===z.y?at="x":0===z.x&&0!==z.y&&(at="y"),N(tt,at,ft))return"not-allowed";var mt=C(tt,z);return a[mt]+"-resize"},t.skewCursorStyleHandler=function(W,z,tt){if(0!==z.x&&tt.lockSkewingY||0!==z.y&&tt.lockSkewingX)return"not-allowed";var at=C(tt,z)%4;return l[at]+"-resize"},t.scaleSkewCursorStyleHandler=function(W,z,tt){return W[tt.canvas.altActionKey]?t.skewCursorStyleHandler(W,z,tt):t.scaleCursorStyleHandler(W,z,tt)},t.rotationWithSnapping=st("rotating",nt(function(W,z,tt,ft){var at=z,mt=at.target,_t=mt.translateToOriginPoint(mt.getCenterPoint(),at.originX,at.originY);if(mt.lockRotation)return!1;var G,bt=Math.atan2(at.ey-_t.y,at.ex-_t.x),Ct=Math.atan2(ft-_t.y,tt-_t.x),Q=m(Ct-bt+at.theta);if(0<mt.snapAngle){var St=mt.snapAngle,Tt=mt.snapThreshold||St,Lt=Math.ceil(Q/St)*St,Wt=Math.floor(Q/St)*St;Math.abs(Q-Wt)<Tt?Q=Wt:Math.abs(Q-Lt)<Tt&&(Q=Lt)}return Q<0&&(Q=360+Q),G=mt.angle!==(Q%=360),mt.angle=Q,G})),t.scalingEqually=st("scaling",nt(function(W,z,tt,ft){return ct(W,z,tt,ft)})),t.scalingX=st("scaling",nt(function(W,z,tt,ft){return ct(W,z,tt,ft,{by:"x"})})),t.scalingY=st("scaling",nt(function(W,z,tt,ft){return ct(W,z,tt,ft,{by:"y"})})),t.scalingYOrSkewingX=function(W,z,tt,ft){return W[z.target.canvas.altActionKey]?t.skewHandlerX(W,z,tt,ft):t.scalingY(W,z,tt,ft)},t.scalingXOrSkewingY=function(W,z,tt,ft){return W[z.target.canvas.altActionKey]?t.skewHandlerY(W,z,tt,ft):t.scalingX(W,z,tt,ft)},t.changeWidth=st("resizing",nt(function(W,z,tt,ft){var at=z.target,mt=p(z,z.originX,z.originY,tt,ft),_t=at.strokeWidth/(at.strokeUniform?at.scaleX:1),G=M(z)?2:1,bt=at.width,Ct=Math.abs(mt.x*G/at.scaleX)-_t;return at.set("width",Math.max(Ct,0)),bt!==Ct})),t.skewHandlerX=function(W,z,tt,ft){var at,mt=z.target,_t=mt.skewX,G=z.originY;return!mt.lockSkewingX&&(0===_t?at=0<p(z,o,o,tt,ft).x?e:s:(0<_t&&(at=G===i?e:s),_t<0&&(at=G===i?s:e),F(mt)&&(at=at===e?s:e)),z.originX=at,st("skewing",nt(et))(W,z,tt,ft))},t.skewHandlerY=function(W,z,tt,ft){var at,mt=z.target,_t=mt.skewY,G=z.originX;return!mt.lockSkewingY&&(0===_t?at=0<p(z,o,o,tt,ft).y?i:r:(0<_t&&(at=G===e?i:r),_t<0&&(at=G===e?r:i),F(mt)&&(at=at===i?r:i)),z.originY=at,st("skewing",nt(ot))(W,z,tt,ft))},t.dragHandler=function(W,z,tt,ft){var at=z.target,mt=tt-z.offsetX,_t=ft-z.offsetY,G=!at.get("lockMovementX")&&at.left!==mt,bt=!at.get("lockMovementY")&&at.top!==_t;return G&&at.set("left",mt),bt&&at.set("top",_t),(G||bt)&&w("moving",H(W,z,tt,ft)),G||bt},t.scaleOrSkewActionName=function(W,z,tt){var ft=W[tt.canvas.altActionKey];return 0===z.x?ft?"skewX":"scaleY":0===z.y?ft?"skewY":"scaleX":void 0},t.rotationStyleHandler=function(W,z,tt){return tt.lockRotation?"not-allowed":z.cursorStyle},t.fireEvent=w,t.wrapWithFixedAnchor=nt,t.wrapWithFireEvent=st,t.getLocalPoint=p,n.controlsUtils=t}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.util.degreesToRadians,l=n.controlsUtils;l.renderCircleControl=function(t,e,i,s,r){s=s||{};var o,f=this.sizeX||s.cornerSize||r.cornerSize,m=this.sizeY||s.cornerSize||r.cornerSize,b=void 0!==s.transparentCorners?s.transparentCorners:r.transparentCorners,C=b?"stroke":"fill",w=!b&&(s.cornerStrokeColor||r.cornerStrokeColor),E=e,M=i;t.save(),t.fillStyle=s.cornerColor||r.cornerColor,t.strokeStyle=s.cornerStrokeColor||r.cornerStrokeColor,m<f?(o=f,t.scale(1,m/f),M=i*f/m):f<m?(o=m,t.scale(f/m,1),E=e*m/f):o=f,t.lineWidth=1,t.beginPath(),t.arc(E,M,o/2,0,2*Math.PI,!1),t[C](),w&&t.stroke(),t.restore()},l.renderSquareControl=function(t,e,i,s,r){s=s||{};var o=this.sizeX||s.cornerSize||r.cornerSize,f=this.sizeY||s.cornerSize||r.cornerSize,m=void 0!==s.transparentCorners?s.transparentCorners:r.transparentCorners,b=m?"stroke":"fill",C=!m&&(s.cornerStrokeColor||r.cornerStrokeColor),w=o/2,E=f/2;t.save(),t.fillStyle=s.cornerColor||r.cornerColor,t.strokeStyle=s.cornerStrokeColor||r.cornerStrokeColor,t.lineWidth=1,t.translate(e,i),t.rotate(a(r.angle)),t[b+"Rect"](-w,-E,o,f),C&&t.strokeRect(-w,-E,o,f),t.restore()}}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={});n.Control=function(a){for(var l in a)this[l]=a[l]},n.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(a,l){return l.cursorStyle},getActionName:function(a,l){return l.actionName},getVisibility:function(a,l){var t=a._controlsVisibility;return t&&void 0!==t[l]?t[l]:this.visible},setVisibility:function(a){this.visible=a},positionHandler:function(a,l){return n.util.transformPoint({x:this.x*a.x+this.offsetX,y:this.y*a.y+this.offsetY},l)},calcCornerCoords:function(a,l,t,e,i){var s,r,o,f,m=i?this.touchSizeX:this.sizeX,b=i?this.touchSizeY:this.sizeY;if(m&&b&&m!==b){var C=Math.atan2(b,m),w=Math.sqrt(m*m+b*b)/2,E=C-n.util.degreesToRadians(a),M=Math.PI/2-C-n.util.degreesToRadians(a);s=w*n.util.cos(E),r=w*n.util.sin(E),o=w*n.util.cos(M),f=w*n.util.sin(M)}else w=.7071067812*(m&&b?m:l),E=n.util.degreesToRadians(45-a),s=o=w*n.util.cos(E),r=f=w*n.util.sin(E);return{tl:{x:t-f,y:e-o},tr:{x:t+s,y:e-r},bl:{x:t-s,y:e+r},br:{x:t+f,y:e+o}}},render:function(a,l,t,e,i){"circle"===((e=e||{}).cornerStyle||i.cornerStyle)?n.controlsUtils.renderCircleControl.call(this,a,l,t,e,i):n.controlsUtils.renderSquareControl.call(this,a,l,t,e,i)}}}(typeof exports<"u"?exports:this),function(){function h(a,l){var t,e,i,s,r=a.getAttribute("style"),o=a.getAttribute("offset")||0;if(o=(o=parseFloat(o)/(/%$/.test(o)?100:1))<0?0:1<o?1:o,r){var f=r.split(/\s*;\s*/);for(""===f[f.length-1]&&f.pop(),s=f.length;s--;){var m=f[s].split(/\s*:\s*/),b=m[0].trim(),C=m[1].trim();"stop-color"===b?t=C:"stop-opacity"===b&&(i=C)}}return t||(t=a.getAttribute("stop-color")||"rgb(0,0,0)"),i||(i=a.getAttribute("stop-opacity")),e=(t=new fabric.Color(t)).getAlpha(),i=isNaN(parseFloat(i))?1:parseFloat(i),i*=e*l,{offset:o,color:t.toRgb(),opacity:i}}var n=fabric.util.object.clone;fabric.Gradient=fabric.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(a){a||(a={}),a.coords||(a.coords={});var l,t=this;Object.keys(a).forEach(function(e){t[e]=a[e]}),this.id?this.id+="_"+fabric.Object.__uid++:this.id=fabric.Object.__uid++,l={x1:a.coords.x1||0,y1:a.coords.y1||0,x2:a.coords.x2||0,y2:a.coords.y2||0},"radial"===this.type&&(l.r1=a.coords.r1||0,l.r2=a.coords.r2||0),this.coords=l,this.colorStops=a.colorStops.slice()},addColorStop:function(a){for(var l in a){var t=new fabric.Color(a[l]);this.colorStops.push({offset:parseFloat(l),color:t.toRgb(),opacity:t.getAlpha()})}return this},toObject:function(a){var l={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return fabric.util.populateWithProperties(this,l,a),l},toSVG:function(a,l){var t,e,i,s,r=n(this.coords,!0),o=(l=l||{},n(this.colorStops,!0)),f=r.r1>r.r2,m=this.gradientTransform?this.gradientTransform.concat():fabric.iMatrix.concat(),b=-this.offsetX,C=-this.offsetY,w=!!l.additionalTransform,E="pixels"===this.gradientUnits?"userSpaceOnUse":"objectBoundingBox";if(o.sort(function(nt,st){return nt.offset-st.offset}),"objectBoundingBox"===E?(b/=a.width,C/=a.height):(b+=a.width/2,C+=a.height/2),"path"===a.type&&"percentage"!==this.gradientUnits&&(b-=a.pathOffset.x,C-=a.pathOffset.y),m[4]-=b,m[5]-=C,s='id="SVGID_'+this.id+'" gradientUnits="'+E+'"',s+=' gradientTransform="'+(w?l.additionalTransform+" ":"")+fabric.util.matrixToSVG(m)+'" ',"linear"===this.type?i=["<linearGradient ",s,' x1="',r.x1,'" y1="',r.y1,'" x2="',r.x2,'" y2="',r.y2,'">\n']:"radial"===this.type&&(i=["<radialGradient ",s,' cx="',f?r.x1:r.x2,'" cy="',f?r.y1:r.y2,'" r="',f?r.r1:r.r2,'" fx="',f?r.x2:r.x1,'" fy="',f?r.y2:r.y1,'">\n']),"radial"===this.type){if(f)for((o=o.concat()).reverse(),t=0,e=o.length;t<e;t++)o[t].offset=1-o[t].offset;var M=Math.min(r.r1,r.r2);if(0<M){var N=M/Math.max(r.r1,r.r2);for(t=0,e=o.length;t<e;t++)o[t].offset+=N*(1-o[t].offset)}}for(t=0,e=o.length;t<e;t++){var H=o[t];i.push("<stop ",'offset="',100*H.offset+"%",'" style="stop-color:',H.color,void 0!==H.opacity?";stop-opacity: "+H.opacity:";",'"/>\n')}return i.push("linear"===this.type?"</linearGradient>\n":"</radialGradient>\n"),i.join("")},toLive:function(a){var l,t,e,i=fabric.util.object.clone(this.coords);if(this.type){for("linear"===this.type?l=a.createLinearGradient(i.x1,i.y1,i.x2,i.y2):"radial"===this.type&&(l=a.createRadialGradient(i.x1,i.y1,i.r1,i.x2,i.y2,i.r2)),t=0,e=this.colorStops.length;t<e;t++){var s=this.colorStops[t].color,r=this.colorStops[t].opacity,o=this.colorStops[t].offset;void 0!==r&&(s=new fabric.Color(s).setAlpha(r).toRgba()),l.addColorStop(o,s)}return l}}}),fabric.util.object.extend(fabric.Gradient,{fromElement:function(a,l,t,e){var i=parseFloat(t)/(/%$/.test(t)?100:1);i=i<0?0:1<i?1:i,isNaN(i)&&(i=1);var s,r,o,f,m,b,C,w,E,M,N,H=a.getElementsByTagName("stop"),nt="userSpaceOnUse"===a.getAttribute("gradientUnits")?"pixels":"percentage",st=a.getAttribute("gradientTransform")||"",p=[],F=0,V=0;for("linearGradient"===a.nodeName||"LINEARGRADIENT"===a.nodeName?(s="linear",r={x1:(b=a).getAttribute("x1")||0,y1:b.getAttribute("y1")||0,x2:b.getAttribute("x2")||"100%",y2:b.getAttribute("y2")||0}):(s="radial",r={x1:(m=a).getAttribute("fx")||m.getAttribute("cx")||"50%",y1:m.getAttribute("fy")||m.getAttribute("cy")||"50%",r1:0,x2:m.getAttribute("cx")||"50%",y2:m.getAttribute("cy")||"50%",r2:m.getAttribute("r")||"50%"}),o=H.length;o--;)p.push(h(H[o],i));return f=fabric.parseTransformAttribute(st),C=r,w=e,E=nt,Object.keys(C).forEach(function(et){"Infinity"===(M=C[et])?N=1:"-Infinity"===M?N=0:(N=parseFloat(C[et],10),"string"==typeof M&&/^(\d+\.\d+)%|(\d+)%$/.test(M)&&(N*=.01,"pixels"===E&&("x1"!==et&&"x2"!==et&&"r2"!==et||(N*=w.viewBoxWidth||w.width),"y1"!==et&&"y2"!==et||(N*=w.viewBoxHeight||w.height)))),C[et]=N}),"pixels"===nt&&(F=-l.left,V=-l.top),new fabric.Gradient({id:a.getAttribute("id"),type:s,coords:r,colorStops:p,gradientUnits:nt,gradientTransform:f,offsetX:F,offsetY:V})}})}(),function(){"use strict";var h=fabric.util.toFixed;fabric.Pattern=fabric.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(n,a){if(n||(n={}),this.id=fabric.Object.__uid++,this.setOptions(n),!n.source||n.source&&"string"!=typeof n.source)a&&a(this);else{var l=this;this.source=fabric.util.createImage(),fabric.util.loadImage(n.source,function(t,e){l.source=t,a&&a(l,e)},null,this.crossOrigin)}},toObject:function(n){var a,l,t=fabric.Object.NUM_FRACTION_DIGITS;return"string"==typeof this.source.src?a=this.source.src:"object"==typeof this.source&&this.source.toDataURL&&(a=this.source.toDataURL()),l={type:"pattern",source:a,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:h(this.offsetX,t),offsetY:h(this.offsetY,t),patternTransform:this.patternTransform?this.patternTransform.concat():null},fabric.util.populateWithProperties(this,l,n),l},toSVG:function(n){var a="function"==typeof this.source?this.source():this.source,l=a.width/n.width,t=a.height/n.height,e=this.offsetX/n.width,i=this.offsetY/n.height,s="";return"repeat-x"!==this.repeat&&"no-repeat"!==this.repeat||(t=1,i&&(t+=Math.abs(i))),"repeat-y"!==this.repeat&&"no-repeat"!==this.repeat||(l=1,e&&(l+=Math.abs(e))),a.src?s=a.src:a.toDataURL&&(s=a.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+e+'" y="'+i+'" width="'+l+'" height="'+t+'">\n<image x="0" y="0" width="'+a.width+'" height="'+a.height+'" xlink:href="'+s+'"></image>\n</pattern>\n'},setOptions:function(n){for(var a in n)this[a]=n[a]},toLive:function(n){var a=this.source;return a&&(void 0===a.src||a.complete&&0!==a.naturalWidth&&0!==a.naturalHeight)?n.createPattern(a,this.repeat):""}})}(),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.util.toFixed;n.Shadow?n.warn("fabric.Shadow is already defined."):(n.Shadow=n.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(l){for(var t in"string"==typeof l&&(l=this._parseShadow(l)),l)this[t]=l[t];this.id=n.Object.__uid++},_parseShadow:function(l){var t=l.trim(),e=n.Shadow.reOffsetsAndBlur.exec(t)||[];return{color:(t.replace(n.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)").trim(),offsetX:parseFloat(e[1],10)||0,offsetY:parseFloat(e[2],10)||0,blur:parseFloat(e[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(l){var t=40,e=40,i=n.Object.NUM_FRACTION_DIGITS,s=n.util.rotateVector({x:this.offsetX,y:this.offsetY},n.util.degreesToRadians(-l.angle)),r=new n.Color(this.color);return l.width&&l.height&&(t=100*a((Math.abs(s.x)+this.blur)/l.width,i)+20,e=100*a((Math.abs(s.y)+this.blur)/l.height,i)+20),l.flipX&&(s.x*=-1),l.flipY&&(s.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+e+'%" height="'+(100+2*e)+'%" x="-'+t+'%" width="'+(100+2*t)+'%" >\n\t<feGaussianBlur in="SourceAlpha" stdDeviation="'+a(this.blur?this.blur/2:0,i)+'"></feGaussianBlur>\n\t<feOffset dx="'+a(s.x,i)+'" dy="'+a(s.y,i)+'" result="oBlur" ></feOffset>\n\t<feFlood flood-color="'+r.toRgb()+'" flood-opacity="'+r.getAlpha()+'"/>\n\t<feComposite in2="oBlur" operator="in" />\n\t<feMerge>\n\t\t<feMergeNode></feMergeNode>\n\t\t<feMergeNode in="SourceGraphic"></feMergeNode>\n\t</feMerge>\n</filter>\n'},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var l={},t=n.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(e){this[e]!==t[e]&&(l[e]=this[e])},this),l}}),n.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/)}(typeof exports<"u"?exports:this),function(){"use strict";if(fabric.StaticCanvas)fabric.warn("fabric.StaticCanvas is already defined.");else{var h=fabric.util.object.extend,n=fabric.util.getElementOffset,a=fabric.util.removeFromArray,l=fabric.util.toFixed,t=fabric.util.transformPoint,e=fabric.util.invertTransform,i=fabric.util.getNodeCanvas,s=fabric.util.createCanvasElement,r=new Error("Could not initialize `canvas` element");fabric.StaticCanvas=fabric.util.createClass(fabric.CommonMethods,{initialize:function(o,f){f||(f={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(o,f)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:fabric.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(o,f){var m=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(o),this._initOptions(f),this.interactive||this._initRetinaScaling(),f.overlayImage&&this.setOverlayImage(f.overlayImage,m),f.backgroundImage&&this.setBackgroundImage(f.backgroundImage,m),f.backgroundColor&&this.setBackgroundColor(f.backgroundColor,m),f.overlayColor&&this.setOverlayColor(f.overlayColor,m),this.calcOffset()},_isRetinaScaling:function(){return 1<fabric.devicePixelRatio&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,fabric.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var o=fabric.devicePixelRatio;this.__initRetinaScaling(o,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(o,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(o,f,m){f.setAttribute("width",this.width*o),f.setAttribute("height",this.height*o),m.scale(o,o)},calcOffset:function(){return this._offset=n(this.lowerCanvasEl),this},setOverlayImage:function(o,f,m){return this.__setBgOverlayImage("overlayImage",o,f,m)},setBackgroundImage:function(o,f,m){return this.__setBgOverlayImage("backgroundImage",o,f,m)},setOverlayColor:function(o,f){return this.__setBgOverlayColor("overlayColor",o,f)},setBackgroundColor:function(o,f){return this.__setBgOverlayColor("backgroundColor",o,f)},__setBgOverlayImage:function(o,f,m,b){return"string"==typeof f?fabric.util.loadImage(f,function(C,w){if(C){var E=new fabric.Image(C,b);(this[o]=E).canvas=this}m&&m(C,w)},this,b&&b.crossOrigin):(b&&f.setOptions(b),(this[o]=f)&&(f.canvas=this),m&&m(f,!1)),this},__setBgOverlayColor:function(o,f,m){return this[o]=f,this._initGradient(f,o),this._initPattern(f,o,m),this},_createCanvasElement:function(){var o=s();if(!o||(o.style||(o.style={}),void 0===o.getContext))throw r;return o},_initOptions:function(o){var f=this.lowerCanvasEl;this._setOptions(o),this.width=this.width||parseInt(f.width,10)||0,this.height=this.height||parseInt(f.height,10)||0,this.lowerCanvasEl.style&&(f.width=this.width,f.height=this.height,f.style.width=this.width+"px",f.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(o){this.lowerCanvasEl=o&&o.getContext?o:fabric.util.getById(o)||this._createCanvasElement(),fabric.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(o,f){return this.setDimensions({width:o},f)},setHeight:function(o,f){return this.setDimensions({height:o},f)},setDimensions:function(o,f){var m;for(var b in f=f||{},o)m=o[b],f.cssOnly||(this._setBackstoreDimension(b,o[b]),m+="px",this.hasLostContext=!0),f.backstoreOnly||this._setCssDimension(b,m);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),f.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(o,f){return this.lowerCanvasEl[o]=f,this.upperCanvasEl&&(this.upperCanvasEl[o]=f),this.cacheCanvasEl&&(this.cacheCanvasEl[o]=f),this[o]=f,this},_setCssDimension:function(o,f){return this.lowerCanvasEl.style[o]=f,this.upperCanvasEl&&(this.upperCanvasEl.style[o]=f),this.wrapperEl&&(this.wrapperEl.style[o]=f),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(o){var f,m,b,C=this._activeObject,w=this.backgroundImage,E=this.overlayImage;for(this.viewportTransform=o,m=0,b=this._objects.length;m<b;m++)(f=this._objects[m]).group||f.setCoords(!0);return C&&C.setCoords(),w&&w.setCoords(!0),E&&E.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(o,f){var m=o,b=this.viewportTransform.slice(0);o=t(o,e(this.viewportTransform)),b[0]=f,b[3]=f;var C=t(o,b);return b[4]+=m.x-C.x,b[5]+=m.y-C.y,this.setViewportTransform(b)},setZoom:function(o){return this.zoomToPoint(new fabric.Point(0,0),o),this},absolutePan:function(o){var f=this.viewportTransform.slice(0);return f[4]=-o.x,f[5]=-o.y,this.setViewportTransform(f)},relativePan:function(o){return this.absolutePan(new fabric.Point(-o.x-this.viewportTransform[4],-o.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(o){this.stateful&&o.setupState(),o._set("canvas",this),o.setCoords(),this.fire("object:added",{target:o}),o.fire("added")},_onObjectRemoved:function(o){this.fire("object:removed",{target:o}),o.fire("removed"),delete o.canvas},clearContext:function(o){return o.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){return this.renderCanvas(this.contextContainer,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=fabric.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var o={},f=this.width,m=this.height,b=e(this.viewportTransform);return o.tl=t({x:0,y:0},b),o.br=t({x:f,y:m},b),o.tr=new fabric.Point(o.br.x,o.tl.y),o.bl=new fabric.Point(o.tl.x,o.br.y),this.vptCoords=o},cancelRequestedRender:function(){this.isRendering&&(fabric.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(o,f){var m=this.viewportTransform,b=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(o),fabric.util.setImageSmoothing(o,this.imageSmoothingEnabled),this.fire("before:render",{ctx:o}),this._renderBackground(o),o.save(),o.transform(m[0],m[1],m[2],m[3],m[4],m[5]),this._renderObjects(o,f),o.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(o),b&&(b.canvas=this,b.shouldCache(),b._transformDone=!0,b.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(o)),this._renderOverlay(o),this.controlsAboveOverlay&&this.interactive&&this.drawControls(o),this.fire("after:render",{ctx:o})},drawClipPathOnCanvas:function(o){var f=this.viewportTransform,m=this.clipPath;o.save(),o.transform(f[0],f[1],f[2],f[3],f[4],f[5]),o.globalCompositeOperation="destination-in",m.transform(o),o.scale(1/m.zoomX,1/m.zoomY),o.drawImage(m._cacheCanvas,-m.cacheTranslationX,-m.cacheTranslationY),o.restore()},_renderObjects:function(o,f){var m,b;for(m=0,b=f.length;m<b;++m)f[m]&&f[m].render(o)},_renderBackgroundOrOverlay:function(o,f){var m=this[f+"Color"],b=this[f+"Image"],C=this.viewportTransform,w=this[f+"Vpt"];if(m||b){if(m){o.save(),o.beginPath(),o.moveTo(0,0),o.lineTo(this.width,0),o.lineTo(this.width,this.height),o.lineTo(0,this.height),o.closePath(),o.fillStyle=m.toLive?m.toLive(o,this):m,w&&o.transform(C[0],C[1],C[2],C[3],C[4],C[5]),o.transform(1,0,0,1,m.offsetX||0,m.offsetY||0);var E=m.gradientTransform||m.patternTransform;E&&o.transform(E[0],E[1],E[2],E[3],E[4],E[5]),o.fill(),o.restore()}b&&(o.save(),w&&o.transform(C[0],C[1],C[2],C[3],C[4],C[5]),b.render(o),o.restore())}},_renderBackground:function(o){this._renderBackgroundOrOverlay(o,"background")},_renderOverlay:function(o){this._renderBackgroundOrOverlay(o,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new fabric.Point(this.width/2,this.height/2)},centerObjectH:function(o){return this._centerObject(o,new fabric.Point(this.getCenterPoint().x,o.getCenterPoint().y))},centerObjectV:function(o){return this._centerObject(o,new fabric.Point(o.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(o){var f=this.getCenterPoint();return this._centerObject(o,f)},viewportCenterObject:function(o){var f=this.getVpCenter();return this._centerObject(o,f)},viewportCenterObjectH:function(o){var f=this.getVpCenter();return this._centerObject(o,new fabric.Point(f.x,o.getCenterPoint().y)),this},viewportCenterObjectV:function(o){var f=this.getVpCenter();return this._centerObject(o,new fabric.Point(o.getCenterPoint().x,f.y))},getVpCenter:function(){var o=this.getCenterPoint(),f=e(this.viewportTransform);return t(o,f)},_centerObject:function(o,f){return o.setPositionByOrigin(f,"center","center"),o.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(o){return this.toDatalessObject(o)},toObject:function(o){return this._toObjectMethod("toObject",o)},toDatalessObject:function(o){return this._toObjectMethod("toDatalessObject",o)},_toObjectMethod:function(o,f){var m=this.clipPath,b={version:fabric.version,objects:this._toObjects(o,f)};return m&&!m.excludeFromExport&&(b.clipPath=this._toObject(this.clipPath,o,f)),h(b,this.__serializeBgOverlay(o,f)),fabric.util.populateWithProperties(this,b,f),b},_toObjects:function(o,f){return this._objects.filter(function(m){return!m.excludeFromExport}).map(function(m){return this._toObject(m,o,f)},this)},_toObject:function(o,f,m){var b;this.includeDefaultValues||(b=o.includeDefaultValues,o.includeDefaultValues=!1);var C=o[f](m);return this.includeDefaultValues||(o.includeDefaultValues=b),C},__serializeBgOverlay:function(o,f){var m={},b=this.backgroundImage,C=this.overlayImage,w=this.backgroundColor,E=this.overlayColor;return w&&w.toObject?w.excludeFromExport||(m.background=w.toObject(f)):w&&(m.background=w),E&&E.toObject?E.excludeFromExport||(m.overlay=E.toObject(f)):E&&(m.overlay=E),b&&!b.excludeFromExport&&(m.backgroundImage=this._toObject(b,o,f)),C&&!C.excludeFromExport&&(m.overlayImage=this._toObject(C,o,f)),m},svgViewportTransformation:!0,toSVG:function(o,f){o||(o={}),o.reviver=f;var m=[];return this._setSVGPreamble(m,o),this._setSVGHeader(m,o),this.clipPath&&m.push('<g clip-path="url(#'+this.clipPath.clipPathId+')" >\n'),this._setSVGBgOverlayColor(m,"background"),this._setSVGBgOverlayImage(m,"backgroundImage",f),this._setSVGObjects(m,f),this.clipPath&&m.push("</g>\n"),this._setSVGBgOverlayColor(m,"overlay"),this._setSVGBgOverlayImage(m,"overlayImage",f),m.push("</svg>"),m.join("")},_setSVGPreamble:function(o,f){f.suppressPreamble||o.push('<?xml version="1.0" encoding="',f.encoding||"UTF-8",'" standalone="no" ?>\n','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')},_setSVGHeader:function(o,f){var m,b=f.width||this.width,C=f.height||this.height,w='viewBox="0 0 '+this.width+" "+this.height+'" ',E=fabric.Object.NUM_FRACTION_DIGITS;f.viewBox?w='viewBox="'+f.viewBox.x+" "+f.viewBox.y+" "+f.viewBox.width+" "+f.viewBox.height+'" ':this.svgViewportTransformation&&(w='viewBox="'+l(-(m=this.viewportTransform)[4]/m[0],E)+" "+l(-m[5]/m[3],E)+" "+l(this.width/m[0],E)+" "+l(this.height/m[3],E)+'" '),o.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',b,'" ','height="',C,'" ',w,'xml:space="preserve">\n',"<desc>Created with Fabric.js ",fabric.version,"</desc>\n","<defs>\n",this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(f),"</defs>\n")},createSVGClipPathMarkup:function(o){var f=this.clipPath;return f?(f.clipPathId="CLIPPATH_"+fabric.Object.__uid++,'<clipPath id="'+f.clipPathId+'" >\n'+this.clipPath.toClipPathSVG(o.reviver)+"</clipPath>\n"):""},createSVGRefElementsMarkup:function(){var o=this;return["background","overlay"].map(function(f){var m=o[f+"Color"];if(m&&m.toLive){var b=o[f+"Vpt"],C=o.viewportTransform;return m.toSVG({width:o.width/(b?C[0]:1),height:o.height/(b?C[3]:1)},{additionalTransform:b?fabric.util.matrixToSVG(C):""})}}).join("")},createSVGFontFacesMarkup:function(){var o,f,m,b,C,w,E,M,N="",H={},nt=fabric.fontPaths,st=[];for(this._objects.forEach(function F(V){st.push(V),V._objects&&V._objects.forEach(F)}),E=0,M=st.length;E<M;E++)if(f=(o=st[E]).fontFamily,-1!==o.type.indexOf("text")&&!H[f]&&nt[f]&&(H[f]=!0,o.styles))for(C in m=o.styles)for(w in b=m[C])!H[f=b[w].fontFamily]&&nt[f]&&(H[f]=!0);for(var p in H)N+=["\t\t@font-face {\n","\t\t\tfont-family: '",p,"';\n","\t\t\tsrc: url('",nt[p],"');\n","\t\t}\n"].join("");return N&&(N=['\t<style type="text/css">',"<![CDATA[\n",N,"]]>","</style>\n"].join("")),N},_setSVGObjects:function(o,f){var m,b,C,w=this._objects;for(b=0,C=w.length;b<C;b++)(m=w[b]).excludeFromExport||this._setSVGObject(o,m,f)},_setSVGObject:function(o,f,m){o.push(f.toSVG(m))},_setSVGBgOverlayImage:function(o,f,m){this[f]&&!this[f].excludeFromExport&&this[f].toSVG&&o.push(this[f].toSVG(m))},_setSVGBgOverlayColor:function(o,f){var m=this[f+"Color"],C=this.width,w=this.height;if(m)if(m.toLive){var E=m.repeat,M=fabric.util.invertTransform(this.viewportTransform),N=this[f+"Vpt"]?fabric.util.matrixToSVG(M):"";o.push('<rect transform="'+N+" translate(",C/2,",",w/2,')"',' x="',m.offsetX-C/2,'" y="',m.offsetY-w/2,'" ','width="',"repeat-y"===E||"no-repeat"===E?m.source.width:C,'" height="',"repeat-x"===E||"no-repeat"===E?m.source.height:w,'" fill="url(#SVGID_'+m.id+')"',"></rect>\n")}else o.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',m,'"',"></rect>\n")},sendToBack:function(o){if(!o)return this;var f,m,b,C=this._activeObject;if(o===C&&"activeSelection"===o.type)for(f=(b=C._objects).length;f--;)a(this._objects,m=b[f]),this._objects.unshift(m);else a(this._objects,o),this._objects.unshift(o);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(o){if(!o)return this;var f,m,b,C=this._activeObject;if(o===C&&"activeSelection"===o.type)for(b=C._objects,f=0;f<b.length;f++)a(this._objects,m=b[f]),this._objects.push(m);else a(this._objects,o),this._objects.push(o);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(o,f){if(!o)return this;var m,b,C,w,E,M=this._activeObject,N=0;if(o===M&&"activeSelection"===o.type)for(E=M._objects,m=0;m<E.length;m++)0+N<(C=this._objects.indexOf(b=E[m]))&&(w=C-1,a(this._objects,b),this._objects.splice(w,0,b)),N++;else 0!==(C=this._objects.indexOf(o))&&(w=this._findNewLowerIndex(o,C,f),a(this._objects,o),this._objects.splice(w,0,o));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(o,f,m){var b,C;if(m){for(C=(b=f)-1;0<=C;--C)if(o.intersectsWithObject(this._objects[C])||o.isContainedWithinObject(this._objects[C])||this._objects[C].isContainedWithinObject(o)){b=C;break}}else b=f-1;return b},bringForward:function(o,f){if(!o)return this;var m,b,C,w,E,M=this._activeObject,N=0;if(o===M&&"activeSelection"===o.type)for(m=(E=M._objects).length;m--;)(C=this._objects.indexOf(b=E[m]))<this._objects.length-1-N&&(w=C+1,a(this._objects,b),this._objects.splice(w,0,b)),N++;else(C=this._objects.indexOf(o))!==this._objects.length-1&&(w=this._findNewUpperIndex(o,C,f),a(this._objects,o),this._objects.splice(w,0,o));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(o,f,m){var b,C,w;if(m){for(C=(b=f)+1,w=this._objects.length;C<w;++C)if(o.intersectsWithObject(this._objects[C])||o.isContainedWithinObject(this._objects[C])||this._objects[C].isContainedWithinObject(o)){b=C;break}}else b=f+1;return b},moveTo:function(o,f){return a(this._objects,o),this._objects.splice(f,0,o),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(fabric.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(o){o.dispose&&o.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),fabric.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),fabric.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),h(fabric.StaticCanvas.prototype,fabric.Observable),h(fabric.StaticCanvas.prototype,fabric.Collection),h(fabric.StaticCanvas.prototype,fabric.DataURLExporter),h(fabric.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(o){var f=s();if(!f||!f.getContext)return null;var m=f.getContext("2d");return m&&"setLineDash"===o?void 0!==m.setLineDash:null}}),fabric.StaticCanvas.prototype.toJSON=fabric.StaticCanvas.prototype.toObject,fabric.isLikelyNode&&(fabric.StaticCanvas.prototype.createPNGStream=function(){var o=i(this.lowerCanvasEl);return o&&o.createPNGStream()},fabric.StaticCanvas.prototype.createJPEGStream=function(o){var f=i(this.lowerCanvasEl);return f&&f.createJPEGStream(o)})}}(),fabric.BaseBrush=fabric.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(h){h.strokeStyle=this.color,h.lineWidth=this.width,h.lineCap=this.strokeLineCap,h.miterLimit=this.strokeMiterLimit,h.lineJoin=this.strokeLineJoin,h.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(h){var n=this.canvas.viewportTransform;h.save(),h.transform(n[0],n[1],n[2],n[3],n[4],n[5])},_setShadow:function(){if(this.shadow){var h=this.canvas,n=this.shadow,a=h.contextTop,l=h.getZoom();h&&h._isRetinaScaling()&&(l*=fabric.devicePixelRatio),a.shadowColor=n.color,a.shadowBlur=n.blur*l,a.shadowOffsetX=n.offsetX*l,a.shadowOffsetY=n.offsetY*l}},needsFullRender:function(){return new fabric.Color(this.color).getAlpha()<1||!!this.shadow},_resetShadow:function(){var h=this.canvas.contextTop;h.shadowColor="",h.shadowBlur=h.shadowOffsetX=h.shadowOffsetY=0},_isOutSideCanvas:function(h){return h.x<0||h.x>this.canvas.getWidth()||h.y<0||h.y>this.canvas.getHeight()}}),fabric.PencilBrush=fabric.util.createClass(fabric.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(h){this.canvas=h,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(h,n,a){var l=n.midPointFrom(a);return h.quadraticCurveTo(n.x,n.y,l.x,l.y),l},onMouseDown:function(h,n){this.canvas._isMainEvent(n.e)&&(this.drawStraightLine=n.e[this.straightLineKey],this._prepareForDrawing(h),this._captureDrawingPath(h),this._render())},onMouseMove:function(h,n){if(this.canvas._isMainEvent(n.e)&&(this.drawStraightLine=n.e[this.straightLineKey],(!0!==this.limitedToCanvasSize||!this._isOutSideCanvas(h))&&this._captureDrawingPath(h)&&1<this._points.length))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var a=this._points,l=a.length,t=this.canvas.contextTop;this._saveAndTransform(t),this.oldEnd&&(t.beginPath(),t.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(t,a[l-2],a[l-1],!0),t.stroke(),t.restore()}},onMouseUp:function(h){return!this.canvas._isMainEvent(h.e)||(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1)},_prepareForDrawing:function(h){var n=new fabric.Point(h.x,h.y);this._reset(),this._addPoint(n),this.canvas.contextTop.moveTo(n.x,n.y)},_addPoint:function(h){return!(1<this._points.length&&h.eq(this._points[this._points.length-1])||(this.drawStraightLine&&1<this._points.length&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(h),0))},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(h){var n=new fabric.Point(h.x,h.y);return this._addPoint(n)},_render:function(h){var n,a,l=this._points[0],t=this._points[1];if(this._saveAndTransform(h=h||this.canvas.contextTop),h.beginPath(),2===this._points.length&&l.x===t.x&&l.y===t.y){var e=this.width/1e3;l=new fabric.Point(l.x,l.y),t=new fabric.Point(t.x,t.y),l.x-=e,t.x+=e}for(h.moveTo(l.x,l.y),n=1,a=this._points.length;n<a;n++)this._drawSegment(h,l,t),l=this._points[n],t=this._points[n+1];h.lineTo(l.x,l.y),h.stroke(),h.restore()},convertPointsToSVGPath:function(h){return fabric.util.getSmoothPathFromPoints(h,this.width/1e3)},_isEmptySVGPath:function(h){return"M 0 0 Q 0 0 0 0 L 0 0"===fabric.util.joinPath(h)},createPath:function(h){var n=new fabric.Path(h,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,n.shadow=new fabric.Shadow(this.shadow)),n},decimatePoints:function(h,n){if(h.length<=2)return h;var a,l=this.canvas.getZoom(),t=Math.pow(n/l,2),e=h.length-1,i=h[0],s=[i];for(a=1;a<e-1;a++)t<=Math.pow(i.x-h[a].x,2)+Math.pow(i.y-h[a].y,2)&&s.push(i=h[a]);return s.push(h[e]),s},_finalizeAndAddPath:function(){this.canvas.contextTop.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var h=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(h))this.canvas.requestRenderAll();else{var n=this.createPath(h);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:n}),this.canvas.add(n),this.canvas.requestRenderAll(),n.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:n})}}}),fabric.CircleBrush=fabric.util.createClass(fabric.BaseBrush,{width:10,initialize:function(h){this.canvas=h,this.points=[]},drawDot:function(h){var n=this.addPoint(h),a=this.canvas.contextTop;this._saveAndTransform(a),this.dot(a,n),a.restore()},dot:function(h,n){h.fillStyle=n.fill,h.beginPath(),h.arc(n.x,n.y,n.radius,0,2*Math.PI,!1),h.closePath(),h.fill()},onMouseDown:function(h){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(h)},_render:function(){var h,n,a=this.canvas.contextTop,l=this.points;for(this._saveAndTransform(a),h=0,n=l.length;h<n;h++)this.dot(a,l[h]);a.restore()},onMouseMove:function(h){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(h)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(h),this._render()):this.drawDot(h))},onMouseUp:function(){var h,n,a=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;var l=[];for(h=0,n=this.points.length;h<n;h++){var t=this.points[h],e=new fabric.Circle({radius:t.radius,left:t.x,top:t.y,originX:"center",originY:"center",fill:t.fill});this.shadow&&(e.shadow=new fabric.Shadow(this.shadow)),l.push(e)}var i=new fabric.Group(l);i.canvas=this.canvas,this.canvas.fire("before:path:created",{path:i}),this.canvas.add(i),this.canvas.fire("path:created",{path:i}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=a,this.canvas.requestRenderAll()},addPoint:function(h){var n=new fabric.Point(h.x,h.y),a=fabric.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,l=new fabric.Color(this.color).setAlpha(fabric.util.getRandomInt(0,100)/100).toRgba();return n.radius=a,n.fill=l,this.points.push(n),n}}),fabric.SprayBrush=fabric.util.createClass(fabric.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(h){this.canvas=h,this.sprayChunks=[]},onMouseDown:function(h){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(h),this.render(this.sprayChunkPoints)},onMouseMove:function(h){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(h)||(this.addSprayChunk(h),this.render(this.sprayChunkPoints))},onMouseUp:function(){var h=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var n=[],a=0,l=this.sprayChunks.length;a<l;a++)for(var t=this.sprayChunks[a],e=0,i=t.length;e<i;e++){var s=new fabric.Rect({width:t[e].width,height:t[e].width,left:t[e].x+1,top:t[e].y+1,originX:"center",originY:"center",fill:this.color});n.push(s)}this.optimizeOverlapping&&(n=this._getOptimizedRects(n));var r=new fabric.Group(n);this.shadow&&r.set("shadow",new fabric.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:r}),this.canvas.add(r),this.canvas.fire("path:created",{path:r}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=h,this.canvas.requestRenderAll()},_getOptimizedRects:function(h){var n,a,l,t={};for(a=0,l=h.length;a<l;a++)t[n=h[a].left+""+h[a].top]||(t[n]=h[a]);var e=[];for(n in t)e.push(t[n]);return e},render:function(h){var n,a,l=this.canvas.contextTop;for(l.fillStyle=this.color,this._saveAndTransform(l),n=0,a=h.length;n<a;n++){var t=h[n];void 0!==t.opacity&&(l.globalAlpha=t.opacity),l.fillRect(t.x,t.y,t.width,t.width)}l.restore()},_render:function(){var h,n,a=this.canvas.contextTop;for(a.fillStyle=this.color,this._saveAndTransform(a),h=0,n=this.sprayChunks.length;h<n;h++)this.render(this.sprayChunks[h]);a.restore()},addSprayChunk:function(h){this.sprayChunkPoints=[];var n,a,l,t,e=this.width/2;for(t=0;t<this.density;t++){n=fabric.util.getRandomInt(h.x-e,h.x+e),a=fabric.util.getRandomInt(h.y-e,h.y+e),l=this.dotWidthVariance?fabric.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth;var i=new fabric.Point(n,a);i.width=l,this.randomOpacity&&(i.opacity=fabric.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(i)}this.sprayChunks.push(this.sprayChunkPoints)}}),fabric.PatternBrush=fabric.util.createClass(fabric.PencilBrush,{getPatternSrc:function(){var h=fabric.util.createCanvasElement(),n=h.getContext("2d");return h.width=h.height=25,n.fillStyle=this.color,n.beginPath(),n.arc(10,10,10,0,2*Math.PI,!1),n.closePath(),n.fill(),h},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(h){return h.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(h){this.callSuper("_setBrushStyles",h),h.strokeStyle=this.getPattern(h)},createPath:function(h){var n=this.callSuper("createPath",h),a=n._getLeftTopCoords().scalarAdd(n.strokeWidth/2);return n.stroke=new fabric.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-a.x,offsetY:-a.y}),n}}),function(){var h=fabric.util.getPointer,n=fabric.util.degreesToRadians,a=fabric.util.isTouchEvent;for(var l in fabric.Canvas=fabric.util.createClass(fabric.StaticCanvas,{initialize:function(t,e){e||(e={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(t,e),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=fabric.PencilBrush&&new fabric.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var t,e,i,s=this.getActiveObjects();if(0<s.length&&!this.preserveObjectStacking){e=[],i=[];for(var r=0,o=this._objects.length;r<o;r++)-1===s.indexOf(t=this._objects[r])?e.push(t):i.push(t);1<s.length&&(this._activeObject._objects=i),e.push.apply(e,i)}else e=this._objects;return e},renderAll:function(){return!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),this.renderCanvas(this.contextContainer,this._chooseObjectsToRender()),this},renderTopLayer:function(t){t.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(t),this.contextTopDirty=!0),t.restore()},renderTop:function(){var t=this.contextTop;return this.clearContext(t),this.renderTopLayer(t),this.fire("after:render"),this},_normalizePointer:function(t,e){var i=t.calcTransformMatrix(),s=fabric.util.invertTransform(i),r=this.restorePointerVpt(e);return fabric.util.transformPoint(r,s)},isTargetTransparent:function(t,e,i){if(t.shouldCache()&&t._cacheCanvas&&t!==this._activeObject){var s=this._normalizePointer(t,{x:e,y:i}),r=Math.max(t.cacheTranslationX+s.x*t.zoomX,0),o=Math.max(t.cacheTranslationY+s.y*t.zoomY,0);return fabric.util.isTransparent(t._cacheContext,Math.round(r),Math.round(o),this.targetFindTolerance)}var f=this.contextCache,m=t.selectionBackgroundColor,b=this.viewportTransform;return t.selectionBackgroundColor="",this.clearContext(f),f.save(),f.transform(b[0],b[1],b[2],b[3],b[4],b[5]),t.render(f),f.restore(),t.selectionBackgroundColor=m,fabric.util.isTransparent(f,e,i,this.targetFindTolerance)},_isSelectionKeyPressed:function(t){return Array.isArray(this.selectionKey)?!!this.selectionKey.find(function(e){return!0===t[e]}):t[this.selectionKey]},_shouldClearSelection:function(t,e){var i=this.getActiveObjects(),s=this._activeObject;return!e||e&&s&&1<i.length&&-1===i.indexOf(e)&&s!==e&&!this._isSelectionKeyPressed(t)||e&&!e.evented||e&&!e.selectable&&s&&s!==e},_shouldCenterTransform:function(t,e,i){var s;if(t)return"scale"===e||"scaleX"===e||"scaleY"===e||"resizing"===e?s=this.centeredScaling||t.centeredScaling:"rotate"===e&&(s=this.centeredRotation||t.centeredRotation),s?!i:i},_getOriginFromCorner:function(t,e){var i={x:t.originX,y:t.originY};return"ml"===e||"tl"===e||"bl"===e?i.x="right":"mr"!==e&&"tr"!==e&&"br"!==e||(i.x="left"),"tl"===e||"mt"===e||"tr"===e?i.y="bottom":"bl"!==e&&"mb"!==e&&"br"!==e||(i.y="top"),i},_getActionFromCorner:function(t,e,i,s){if(!e||!t)return"drag";var r=s.controls[e];return r.getActionName(i,r,s)},_setupCurrentTransform:function(t,e,i){if(e){var s=this.getPointer(t),r=e.__corner,o=e.controls[r],f=i&&r?o.getActionHandler(t,e,o):fabric.controlsUtils.dragHandler,m=this._getActionFromCorner(i,r,t,e),b=this._getOriginFromCorner(e,r),C=t[this.centeredKey],w={target:e,action:m,actionHandler:f,corner:r,scaleX:e.scaleX,scaleY:e.scaleY,skewX:e.skewX,skewY:e.skewY,offsetX:s.x-e.left,offsetY:s.y-e.top,originX:b.x,originY:b.y,ex:s.x,ey:s.y,lastX:s.x,lastY:s.y,theta:n(e.angle),width:e.width*e.scaleX,shiftKey:t.shiftKey,altKey:C,original:fabric.util.saveObjectTransform(e)};this._shouldCenterTransform(e,m,C)&&(w.originX="center",w.originY="center"),w.original.originX=b.x,w.original.originY=b.y,this._currentTransform=w,this._beforeTransform(t)}},setCursor:function(t){this.upperCanvasEl.style.cursor=t},_drawSelection:function(t){var e=this._groupSelector,i=new fabric.Point(e.ex,e.ey),s=fabric.util.transformPoint(i,this.viewportTransform),r=new fabric.Point(e.ex+e.left,e.ey+e.top),o=fabric.util.transformPoint(r,this.viewportTransform),f=Math.min(s.x,o.x),m=Math.min(s.y,o.y),b=Math.max(s.x,o.x),C=Math.max(s.y,o.y),w=this.selectionLineWidth/2;this.selectionColor&&(t.fillStyle=this.selectionColor,t.fillRect(f,m,b-f,C-m)),this.selectionLineWidth&&this.selectionBorderColor&&(t.lineWidth=this.selectionLineWidth,t.strokeStyle=this.selectionBorderColor,f+=w,m+=w,b-=w,C-=w,fabric.Object.prototype._setLineDash.call(this,t,this.selectionDashArray),t.strokeRect(f,m,b-f,C-m))},findTarget:function(t,e){if(!this.skipTargetFind){var i,s,r=this.getPointer(t,!0),o=this._activeObject,f=this.getActiveObjects(),m=a(t),b=1<f.length&&!e||1===f.length;if(this.targets=[],b&&o._findTargetCorner(r,m)||1<f.length&&!e&&o===this._searchPossibleTargets([o],r))return o;if(1===f.length&&o===this._searchPossibleTargets([o],r)){if(!this.preserveObjectStacking)return o;i=o,s=this.targets,this.targets=[]}var C=this._searchPossibleTargets(this._objects,r);return t[this.altSelectionKey]&&C&&i&&C!==i&&(C=i,this.targets=s),C}},_checkTarget:function(t,e,i){if(e&&e.visible&&e.evented&&e.containsPoint(t)&&(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing||!this.isTargetTransparent(e,i.x,i.y)))return!0},_searchPossibleTargets:function(t,e){for(var i,s,r=t.length;r--;){var o=t[r],f=o.group?this._normalizePointer(o.group,e):e;if(this._checkTarget(f,o,e)){(i=t[r]).subTargetCheck&&i instanceof fabric.Group&&(s=this._searchPossibleTargets(i._objects,e))&&this.targets.push(s);break}}return i},restorePointerVpt:function(t){return fabric.util.transformPoint(t,fabric.util.invertTransform(this.viewportTransform))},getPointer:function(t,e){if(this._absolutePointer&&!e)return this._absolutePointer;if(this._pointer&&e)return this._pointer;var i,s=h(t),r=this.upperCanvasEl,o=r.getBoundingClientRect(),f=o.width||0,m=o.height||0;f&&m||("top"in o&&"bottom"in o&&(m=Math.abs(o.top-o.bottom)),"right"in o&&"left"in o&&(f=Math.abs(o.right-o.left))),this.calcOffset(),s.x=s.x-this._offset.left,s.y=s.y-this._offset.top,e||(s=this.restorePointerVpt(s));var b=this.getRetinaScaling();return 1!==b&&(s.x/=b,s.y/=b),{x:s.x*(i=0===f||0===m?{width:1,height:1}:{width:r.width/f,height:r.height/m}).width,y:s.y*i.height}},_createUpperCanvas:function(){var t=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),e=this.lowerCanvasEl,i=this.upperCanvasEl;i?i.className="":(i=this._createCanvasElement(),this.upperCanvasEl=i),fabric.util.addClass(i,"upper-canvas "+t),this.wrapperEl.appendChild(i),this._copyCanvasStyle(e,i),this._applyCanvasStyle(i),this.contextTop=i.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=fabric.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),fabric.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),fabric.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(t){var e=this.width||t.width,i=this.height||t.height;fabric.util.setStyle(t,{position:"absolute",width:e+"px",height:i+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),t.width=e,t.height=i,fabric.util.makeElementUnselectable(t)},_copyCanvasStyle:function(t,e){e.style.cssText=t.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var t=this._activeObject;return t?"activeSelection"===t.type&&t._objects?t._objects.slice(0):[t]:[]},_onObjectRemoved:function(t){t===this._activeObject&&(this.fire("before:selection:cleared",{target:t}),this._discardActiveObject(),this.fire("selection:cleared",{target:t}),t.fire("deselected")),t===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",t)},_fireSelectionEvents:function(t,e){var i=!1,s=this.getActiveObjects(),r=[],o=[];t.forEach(function(f){-1===s.indexOf(f)&&(i=!0,f.fire("deselected",{e,target:f}),o.push(f))}),s.forEach(function(f){-1===t.indexOf(f)&&(i=!0,f.fire("selected",{e,target:f}),r.push(f))}),0<t.length&&0<s.length?i&&this.fire("selection:updated",{e,selected:r,deselected:o}):0<s.length?this.fire("selection:created",{e,selected:r}):0<t.length&&this.fire("selection:cleared",{e,deselected:o})},setActiveObject:function(t,e){var i=this.getActiveObjects();return this._setActiveObject(t,e),this._fireSelectionEvents(i,e),this},_setActiveObject:function(t,e){return this._activeObject!==t&&!!this._discardActiveObject(e,t)&&!t.onSelect({e})&&(this._activeObject=t,!0)},_discardActiveObject:function(t,e){var i=this._activeObject;if(i){if(i.onDeselect({e:t,object:e}))return!1;this._activeObject=null}return!0},discardActiveObject:function(t){var e=this.getActiveObjects(),i=this.getActiveObject();return e.length&&this.fire("before:selection:cleared",{target:i,e:t}),this._discardActiveObject(t),this._fireSelectionEvents(e,t),this},dispose:function(){var t=this.wrapperEl;return this.removeListeners(),t.removeChild(this.upperCanvasEl),t.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach(function(e){fabric.util.cleanUpJsdomNode(this[e]),this[e]=void 0}.bind(this)),t.parentNode&&t.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,fabric.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(t){var e=this._activeObject;e&&e._renderControls(t)},_toObject:function(t,e,i){var s=this._realizeGroupTransformOnObject(t),r=this.callSuper("_toObject",t,e,i);return this._unwindGroupTransformOnObject(t,s),r},_realizeGroupTransformOnObject:function(t){if(t.group&&"activeSelection"===t.group.type&&this._activeObject===t.group){var e={};return["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"].forEach(function(i){e[i]=t[i]}),fabric.util.addTransformToObject(t,this._activeObject.calcOwnMatrix()),e}return null},_unwindGroupTransformOnObject:function(t,e){e&&t.set(e)},_setSVGObject:function(t,e,i){var s=this._realizeGroupTransformOnObject(e);this.callSuper("_setSVGObject",t,e,i),this._unwindGroupTransformOnObject(e,s)},setViewportTransform:function(t){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),fabric.StaticCanvas.prototype.setViewportTransform.call(this,t)}}),fabric.StaticCanvas)"prototype"!==l&&(fabric.Canvas[l]=fabric.StaticCanvas[l])}(),function(){var h=fabric.util.addListener,n=fabric.util.removeListener,a={passive:!1};function l(t,e){return t.button&&t.button===e-1}fabric.util.object.extend(fabric.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(h,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(t,e){var i=this.upperCanvasEl,s=this._getEventPrefix();t(fabric.window,"resize",this._onResize),t(i,s+"down",this._onMouseDown),t(i,s+"move",this._onMouseMove,a),t(i,s+"out",this._onMouseOut),t(i,s+"enter",this._onMouseEnter),t(i,"wheel",this._onMouseWheel),t(i,"contextmenu",this._onContextMenu),t(i,"dblclick",this._onDoubleClick),t(i,"dragover",this._onDragOver),t(i,"dragenter",this._onDragEnter),t(i,"dragleave",this._onDragLeave),t(i,"drop",this._onDrop),this.enablePointerEvents||t(i,"touchstart",this._onTouchStart,a),typeof eventjs<"u"&&e in eventjs&&(eventjs[e](i,"gesture",this._onGesture),eventjs[e](i,"drag",this._onDrag),eventjs[e](i,"orientation",this._onOrientationChange),eventjs[e](i,"shake",this._onShake),eventjs[e](i,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(n,"remove");var t=this._getEventPrefix();n(fabric.document,t+"up",this._onMouseUp),n(fabric.document,"touchend",this._onTouchEnd,a),n(fabric.document,t+"move",this._onMouseMove,a),n(fabric.document,"touchmove",this._onMouseMove,a)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(t,e){this.__onTransformGesture&&this.__onTransformGesture(t,e)},_onDrag:function(t,e){this.__onDrag&&this.__onDrag(t,e)},_onMouseWheel:function(t){this.__onMouseWheel(t)},_onMouseOut:function(t){var e=this._hoveredTarget;this.fire("mouse:out",{target:e,e:t}),this._hoveredTarget=null,e&&e.fire("mouseout",{e:t});var i=this;this._hoveredTargets.forEach(function(s){i.fire("mouse:out",{target:e,e:t}),s&&e.fire("mouseout",{e:t})}),this._hoveredTargets=[],this._iTextInstances&&this._iTextInstances.forEach(function(s){s.isEditing&&s.hiddenTextarea.focus()})},_onMouseEnter:function(t){this._currentTransform||this.findTarget(t)||(this.fire("mouse:over",{target:null,e:t}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(t,e){this.__onOrientationChange&&this.__onOrientationChange(t,e)},_onShake:function(t,e){this.__onShake&&this.__onShake(t,e)},_onLongPress:function(t,e){this.__onLongPress&&this.__onLongPress(t,e)},_onDragOver:function(t){t.preventDefault();var e=this._simpleEventHandler("dragover",t);this._fireEnterLeaveEvents(e,t)},_onDrop:function(t){return this._simpleEventHandler("drop:before",t),this._simpleEventHandler("drop",t)},_onContextMenu:function(t){return this.stopContextMenu&&(t.stopPropagation(),t.preventDefault()),!1},_onDoubleClick:function(t){this._cacheTransformEventData(t),this._handleEvent(t,"dblclick"),this._resetTransformEventData(t)},getPointerId:function(t){var e=t.changedTouches;return e?e[0]&&e[0].identifier:this.enablePointerEvents?t.pointerId:-1},_isMainEvent:function(t){return!0===t.isPrimary||!1!==t.isPrimary&&("touchend"===t.type&&0===t.touches.length||!t.changedTouches||t.changedTouches[0].identifier===this.mainTouchId)},_onTouchStart:function(t){t.preventDefault(),null===this.mainTouchId&&(this.mainTouchId=this.getPointerId(t)),this.__onMouseDown(t),this._resetTransformEventData();var e=this.upperCanvasEl,i=this._getEventPrefix();h(fabric.document,"touchend",this._onTouchEnd,a),h(fabric.document,"touchmove",this._onMouseMove,a),n(e,i+"down",this._onMouseDown)},_onMouseDown:function(t){this.__onMouseDown(t),this._resetTransformEventData();var e=this.upperCanvasEl,i=this._getEventPrefix();n(e,i+"move",this._onMouseMove,a),h(fabric.document,i+"up",this._onMouseUp),h(fabric.document,i+"move",this._onMouseMove,a)},_onTouchEnd:function(t){if(!(0<t.touches.length)){this.__onMouseUp(t),this._resetTransformEventData(),this.mainTouchId=null;var e=this._getEventPrefix();n(fabric.document,"touchend",this._onTouchEnd,a),n(fabric.document,"touchmove",this._onMouseMove,a);var i=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){h(i.upperCanvasEl,e+"down",i._onMouseDown),i._willAddMouseDown=0},400)}},_onMouseUp:function(t){this.__onMouseUp(t),this._resetTransformEventData();var e=this.upperCanvasEl,i=this._getEventPrefix();this._isMainEvent(t)&&(n(fabric.document,i+"up",this._onMouseUp),n(fabric.document,i+"move",this._onMouseMove,a),h(e,i+"move",this._onMouseMove,a))},_onMouseMove:function(t){!this.allowTouchScrolling&&t.preventDefault&&t.preventDefault(),this.__onMouseMove(t)},_onResize:function(){this.calcOffset()},_shouldRender:function(t){var e=this._activeObject;return!!(!!e!=!!t||e&&t&&e!==t)||!1},__onMouseUp:function(t){var e,i=this._currentTransform,s=this._groupSelector,r=!1,o=!s||0===s.left&&0===s.top;if(this._cacheTransformEventData(t),e=this._target,this._handleEvent(t,"up:before"),l(t,3))this.fireRightClick&&this._handleEvent(t,"up",3,o);else{if(l(t,2))return this.fireMiddleClick&&this._handleEvent(t,"up",2,o),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)this._onMouseUpInDrawingMode(t);else if(this._isMainEvent(t)){if(i&&(this._finalizeCurrentTransform(t),r=i.actionPerformed),!o){var f=e===this._activeObject;this._maybeGroupObjects(t),r||(r=this._shouldRender(e)||!f&&e===this._activeObject)}var m,b;if(e){if(m=e._findTargetCorner(this.getPointer(t,!0),fabric.util.isTouchEvent(t)),e.selectable&&e!==this._activeObject&&"up"===e.activeOn)this.setActiveObject(e,t),r=!0;else{var C=e.controls[m],w=C&&C.getMouseUpHandler(t,e,C);w&&w(t,i,(b=this.getPointer(t)).x,b.y)}e.isMoving=!1}if(i&&(i.target!==e||i.corner!==m)){var E=i.target&&i.target.controls[i.corner],M=E&&E.getMouseUpHandler(t,e,C);b=b||this.getPointer(t),M&&M(t,i,b.x,b.y)}this._setCursorFromEvent(t,e),this._handleEvent(t,"up",1,o),this._groupSelector=null,this._currentTransform=null,e&&(e.__corner=0),r?this.requestRenderAll():o||this.renderTop()}}},_simpleEventHandler:function(t,e){var i=this.findTarget(e),s=this.targets,r={e,target:i,subTargets:s};if(this.fire(t,r),i&&i.fire(t,r),!s)return i;for(var o=0;o<s.length;o++)s[o].fire(t,r);return i},_handleEvent:function(t,e,i,s){var r=this._target,o=this.targets||[],f={e:t,target:r,subTargets:o,button:i||1,isClick:s||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};"up"===e&&(f.currentTarget=this.findTarget(t),f.currentSubTargets=this.targets),this.fire("mouse:"+e,f),r&&r.fire("mouse"+e,f);for(var m=0;m<o.length;m++)o[m].fire("mouse"+e,f)},_finalizeCurrentTransform:function(t){var e=this._currentTransform,i=e.target,s={e:t,target:i,transform:e,action:e.action};i._scaling&&(i._scaling=!1),i.setCoords(),(e.actionPerformed||this.stateful&&i.hasStateChanged())&&this._fire("modified",s)},_onMouseDownInDrawingMode:function(t){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(t).requestRenderAll();var e=this.getPointer(t);this.freeDrawingBrush.onMouseDown(e,{e:t,pointer:e}),this._handleEvent(t,"down")},_onMouseMoveInDrawingMode:function(t){if(this._isCurrentlyDrawing){var e=this.getPointer(t);this.freeDrawingBrush.onMouseMove(e,{e:t,pointer:e})}this.setCursor(this.freeDrawingCursor),this._handleEvent(t,"move")},_onMouseUpInDrawingMode:function(t){var e=this.getPointer(t);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:t,pointer:e}),this._handleEvent(t,"up")},__onMouseDown:function(t){this._cacheTransformEventData(t),this._handleEvent(t,"down:before");var e=this._target;if(l(t,3))this.fireRightClick&&this._handleEvent(t,"down",3);else if(l(t,2))this.fireMiddleClick&&this._handleEvent(t,"down",2);else if(this.isDrawingMode)this._onMouseDownInDrawingMode(t);else if(this._isMainEvent(t)&&!this._currentTransform){var i=this._pointer;this._previousPointer=i;var s=this._shouldRender(e),r=this._shouldGroup(t,e);if(this._shouldClearSelection(t,e)?this.discardActiveObject(t):r&&(this._handleGrouping(t,e),e=this._activeObject),!this.selection||e&&(e.selectable||e.isEditing||e===this._activeObject)||(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),e){var o=e===this._activeObject;e.selectable&&"down"===e.activeOn&&this.setActiveObject(e,t);var f=e._findTargetCorner(this.getPointer(t,!0),fabric.util.isTouchEvent(t));if(e.__corner=f,e===this._activeObject&&(f||!r)){this._setupCurrentTransform(t,e,o);var m=e.controls[f],b=(i=this.getPointer(t),m&&m.getMouseDownHandler(t,e,m));b&&b(t,this._currentTransform,i.x,i.y)}}this._handleEvent(t,"down"),(s||r)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(t){this._resetTransformEventData(),this._pointer=this.getPointer(t,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(t)||null},_beforeTransform:function(t){var e=this._currentTransform;this.stateful&&e.target.saveState(),this.fire("before:transform",{e:t,transform:e})},__onMouseMove:function(t){var e,i;if(this._handleEvent(t,"move:before"),this._cacheTransformEventData(t),this.isDrawingMode)this._onMouseMoveInDrawingMode(t);else if(this._isMainEvent(t)){var s=this._groupSelector;s?(s.left=(i=this._absolutePointer).x-s.ex,s.top=i.y-s.ey,this.renderTop()):this._currentTransform?this._transformObject(t):(e=this.findTarget(t)||null,this._setCursorFromEvent(t,e),this._fireOverOutEvents(e,t)),this._handleEvent(t,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(t,e){var i=this._hoveredTarget,s=this._hoveredTargets,r=this.targets,o=Math.max(s.length,r.length);this.fireSyntheticInOutEvents(t,e,{oldTarget:i,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var f=0;f<o;f++)this.fireSyntheticInOutEvents(r[f],e,{oldTarget:s[f],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=t,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(t,e){var i=this._draggedoverTarget,s=this._hoveredTargets,r=this.targets,o=Math.max(s.length,r.length);this.fireSyntheticInOutEvents(t,e,{oldTarget:i,evtOut:"dragleave",evtIn:"dragenter"});for(var f=0;f<o;f++)this.fireSyntheticInOutEvents(r[f],e,{oldTarget:s[f],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=t},fireSyntheticInOutEvents:function(t,e,i){var s,r,o,f=i.oldTarget,m=f!==t,b=i.canvasEvtIn,C=i.canvasEvtOut;m&&(s={e,target:t,previousTarget:f},r={e,target:f,nextTarget:t}),o=t&&m,f&&m&&(C&&this.fire(C,r),f.fire(i.evtOut,r)),o&&(b&&this.fire(b,s),t.fire(i.evtIn,s))},__onMouseWheel:function(t){this._cacheTransformEventData(t),this._handleEvent(t,"wheel"),this._resetTransformEventData()},_transformObject:function(t){var e=this.getPointer(t),i=this._currentTransform;i.reset=!1,i.shiftKey=t.shiftKey,i.altKey=t[this.centeredKey],this._performTransformAction(t,i,e),i.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(t,e,i){var o=e.action,f=!1,m=e.actionHandler;m&&(f=m(t,e,i.x,i.y)),"drag"===o&&f&&(e.target.isMoving=!0,this.setCursor(e.target.moveCursor||this.moveCursor)),e.actionPerformed=e.actionPerformed||f},_fire:fabric.controlsUtils.fireEvent,_setCursorFromEvent:function(t,e){if(!e)return this.setCursor(this.defaultCursor),!1;var i=e.hoverCursor||this.hoverCursor,s=this._activeObject&&"activeSelection"===this._activeObject.type?this._activeObject:null,r=(!s||!s.contains(e))&&e._findTargetCorner(this.getPointer(t,!0));r?this.setCursor(this.getCornerCursor(r,e,t)):(e.subTargetCheck&&this.targets.concat().reverse().map(function(o){i=o.hoverCursor||i}),this.setCursor(i))},getCornerCursor:function(t,e,i){var s=e.controls[t];return s.cursorStyleHandler(i,s,e)}})}(),function(){var h=Math.min,n=Math.max;fabric.util.object.extend(fabric.Canvas.prototype,{_shouldGroup:function(a,l){var t=this._activeObject;return t&&this._isSelectionKeyPressed(a)&&l&&l.selectable&&this.selection&&(t!==l||"activeSelection"===t.type)&&!l.onSelect({e:a})},_handleGrouping:function(a,l){var t=this._activeObject;t.__corner||(l!==t||(l=this.findTarget(a,!0))&&l.selectable)&&(t&&"activeSelection"===t.type?this._updateActiveSelection(l,a):this._createActiveSelection(l,a))},_updateActiveSelection:function(a,l){var t=this._activeObject,e=t._objects.slice(0);t.contains(a)?(t.removeWithUpdate(a),this._hoveredTarget=a,this._hoveredTargets=this.targets.concat(),1===t.size()&&this._setActiveObject(t.item(0),l)):(t.addWithUpdate(a),this._hoveredTarget=t,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(e,l)},_createActiveSelection:function(a,l){var t=this.getActiveObjects(),e=this._createGroup(a);this._hoveredTarget=e,this._setActiveObject(e,l),this._fireSelectionEvents(t,l)},_createGroup:function(a){var l=this._objects,t=l.indexOf(this._activeObject)<l.indexOf(a)?[this._activeObject,a]:[a,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new fabric.ActiveSelection(t,{canvas:this})},_groupSelectedObjects:function(a){var l,t=this._collectObjects(a);1===t.length?this.setActiveObject(t[0],a):1<t.length&&(l=new fabric.ActiveSelection(t.reverse(),{canvas:this}),this.setActiveObject(l,a))},_collectObjects:function(a){for(var l,t=[],e=this._groupSelector.ex,i=this._groupSelector.ey,s=e+this._groupSelector.left,r=i+this._groupSelector.top,o=new fabric.Point(h(e,s),h(i,r)),f=new fabric.Point(n(e,s),n(i,r)),m=!this.selectionFullyContained,b=e===s&&i===r,C=this._objects.length;C--&&!((l=this._objects[C])&&l.selectable&&l.visible&&(m&&l.intersectsWithRect(o,f,!0)||l.isContainedWithinRect(o,f,!0)||m&&l.containsPoint(o,null,!0)||m&&l.containsPoint(f,null,!0))&&(t.push(l),b)););return 1<t.length&&(t=t.filter(function(w){return!w.onSelect({e:a})})),t},_maybeGroupObjects:function(a){this.selection&&this._groupSelector&&this._groupSelectedObjects(a),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),fabric.util.object.extend(fabric.StaticCanvas.prototype,{toDataURL:function(h){h||(h={});var n=h.format||"png",a=h.quality||1,l=(h.multiplier||1)*(h.enableRetinaScaling?this.getRetinaScaling():1),t=this.toCanvasElement(l,h);return fabric.util.toDataURL(t,n,a)},toCanvasElement:function(h,n){var a=((n=n||{}).width||this.width)*(h=h||1),l=(n.height||this.height)*h,t=this.getZoom(),e=this.width,i=this.height,s=t*h,r=this.viewportTransform,m=this.interactive,b=[s,0,0,s,(r[4]-(n.left||0))*h,(r[5]-(n.top||0))*h],C=this.enableRetinaScaling,w=fabric.util.createCanvasElement(),E=this.contextTop;return w.width=a,w.height=l,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=b,this.width=a,this.height=l,this.calcViewportBoundaries(),this.renderCanvas(w.getContext("2d"),this._objects),this.viewportTransform=r,this.width=e,this.height=i,this.calcViewportBoundaries(),this.interactive=m,this.enableRetinaScaling=C,this.contextTop=E,w}}),fabric.util.object.extend(fabric.StaticCanvas.prototype,{loadFromJSON:function(h,n,a){if(h){var l="string"==typeof h?JSON.parse(h):fabric.util.object.clone(h),t=this,e=l.clipPath,i=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete l.clipPath,this._enlivenObjects(l.objects,function(s){t.clear(),t._setBgOverlay(l,function(){e?t._enlivenObjects([e],function(r){t.clipPath=r[0],t.__setupCanvas.call(t,l,s,i,n)}):t.__setupCanvas.call(t,l,s,i,n)})},a),this}},__setupCanvas:function(h,n,a,l){var t=this;n.forEach(function(e,i){t.insertAt(e,i)}),this.renderOnAddRemove=a,delete h.objects,delete h.backgroundImage,delete h.overlayImage,delete h.background,delete h.overlay,this._setOptions(h),this.renderAll(),l&&l()},_setBgOverlay:function(h,n){var a={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(h.backgroundImage||h.overlayImage||h.background||h.overlay){var l=function(){a.backgroundImage&&a.overlayImage&&a.backgroundColor&&a.overlayColor&&n&&n()};this.__setBgOverlay("backgroundImage",h.backgroundImage,a,l),this.__setBgOverlay("overlayImage",h.overlayImage,a,l),this.__setBgOverlay("backgroundColor",h.background,a,l),this.__setBgOverlay("overlayColor",h.overlay,a,l)}else n&&n()},__setBgOverlay:function(h,n,a,l){var t=this;if(!n)return a[h]=!0,void(l&&l());"backgroundImage"===h||"overlayImage"===h?fabric.util.enlivenObjects([n],function(e){t[h]=e[0],a[h]=!0,l&&l()}):this["set"+fabric.util.string.capitalize(h,!0)](n,function(){a[h]=!0,l&&l()})},_enlivenObjects:function(h,n,a){h&&0!==h.length?fabric.util.enlivenObjects(h,function(l){n&&n(l)},null,a):n&&n([])},_toDataURL:function(h,n){this.clone(function(a){n(a.toDataURL(h))})},_toDataURLWithMultiplier:function(h,n,a){this.clone(function(l){a(l.toDataURLWithMultiplier(h,n))})},clone:function(h,n){var a=JSON.stringify(this.toJSON(n));this.cloneWithoutData(function(l){l.loadFromJSON(a,function(){h&&h(l)})})},cloneWithoutData:function(h){var n=fabric.util.createCanvasElement();n.width=this.width,n.height=this.height;var a=new fabric.Canvas(n);this.backgroundImage?(a.setBackgroundImage(this.backgroundImage.src,function(){a.renderAll(),h&&h(a)}),a.backgroundImageOpacity=this.backgroundImageOpacity,a.backgroundImageStretch=this.backgroundImageStretch):h&&h(a)}}),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.util.object.extend,l=n.util.object.clone,t=n.util.toFixed,e=n.util.string.capitalize,i=n.util.degreesToRadians;n.Object||(n.Object=n.util.createClass(n.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:!n.isLikelyNode,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(r){r&&this.setOptions(r)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=n.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(r){var o=n.perfLimitSizeTotal,f=r.width,m=r.height,b=n.maxCacheSideLimit,C=n.minCacheSideLimit;if(f<=b&&m<=b&&f*m<=o)return f<C&&(r.width=C),m<C&&(r.height=C),r;var E=n.util.limitDimsByArea(f/m,o),M=n.util.capValue,N=M(C,E.x,b),H=M(C,E.y,b);return N<f&&(r.zoomX/=f/N,r.width=N,r.capped=!0),H<m&&(r.zoomY/=m/H,r.height=H,r.capped=!0),r},_getCacheCanvasDimensions:function(){var r=this.getTotalObjectScaling(),o=this._getTransformedDimensions(0,0),f=o.x*r.scaleX/this.scaleX,m=o.y*r.scaleY/this.scaleY;return{width:f+2,height:m+2,zoomX:r.scaleX,zoomY:r.scaleY,x:f,y:m}},_updateCacheCanvas:function(){var r=this.canvas;if(this.noScaleCache&&r&&r._currentTransform){var f=r._currentTransform.action;if(this===r._currentTransform.target&&f.slice&&"scale"===f.slice(0,5))return!1}var m,b,C=this._cacheCanvas,w=this._limitCacheSize(this._getCacheCanvasDimensions()),E=n.minCacheSideLimit,M=w.width,N=w.height,H=w.zoomX,nt=w.zoomY,st=M!==this.cacheWidth||N!==this.cacheHeight,F=st||this.zoomX!==H||this.zoomY!==nt,V=0,et=0,ot=!1;if(st){var ct=this._cacheCanvas.width,W=this._cacheCanvas.height,z=ct<M||W<N;ot=z||(M<.9*ct||N<.9*W)&&E<ct&&E<W,z&&!w.capped&&(E<M||E<N)&&(V=.1*M,et=.1*N)}return this instanceof n.Text&&this.path&&(ot=F=!0,V+=this.getHeightOfLine(0)*this.zoomX,et+=this.getHeightOfLine(0)*this.zoomY),!!F&&(ot?(C.width=Math.ceil(M+V),C.height=Math.ceil(N+et)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,C.width,C.height)),m=w.x/2,b=w.y/2,this.cacheTranslationX=Math.round(C.width/2-m)+m,this.cacheTranslationY=Math.round(C.height/2-b)+b,this.cacheWidth=M,this.cacheHeight=N,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(H,nt),this.zoomX=H,this.zoomY=nt,!0)},setOptions:function(r){this._setOptions(r),this._initGradient(r.fill,"fill"),this._initGradient(r.stroke,"stroke"),this._initPattern(r.fill,"fill"),this._initPattern(r.stroke,"stroke")},transform:function(r){var f=this.calcTransformMatrix(!(this.group&&!this.group._transformDone||this.group&&this.canvas&&r===this.canvas.contextTop));r.transform(f[0],f[1],f[2],f[3],f[4],f[5])},toObject:function(r){var o=n.Object.NUM_FRACTION_DIGITS,f={type:this.type,version:n.version,originX:this.originX,originY:this.originY,left:t(this.left,o),top:t(this.top,o),width:t(this.width,o),height:t(this.height,o),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:t(this.strokeWidth,o),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:t(this.strokeMiterLimit,o),scaleX:t(this.scaleX,o),scaleY:t(this.scaleY,o),angle:t(this.angle,o),flipX:this.flipX,flipY:this.flipY,opacity:t(this.opacity,o),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:t(this.skewX,o),skewY:t(this.skewY,o)};return this.clipPath&&!this.clipPath.excludeFromExport&&(f.clipPath=this.clipPath.toObject(r),f.clipPath.inverted=this.clipPath.inverted,f.clipPath.absolutePositioned=this.clipPath.absolutePositioned),n.util.populateWithProperties(this,f,r),this.includeDefaultValues||(f=this._removeDefaultValues(f)),f},toDatalessObject:function(r){return this.toObject(r)},_removeDefaultValues:function(r){var o=n.util.getKlass(r.type).prototype;return o.stateProperties.forEach(function(f){"left"!==f&&"top"!==f&&(r[f]===o[f]&&delete r[f],Array.isArray(r[f])&&Array.isArray(o[f])&&0===r[f].length&&0===o[f].length&&delete r[f])}),r},toString:function(){return"#<fabric."+e(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var r=n.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(r.scaleX),scaleY:Math.abs(r.scaleY)}},getTotalObjectScaling:function(){var r=this.getObjectScaling(),o=r.scaleX,f=r.scaleY;if(this.canvas){var m=this.canvas.getZoom(),b=this.canvas.getRetinaScaling();o*=m*b,f*=m*b}return{scaleX:o,scaleY:f}},getObjectOpacity:function(){var r=this.opacity;return this.group&&(r*=this.group.getObjectOpacity()),r},_set:function(r,o){var m=this[r]!==o,b=!1;return("scaleX"===r||"scaleY"===r)&&(o=this._constrainScale(o)),"scaleX"===r&&o<0?(this.flipX=!this.flipX,o*=-1):"scaleY"===r&&o<0?(this.flipY=!this.flipY,o*=-1):"shadow"!==r||!o||o instanceof n.Shadow?"dirty"===r&&this.group&&this.group.set("dirty",o):o=new n.Shadow(o),this[r]=o,m&&(b=this.group&&this.group.isOnACache(),-1<this.cacheProperties.indexOf(r)?(this.dirty=!0,b&&this.group.set("dirty",!0)):b&&-1<this.stateProperties.indexOf(r)&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:n.iMatrix.concat()},isNotVisible:function(){return 0===this.opacity||!this.width&&!this.height&&0===this.strokeWidth||!this.visible},render:function(r){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(r.save(),this._setupCompositeOperation(r),this.drawSelectionBackground(r),this.transform(r),this._setOpacity(r),this._setShadow(r,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(r)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(r),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),r.restore())},renderCache:function(r){r=r||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,r.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&"transparent"!==this.stroke&&0!==this.strokeWidth},hasFill:function(){return this.fill&&"transparent"!==this.fill},needsItsOwnCache:function(){return!("stroke"!==this.paintFirst||!this.hasFill()||!this.hasStroke()||"object"!=typeof this.shadow)||!!this.clipPath},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(0!==this.shadow.offsetX||0!==this.shadow.offsetY)},drawClipPathOnCache:function(r,o){if(r.save(),r.globalCompositeOperation=o.inverted?"destination-out":"destination-in",o.absolutePositioned){var f=n.util.invertTransform(this.calcTransformMatrix());r.transform(f[0],f[1],f[2],f[3],f[4],f[5])}o.transform(r),r.scale(1/o.zoomX,1/o.zoomY),r.drawImage(o._cacheCanvas,-o.cacheTranslationX,-o.cacheTranslationY),r.restore()},drawObject:function(r,o){var f=this.fill,m=this.stroke;o?(this.fill="black",this.stroke="",this._setClippingProperties(r)):this._renderBackground(r),this._render(r),this._drawClipPath(r,this.clipPath),this.fill=f,this.stroke=m},_drawClipPath:function(r,o){o&&(o.canvas=this.canvas,o.shouldCache(),o._transformDone=!0,o.renderCache({forClipping:!0}),this.drawClipPathOnCache(r,o))},drawCacheOnCanvas:function(r){r.scale(1/this.zoomX,1/this.zoomY),r.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(r){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!r&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!r){var o=this.cacheWidth/this.zoomX,f=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-o/2,-f/2,o,f)}return!0}return!1},_renderBackground:function(r){if(this.backgroundColor){var o=this._getNonTransformedDimensions();r.fillStyle=this.backgroundColor,r.fillRect(-o.x/2,-o.y/2,o.x,o.y),this._removeShadow(r)}},_setOpacity:function(r){this.group&&!this.group._transformDone?r.globalAlpha=this.getObjectOpacity():r.globalAlpha*=this.opacity},_setStrokeStyles:function(r,o){var f=o.stroke;f&&(r.lineWidth=o.strokeWidth,r.lineCap=o.strokeLineCap,r.lineDashOffset=o.strokeDashOffset,r.lineJoin=o.strokeLineJoin,r.miterLimit=o.strokeMiterLimit,f.toLive?"percentage"===f.gradientUnits||f.gradientTransform||f.patternTransform?this._applyPatternForTransformedGradient(r,f):(r.strokeStyle=f.toLive(r,this),this._applyPatternGradientTransform(r,f)):r.strokeStyle=o.stroke)},_setFillStyles:function(r,o){var f=o.fill;f&&(f.toLive?(r.fillStyle=f.toLive(r,this),this._applyPatternGradientTransform(r,o.fill)):r.fillStyle=f)},_setClippingProperties:function(r){r.globalAlpha=1,r.strokeStyle="transparent",r.fillStyle="#000000"},_setLineDash:function(r,o){o&&0!==o.length&&(1&o.length&&o.push.apply(o,o),r.setLineDash(o))},_renderControls:function(r,o){var f,m,b,C=this.getViewportTransform(),w=this.calcTransformMatrix();m=void 0!==(o=o||{}).hasBorders?o.hasBorders:this.hasBorders,b=void 0!==o.hasControls?o.hasControls:this.hasControls,w=n.util.multiplyTransformMatrices(C,w),f=n.util.qrDecompose(w),r.save(),r.translate(f.translateX,f.translateY),r.lineWidth=1*this.borderScaleFactor,this.group||(r.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(f.angle-=180),r.rotate(i(this.group?f.angle:this.angle)),o.forActiveSelection||this.group?m&&this.drawBordersInGroup(r,f,o):m&&this.drawBorders(r,o),b&&this.drawControls(r,o),r.restore()},_setShadow:function(r){if(this.shadow){var o,f=this.shadow,m=this.canvas,b=m&&m.viewportTransform[0]||1,C=m&&m.viewportTransform[3]||1;o=f.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),m&&m._isRetinaScaling()&&(b*=n.devicePixelRatio,C*=n.devicePixelRatio),r.shadowColor=f.color,r.shadowBlur=f.blur*n.browserShadowBlurConstant*(b+C)*(o.scaleX+o.scaleY)/4,r.shadowOffsetX=f.offsetX*b*o.scaleX,r.shadowOffsetY=f.offsetY*C*o.scaleY}},_removeShadow:function(r){this.shadow&&(r.shadowColor="",r.shadowBlur=r.shadowOffsetX=r.shadowOffsetY=0)},_applyPatternGradientTransform:function(r,o){if(!o||!o.toLive)return{offsetX:0,offsetY:0};var f=o.gradientTransform||o.patternTransform,m=-this.width/2+o.offsetX||0,b=-this.height/2+o.offsetY||0;return"percentage"===o.gradientUnits?r.transform(this.width,0,0,this.height,m,b):r.transform(1,0,0,1,m,b),f&&r.transform(f[0],f[1],f[2],f[3],f[4],f[5]),{offsetX:m,offsetY:b}},_renderPaintInOrder:function(r){"stroke"===this.paintFirst?(this._renderStroke(r),this._renderFill(r)):(this._renderFill(r),this._renderStroke(r))},_render:function(){},_renderFill:function(r){this.fill&&(r.save(),this._setFillStyles(r,this),"evenodd"===this.fillRule?r.fill("evenodd"):r.fill(),r.restore())},_renderStroke:function(r){if(this.stroke&&0!==this.strokeWidth){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(r),r.save(),this.strokeUniform&&this.group){var o=this.getObjectScaling();r.scale(1/o.scaleX,1/o.scaleY)}else this.strokeUniform&&r.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(r,this.strokeDashArray),this._setStrokeStyles(r,this),r.stroke(),r.restore()}},_applyPatternForTransformedGradient:function(r,o){var f,m=this._limitCacheSize(this._getCacheCanvasDimensions()),b=n.util.createCanvasElement(),C=this.canvas.getRetinaScaling(),w=m.x/this.scaleX/C,E=m.y/this.scaleY/C;b.width=w,b.height=E,(f=b.getContext("2d")).beginPath(),f.moveTo(0,0),f.lineTo(w,0),f.lineTo(w,E),f.lineTo(0,E),f.closePath(),f.translate(w/2,E/2),f.scale(m.zoomX/this.scaleX/C,m.zoomY/this.scaleY/C),this._applyPatternGradientTransform(f,o),f.fillStyle=o.toLive(r),f.fill(),r.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),r.scale(C*this.scaleX/m.zoomX,C*this.scaleY/m.zoomY),r.strokeStyle=f.createPattern(b,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var r=n.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",r.scaleX),this.set("scaleY",r.scaleY),this.angle=r.angle,this.skewX=r.skewX,this.skewY=0}},_removeTransformMatrix:function(r){var o=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),o=n.util.transformPoint(o,this.transformMatrix)),this.transformMatrix=null,r&&(this.scaleX*=r.scaleX,this.scaleY*=r.scaleY,this.cropX=r.cropX,this.cropY=r.cropY,o.x+=r.offsetLeft,o.y+=r.offsetTop,this.width=r.width,this.height=r.height),this.setPositionByOrigin(o,"center","center")},clone:function(r,o){var f=this.toObject(o);this.constructor.fromObject?this.constructor.fromObject(f,r):n.Object._fromObject("Object",f,r)},cloneAsImage:function(r,o){var f=this.toCanvasElement(o);return r&&r(new n.Image(f)),this},toCanvasElement:function(r){r||(r={});var o=n.util,f=o.saveObjectTransform(this),m=this.group,b=this.shadow,C=Math.abs,w=(r.multiplier||1)*(r.enableRetinaScaling?n.devicePixelRatio:1);delete this.group,r.withoutTransform&&o.resetObjectTransform(this),r.withoutShadow&&(this.shadow=null);var E,M,H,nt=n.util.createCanvasElement(),st=this.getBoundingRect(!0,!0),p=this.shadow,F={x:0,y:0};p&&(M=p.blur,E=p.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),F.x=2*Math.round(C(p.offsetX)+M)*C(E.scaleX),F.y=2*Math.round(C(p.offsetY)+M)*C(E.scaleY)),H=st.height+F.y,nt.width=Math.ceil(st.width+F.x),nt.height=Math.ceil(H);var V=new n.StaticCanvas(nt,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});"jpeg"===r.format&&(V.backgroundColor="#fff"),this.setPositionByOrigin(new n.Point(V.width/2,V.height/2),"center","center");var et=this.canvas;V.add(this);var ot=V.toCanvasElement(w||1,r);return this.shadow=b,this.set("canvas",et),m&&(this.group=m),this.set(f).setCoords(),V._objects=[],V.dispose(),V=null,ot},toDataURL:function(r){return r||(r={}),n.util.toDataURL(this.toCanvasElement(r),r.format||"png",r.quality||1)},isType:function(r){return 1<arguments.length?Array.from(arguments).includes(this.type):this.type===r},complexity:function(){return 1},toJSON:function(r){return this.toObject(r)},rotate:function(r){var o=("center"!==this.originX||"center"!==this.originY)&&this.centeredRotation;return o&&this._setOriginToCenter(),this.set("angle",r),o&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(r,o){o=o||this.canvas.getPointer(r);var f=new n.Point(o.x,o.y),m=this._getLeftTopCoords();return this.angle&&(f=n.util.rotatePoint(f,m,i(-this.angle))),{x:f.x-m.x,y:f.y-m.y}},_setupCompositeOperation:function(r){this.globalCompositeOperation&&(r.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){n.runningAnimations&&n.runningAnimations.cancelByTarget(this)}}),n.util.createAccessors&&n.util.createAccessors(n.Object),a(n.Object.prototype,n.Observable),n.Object.NUM_FRACTION_DIGITS=2,n.Object.ENLIVEN_PROPS=["clipPath"],n.Object._fromObject=function(r,o,f,m){var b=n[r];o=l(o,!0),n.util.enlivenPatterns([o.fill,o.stroke],function(C){void 0!==C[0]&&(o.fill=C[0]),void 0!==C[1]&&(o.stroke=C[1]),n.util.enlivenObjectEnlivables(o,o,function(){var w=m?new b(o[m],o):new b(o);f&&f(w)})})},n.Object.__uid=0)}(typeof exports<"u"?exports:this),function(){var h=fabric.util.degreesToRadians,n={left:-.5,center:0,right:.5},a={top:-.5,center:0,bottom:.5};fabric.util.object.extend(fabric.Object.prototype,{translateToGivenOrigin:function(l,t,e,i,s){var r,o,f,m=l.x,b=l.y;return"string"==typeof t?t=n[t]:t-=.5,"string"==typeof i?i=n[i]:i-=.5,"string"==typeof e?e=a[e]:e-=.5,"string"==typeof s?s=a[s]:s-=.5,o=s-e,((r=i-t)||o)&&(f=this._getTransformedDimensions(),m=l.x+r*f.x,b=l.y+o*f.y),new fabric.Point(m,b)},translateToCenterPoint:function(l,t,e){var i=this.translateToGivenOrigin(l,t,e,"center","center");return this.angle?fabric.util.rotatePoint(i,l,h(this.angle)):i},translateToOriginPoint:function(l,t,e){var i=this.translateToGivenOrigin(l,"center","center",t,e);return this.angle?fabric.util.rotatePoint(i,l,h(this.angle)):i},getCenterPoint:function(){var l=new fabric.Point(this.left,this.top);return this.translateToCenterPoint(l,this.originX,this.originY)},getPointByOrigin:function(l,t){var e=this.getCenterPoint();return this.translateToOriginPoint(e,l,t)},toLocalPoint:function(l,t,e){var i,s,r=this.getCenterPoint();return i=void 0!==t&&void 0!==e?this.translateToGivenOrigin(r,"center","center",t,e):new fabric.Point(this.left,this.top),s=new fabric.Point(l.x,l.y),this.angle&&(s=fabric.util.rotatePoint(s,r,-h(this.angle))),s.subtractEquals(i)},setPositionByOrigin:function(l,t,e){var i=this.translateToCenterPoint(l,t,e),s=this.translateToOriginPoint(i,this.originX,this.originY);this.set("left",s.x),this.set("top",s.y)},adjustPosition:function(l){var t,e,i=h(this.angle),s=this.getScaledWidth(),r=fabric.util.cos(i)*s,o=fabric.util.sin(i)*s;this.left+=r*((e="string"==typeof l?n[l]:l-.5)-(t="string"==typeof this.originX?n[this.originX]:this.originX-.5)),this.top+=o*(e-t),this.setCoords(),this.originX=l},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var l=this.getCenterPoint();this.originX="center",this.originY="center",this.left=l.x,this.top=l.y},_resetOrigin:function(){var l=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=l.x,this.top=l.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){var h=fabric.util,n=h.degreesToRadians,a=h.multiplyTransformMatrices,l=h.transformPoint;h.object.extend(fabric.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(t,e){return e?t?this.calcACoords():this.calcLineCoords():(this.aCoords&&this.lineCoords||this.setCoords(!0),t?this.aCoords:this.lineCoords)},getCoords:function(t,e){return i=this._getCoords(t,e),[new fabric.Point(i.tl.x,i.tl.y),new fabric.Point(i.tr.x,i.tr.y),new fabric.Point(i.br.x,i.br.y),new fabric.Point(i.bl.x,i.bl.y)];var i},intersectsWithRect:function(t,e,i,s){var r=this.getCoords(i,s);return"Intersection"===fabric.Intersection.intersectPolygonRectangle(r,t,e).status},intersectsWithObject:function(t,e,i){return"Intersection"===fabric.Intersection.intersectPolygonPolygon(this.getCoords(e,i),t.getCoords(e,i)).status||t.isContainedWithinObject(this,e,i)||this.isContainedWithinObject(t,e,i)},isContainedWithinObject:function(t,e,i){for(var s=this.getCoords(e,i),o=0,f=t._getImageLines(e?t.aCoords:t.lineCoords);o<4;o++)if(!t.containsPoint(s[o],f))return!1;return!0},isContainedWithinRect:function(t,e,i,s){var r=this.getBoundingRect(i,s);return r.left>=t.x&&r.left+r.width<=e.x&&r.top>=t.y&&r.top+r.height<=e.y},containsPoint:function(t,e,i,s){var r=this._getCoords(i,s),o=(e=e||this._getImageLines(r),this._findCrossPoints(t,e));return 0!==o&&o%2==1},isOnScreen:function(t){if(!this.canvas)return!1;var e=this.canvas.vptCoords.tl,i=this.canvas.vptCoords.br;return!!this.getCoords(!0,t).some(function(s){return s.x<=i.x&&s.x>=e.x&&s.y<=i.y&&s.y>=e.y})||!!this.intersectsWithRect(e,i,!0,t)||this._containsCenterOfCanvas(e,i,t)},_containsCenterOfCanvas:function(t,e,i){return!!this.containsPoint({x:(t.x+e.x)/2,y:(t.y+e.y)/2},null,!0,i)},isPartiallyOnScreen:function(t){if(!this.canvas)return!1;var e=this.canvas.vptCoords.tl,i=this.canvas.vptCoords.br;return!!this.intersectsWithRect(e,i,!0,t)||this.getCoords(!0,t).every(function(s){return(s.x>=i.x||s.x<=e.x)&&(s.y>=i.y||s.y<=e.y)})&&this._containsCenterOfCanvas(e,i,t)},_getImageLines:function(t){return{topline:{o:t.tl,d:t.tr},rightline:{o:t.tr,d:t.br},bottomline:{o:t.br,d:t.bl},leftline:{o:t.bl,d:t.tl}}},_findCrossPoints:function(t,e){var i,s,r,o=0;for(var f in e)if(!((r=e[f]).o.y<t.y&&r.d.y<t.y||r.o.y>=t.y&&r.d.y>=t.y||(r.o.x===r.d.x&&r.o.x>=t.x?s=r.o.x:(i=(r.d.y-r.o.y)/(r.d.x-r.o.x),s=-(t.y-0*t.x-(r.o.y-i*r.o.x))/(0-i)),s>=t.x&&(o+=1),2!==o)))break;return o},getBoundingRect:function(t,e){var i=this.getCoords(t,e);return h.makeBoundingBoxFromPoints(i)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(t){return Math.abs(t)<this.minScaleLimit?t<0?-this.minScaleLimit:this.minScaleLimit:0===t?1e-4:t},scale:function(t){return this._set("scaleX",t),this._set("scaleY",t),this.setCoords()},scaleToWidth:function(t,e){var i=this.getBoundingRect(e).width/this.getScaledWidth();return this.scale(t/this.width/i)},scaleToHeight:function(t,e){var i=this.getBoundingRect(e).height/this.getScaledHeight();return this.scale(t/this.height/i)},calcLineCoords:function(){var t=this.getViewportTransform(),e=this.padding,i=n(this.angle),s=h.cos(i)*e,r=h.sin(i)*e,o=s+r,f=s-r,m=this.calcACoords(),b={tl:l(m.tl,t),tr:l(m.tr,t),bl:l(m.bl,t),br:l(m.br,t)};return e&&(b.tl.x-=f,b.tl.y-=o,b.tr.x+=o,b.tr.y-=f,b.bl.x-=o,b.bl.y+=f,b.br.x+=f,b.br.y+=o),b},calcOCoords:function(){var t=this._calcRotateMatrix(),e=this._calcTranslateMatrix(),i=this.getViewportTransform(),s=a(i,e),r=a(s,t),o=(r=a(r,[1/i[0],0,0,1/i[3],0,0]),this._calculateCurrentDimensions()),f={};return this.forEachControl(function(m,b,C){f[b]=m.positionHandler(o,r,C)}),f},calcACoords:function(){var t=this._calcRotateMatrix(),e=this._calcTranslateMatrix(),i=a(e,t),s=this._getTransformedDimensions(),r=s.x/2,o=s.y/2;return{tl:l({x:-r,y:-o},i),tr:l({x:r,y:-o},i),bl:l({x:-r,y:o},i),br:l({x:r,y:o},i)}},setCoords:function(t){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),t||(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords()),this},_calcRotateMatrix:function(){return h.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var t=this.getCenterPoint();return[1,0,0,1,t.x,t.y]},transformMatrixKey:function(t){var e="_",i="";return!t&&this.group&&(i=this.group.transformMatrixKey(t)+e),i+this.top+e+this.left+e+this.scaleX+e+this.scaleY+e+this.skewX+e+this.skewY+e+this.angle+e+this.originX+e+this.originY+e+this.width+e+this.height+e+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(t){var e=this.calcOwnMatrix();if(t||!this.group)return e;var i=this.transformMatrixKey(t),s=this.matrixCache||(this.matrixCache={});return s.key===i?s.value:(this.group&&(e=a(this.group.calcTransformMatrix(!1),e)),s.key=i,s.value=e)},calcOwnMatrix:function(){var t=this.transformMatrixKey(!0),e=this.ownMatrixCache||(this.ownMatrixCache={});if(e.key===t)return e.value;var i=this._calcTranslateMatrix(),s={angle:this.angle,translateX:i[4],translateY:i[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return e.key=t,e.value=h.composeMatrix(s),e.value},_getNonTransformedDimensions:function(){var t=this.strokeWidth;return{x:this.width+t,y:this.height+t}},_getTransformedDimensions:function(t,e){void 0===t&&(t=this.skewX),void 0===e&&(e=this.skewY);var i,s,r,o=0===t&&0===e;if(this.strokeUniform?(s=this.width,r=this.height):(s=(i=this._getNonTransformedDimensions()).x,r=i.y),o)return this._finalizeDimensions(s*this.scaleX,r*this.scaleY);var f=h.sizeAfterTransform(s,r,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:t,skewY:e});return this._finalizeDimensions(f.x,f.y)},_finalizeDimensions:function(t,e){return this.strokeUniform?{x:t+this.strokeWidth,y:e+this.strokeWidth}:{x:t,y:e}},_calculateCurrentDimensions:function(){var t=this.getViewportTransform(),e=this._getTransformedDimensions();return l(e,t,!0).scalarAdd(2*this.padding)}})}(),fabric.util.object.extend(fabric.Object.prototype,{sendToBack:function(){return this.group?fabric.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?fabric.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(h){return this.group?fabric.StaticCanvas.prototype.sendBackwards.call(this.group,this,h):this.canvas&&this.canvas.sendBackwards(this,h),this},bringForward:function(h){return this.group?fabric.StaticCanvas.prototype.bringForward.call(this.group,this,h):this.canvas&&this.canvas.bringForward(this,h),this},moveTo:function(h){return this.group&&"activeSelection"!==this.group.type?fabric.StaticCanvas.prototype.moveTo.call(this.group,this,h):this.canvas&&this.canvas.moveTo(this,h),this}}),function(){function h(a,l){if(l){if(l.toLive)return a+": url(#SVGID_"+l.id+"); ";var t=new fabric.Color(l),e=a+": "+t.toRgb()+"; ",i=t.getAlpha();return 1!==i&&(e+=a+"-opacity: "+i.toString()+"; "),e}return a+": none; "}var n=fabric.util.toFixed;fabric.util.object.extend(fabric.Object.prototype,{getSvgStyles:function(a){var l=this.fillRule?this.fillRule:"nonzero",t=this.strokeWidth?this.strokeWidth:"0",e=this.strokeDashArray?this.strokeDashArray.join(" "):"none",i=this.strokeDashOffset?this.strokeDashOffset:"0",s=this.strokeLineCap?this.strokeLineCap:"butt",r=this.strokeLineJoin?this.strokeLineJoin:"miter",o=this.strokeMiterLimit?this.strokeMiterLimit:"4",f=void 0!==this.opacity?this.opacity:"1",m=this.visible?"":" visibility: hidden;",b=a?"":this.getSvgFilter(),C=h("fill",this.fill);return[h("stroke",this.stroke),"stroke-width: ",t,"; ","stroke-dasharray: ",e,"; ","stroke-linecap: ",s,"; ","stroke-dashoffset: ",i,"; ","stroke-linejoin: ",r,"; ","stroke-miterlimit: ",o,"; ",C,"fill-rule: ",l,"; ","opacity: ",f,";",b,m].join("")},getSvgSpanStyles:function(a,l){var t="; ",e=a.fontFamily?"font-family: "+(-1===a.fontFamily.indexOf("'")&&-1===a.fontFamily.indexOf('"')?"'"+a.fontFamily+"'":a.fontFamily)+t:"",i=a.strokeWidth?"stroke-width: "+a.strokeWidth+t:"",s=a.fontSize?"font-size: "+a.fontSize+"px"+t:"",r=a.fontStyle?"font-style: "+a.fontStyle+t:"",o=a.fontWeight?"font-weight: "+a.fontWeight+t:"",f=a.fill?h("fill",a.fill):"",m=a.stroke?h("stroke",a.stroke):"",b=this.getSvgTextDecoration(a);return b&&(b="text-decoration: "+b+t),[m,i,e,s,r,o,b,f,a.deltaY?"baseline-shift: "+-a.deltaY+"; ":"",l?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(a){return["overline","underline","line-through"].filter(function(l){return a[l.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(a,l){var t=a?this.calcTransformMatrix():this.calcOwnMatrix();return'transform="'+fabric.util.matrixToSVG(t)+(l||"")+'" '},_setSVGBg:function(a){if(this.backgroundColor){var l=fabric.Object.NUM_FRACTION_DIGITS;a.push("\t\t<rect ",this._getFillAttributes(this.backgroundColor),' x="',n(-this.width/2,l),'" y="',n(-this.height/2,l),'" width="',n(this.width,l),'" height="',n(this.height,l),'"></rect>\n')}},toSVG:function(a){return this._createBaseSVGMarkup(this._toSVG(a),{reviver:a})},toClipPathSVG:function(a){return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(a),{reviver:a})},_createBaseClipPathSVGMarkup:function(a,l){var t=(l=l||{}).reviver,i=[this.getSvgTransform(!0,l.additionalTransform||""),this.getSvgCommons()].join(""),s=a.indexOf("COMMON_PARTS");return a[s]=i,t?t(a.join("")):a.join("")},_createBaseSVGMarkup:function(a,l){var t,e,i=(l=l||{}).noStyle,s=l.reviver,r=i?"":'style="'+this.getSvgStyles()+'" ',o=l.withShadow?'style="'+this.getSvgFilter()+'" ':"",f=this.clipPath,m=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",b=f&&f.absolutePositioned,C=this.stroke,w=this.fill,E=this.shadow,M=[],N=a.indexOf("COMMON_PARTS"),H=l.additionalTransform;return f&&(f.clipPathId="CLIPPATH_"+fabric.Object.__uid++,e='<clipPath id="'+f.clipPathId+'" >\n'+f.toClipPathSVG(s)+"</clipPath>\n"),b&&M.push("<g ",o,this.getSvgCommons()," >\n"),M.push("<g ",this.getSvgTransform(!1),b?"":o+this.getSvgCommons()," >\n"),t=[r,m,i?"":this.addPaintOrder()," ",H?'transform="'+H+'" ':""].join(""),a[N]=t,w&&w.toLive&&M.push(w.toSVG(this)),C&&C.toLive&&M.push(C.toSVG(this)),E&&M.push(E.toSVG(this)),f&&M.push(e),M.push(a.join("")),M.push("</g>\n"),b&&M.push("</g>\n"),s?s(M.join("")):M.join("")},addPaintOrder:function(){return"fill"!==this.paintFirst?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var h=fabric.util.object.extend,n="stateProperties";function a(l,t,e){var i={};e.forEach(function(s){i[s]=l[s]}),h(l[t],i,!0)}fabric.util.object.extend(fabric.Object.prototype,{hasStateChanged:function(l){var t="_"+(l=l||n);return Object.keys(this[t]).length<this[l].length||!function e(i,s,r){if(i===s)return!0;if(Array.isArray(i)){if(!Array.isArray(s)||i.length!==s.length)return!1;for(var o=0,f=i.length;o<f;o++)if(!e(i[o],s[o]))return!1;return!0}if(i&&"object"==typeof i){var m,b=Object.keys(i);if(!s||"object"!=typeof s||!r&&b.length!==Object.keys(s).length)return!1;for(o=0,f=b.length;o<f;o++)if("canvas"!==(m=b[o])&&"group"!==m&&!e(i[m],s[m]))return!1;return!0}}(this[t],this,!0)},saveState:function(l){var t=l&&l.propertySet||n,e="_"+t;return this[e]?(a(this,e,this[t]),l&&l.stateProperties&&a(this,e,l.stateProperties),this):this.setupState(l)},setupState:function(l){var t=(l=l||{}).propertySet||n;return this["_"+(l.propertySet=t)]={},this.saveState(l),this}})}(),function(){var h=fabric.util.degreesToRadians;fabric.util.object.extend(fabric.Object.prototype,{_findTargetCorner:function(n,a){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var l,t,e,i=n.x,s=n.y,r=Object.keys(this.oCoords),o=r.length-1;for(this.__corner=0;0<=o;o--)if(this.isControlVisible(e=r[o])&&(t=this._getImageLines(a?this.oCoords[e].touchCorner:this.oCoords[e].corner),0!==(l=this._findCrossPoints({x:i,y:s},t))&&l%2==1))return this.__corner=e;return!1},forEachControl:function(n){for(var a in this.controls)n(this.controls[a],a,this)},_setCornerCoords:function(){var n=this.oCoords;for(var a in n){var l=this.controls[a];n[a].corner=l.calcCornerCoords(this.angle,this.cornerSize,n[a].x,n[a].y,!1),n[a].touchCorner=l.calcCornerCoords(this.angle,this.touchCornerSize,n[a].x,n[a].y,!0)}},drawSelectionBackground:function(n){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;n.save();var a=this.getCenterPoint(),l=this._calculateCurrentDimensions(),t=this.canvas.viewportTransform;return n.translate(a.x,a.y),n.scale(1/t[0],1/t[3]),n.rotate(h(this.angle)),n.fillStyle=this.selectionBackgroundColor,n.fillRect(-l.x/2,-l.y/2,l.x,l.y),n.restore(),this},drawBorders:function(n,a){a=a||{};var l=this._calculateCurrentDimensions(),t=this.borderScaleFactor,e=l.x+t,i=l.y+t,s=void 0!==a.hasControls?a.hasControls:this.hasControls,r=!1;return n.save(),n.strokeStyle=a.borderColor||this.borderColor,this._setLineDash(n,a.borderDashArray||this.borderDashArray),n.strokeRect(-e/2,-i/2,e,i),s&&(n.beginPath(),this.forEachControl(function(o,f,m){o.withConnection&&o.getVisibility(m,f)&&(r=!0,n.moveTo(o.x*e,o.y*i),n.lineTo(o.x*e+o.offsetX,o.y*i+o.offsetY))}),r&&n.stroke()),n.restore(),this},drawBordersInGroup:function(n,a,l){l=l||{};var t=fabric.util.sizeAfterTransform(this.width,this.height,a),e=this.strokeWidth,i=this.strokeUniform,s=this.borderScaleFactor,r=t.x+e*(i?this.canvas.getZoom():a.scaleX)+s,o=t.y+e*(i?this.canvas.getZoom():a.scaleY)+s;return n.save(),this._setLineDash(n,l.borderDashArray||this.borderDashArray),n.strokeStyle=l.borderColor||this.borderColor,n.strokeRect(-r/2,-o/2,r,o),n.restore(),this},drawControls:function(n,a){a=a||{},n.save();var l,t,e=this.canvas.getRetinaScaling();return n.setTransform(e,0,0,e,0,0),n.strokeStyle=n.fillStyle=a.cornerColor||this.cornerColor,this.transparentCorners||(n.strokeStyle=a.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(n,a.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(l=this.group.calcTransformMatrix()),this.forEachControl(function(i,s,r){t=r.oCoords[s],i.getVisibility(r,s)&&(l&&(t=fabric.util.transformPoint(t,l)),i.render(n,t.x,t.y,a,r))}),n.restore(),this},isControlVisible:function(n){return this.controls[n]&&this.controls[n].getVisibility(this,n)},setControlVisible:function(n,a){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[n]=a,this},setControlsVisibility:function(n){for(var a in n||(n={}),n)this.setControlVisible(a,n[a]);return this},onDeselect:function(){},onSelect:function(){}})}(),fabric.util.object.extend(fabric.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(h,n){var a=function(){},l=(n=n||{}).onComplete||a,t=n.onChange||a,e=this;return fabric.util.animate({target:this,startValue:h.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(i){h.set("left",i),e.requestRenderAll(),t()},onComplete:function(){h.setCoords(),l()}})},fxCenterObjectV:function(h,n){var a=function(){},l=(n=n||{}).onComplete||a,t=n.onChange||a,e=this;return fabric.util.animate({target:this,startValue:h.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(i){h.set("top",i),e.requestRenderAll(),t()},onComplete:function(){h.setCoords(),l()}})},fxRemove:function(h,n){var a=function(){},l=(n=n||{}).onComplete||a,t=n.onChange||a,e=this;return fabric.util.animate({target:this,startValue:h.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(i){h.set("opacity",i),e.requestRenderAll(),t()},onComplete:function(){e.remove(h),l()}})}}),fabric.util.object.extend(fabric.Object.prototype,{animate:function(){if(arguments[0]&&"object"==typeof arguments[0]){var h,a=[],l=[];for(h in arguments[0])a.push(h);for(var t=0,e=a.length;t<e;t++)l.push(this._animate(h=a[t],arguments[0][h],arguments[1],t!==e-1));return l}return this._animate.apply(this,arguments)},_animate:function(h,n,a,l){var t,e=this;n=n.toString(),a=a?fabric.util.object.clone(a):{},~h.indexOf(".")&&(t=h.split("."));var i=-1<e.colorProperties.indexOf(h)||t&&-1<e.colorProperties.indexOf(t[1]),s=t?this.get(t[0])[t[1]]:this.get(h);"from"in a||(a.from=s),i||(n=~n.indexOf("=")?s+parseFloat(n.replace("=","")):parseFloat(n));var r={target:this,startValue:a.from,endValue:n,byValue:a.by,easing:a.easing,duration:a.duration,abort:a.abort&&function(o,f,m){return a.abort.call(e,o,f,m)},onChange:function(o,f,m){t?e[t[0]][t[1]]=o:e.set(h,o),l||a.onChange&&a.onChange(o,f,m)},onComplete:function(o,f,m){l||(e.setCoords(),a.onComplete&&a.onComplete(o,f,m))}};return i?fabric.util.animateColor(r.startValue,r.endValue,r.duration,r):fabric.util.animate(r)}}),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.util.object.extend,l=n.util.object.clone,t={x1:1,x2:1,y1:1,y2:1};function e(i,s){var r=i.origin,o=i.axis1,f=i.axis2,m=i.dimension,b=s.nearest,C=s.center,w=s.farthest;return function(){switch(this.get(r)){case b:return Math.min(this.get(o),this.get(f));case C:return Math.min(this.get(o),this.get(f))+.5*this.get(m);case w:return Math.max(this.get(o),this.get(f))}}}n.Line?n.warn("fabric.Line is already defined"):(n.Line=n.util.createClass(n.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:n.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(i,s){i||(i=[0,0,0,0]),this.callSuper("initialize",s),this.set("x1",i[0]),this.set("y1",i[1]),this.set("x2",i[2]),this.set("y2",i[3]),this._setWidthHeight(s)},_setWidthHeight:function(i){i||(i={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in i?i.left:this._getLeftToOriginX(),this.top="top"in i?i.top:this._getTopToOriginY()},_set:function(i,s){return this.callSuper("_set",i,s),void 0!==t[i]&&this._setWidthHeight(),this},_getLeftToOriginX:e({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:e({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(i){i.beginPath();var s=this.calcLinePoints();i.moveTo(s.x1,s.y1),i.lineTo(s.x2,s.y2),i.lineWidth=this.strokeWidth;var r=i.strokeStyle;i.strokeStyle=this.stroke||i.fillStyle,this.stroke&&this._renderStroke(i),i.strokeStyle=r},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(i){return a(this.callSuper("toObject",i),this.calcLinePoints())},_getNonTransformedDimensions:function(){var i=this.callSuper("_getNonTransformedDimensions");return"butt"===this.strokeLineCap&&(0===this.width&&(i.y-=this.strokeWidth),0===this.height&&(i.x-=this.strokeWidth)),i},calcLinePoints:function(){var i=this.x1<=this.x2?-1:1,s=this.y1<=this.y2?-1:1;return{x1:i*this.width*.5,x2:i*this.width*-.5,y1:s*this.height*.5,y2:s*this.height*-.5}},_toSVG:function(){var i=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',i.x1,'" y1="',i.y1,'" x2="',i.x2,'" y2="',i.y2,'" />\n']}}),n.Line.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),n.Line.fromElement=function(i,s,r){r=r||{};var o=n.parseAttributes(i,n.Line.ATTRIBUTE_NAMES);s(new n.Line([o.x1||0,o.y1||0,o.x2||0,o.y2||0],a(o,r)))},n.Line.fromObject=function(i,s){var r=l(i,!0);r.points=[i.x1,i.y1,i.x2,i.y2],n.Object._fromObject("Line",r,function(o){delete o.points,s&&s(o)},"points")})}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.util.degreesToRadians;n.Circle?n.warn("fabric.Circle is already defined."):(n.Circle=n.util.createClass(n.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:n.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(l,t){return this.callSuper("_set",l,t),"radius"===l&&this.setRadius(t),this},toObject:function(l){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(l))},_toSVG:function(){var l,t=(this.endAngle-this.startAngle)%360;if(0===t)l=["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',this.radius,'" />\n'];else{var e=a(this.startAngle),i=a(this.endAngle),s=this.radius;l=['<path d="M '+n.util.cos(e)*s+" "+n.util.sin(e)*s," A "+s+" "+s," 0 ",+(180<t?"1":"0")+" 1"," "+n.util.cos(i)*s+" "+n.util.sin(i)*s,'" ',"COMMON_PARTS"," />\n"]}return l},_render:function(l){l.beginPath(),l.arc(0,0,this.radius,a(this.startAngle),a(this.endAngle),!1),this._renderPaintInOrder(l)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(l){return this.radius=l,this.set("width",2*l).set("height",2*l)}}),n.Circle.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),n.Circle.fromElement=function(l,t){var e,i=n.parseAttributes(l,n.Circle.ATTRIBUTE_NAMES);if(!("radius"in(e=i)&&0<=e.radius))throw new Error("value of `r` attribute is required and can not be negative");i.left=(i.left||0)-i.radius,i.top=(i.top||0)-i.radius,t(new n.Circle(i))},n.Circle.fromObject=function(l,t){n.Object._fromObject("Circle",l,t)})}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={});n.Triangle?n.warn("fabric.Triangle is already defined"):(n.Triangle=n.util.createClass(n.Object,{type:"triangle",width:100,height:100,_render:function(a){var l=this.width/2,t=this.height/2;a.beginPath(),a.moveTo(-l,t),a.lineTo(0,-t),a.lineTo(l,t),a.closePath(),this._renderPaintInOrder(a)},_toSVG:function(){var a=this.width/2,l=this.height/2;return["<polygon ","COMMON_PARTS",'points="',[-a+" "+l,"0 "+-l,a+" "+l].join(","),'" />']}}),n.Triangle.fromObject=function(a,l){return n.Object._fromObject("Triangle",a,l)})}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=2*Math.PI;n.Ellipse?n.warn("fabric.Ellipse is already defined."):(n.Ellipse=n.util.createClass(n.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:n.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(l){this.callSuper("initialize",l),this.set("rx",l&&l.rx||0),this.set("ry",l&&l.ry||0)},_set:function(l,t){switch(this.callSuper("_set",l,t),l){case"rx":this.rx=t,this.set("width",2*t);break;case"ry":this.ry=t,this.set("height",2*t)}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(l){return this.callSuper("toObject",["rx","ry"].concat(l))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,'" />\n']},_render:function(l){l.beginPath(),l.save(),l.transform(1,0,0,this.ry/this.rx,0,0),l.arc(0,0,this.rx,0,a,!1),l.restore(),this._renderPaintInOrder(l)}}),n.Ellipse.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),n.Ellipse.fromElement=function(l,t){var e=n.parseAttributes(l,n.Ellipse.ATTRIBUTE_NAMES);e.left=(e.left||0)-e.rx,e.top=(e.top||0)-e.ry,t(new n.Ellipse(e))},n.Ellipse.fromObject=function(l,t){n.Object._fromObject("Ellipse",l,t)})}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.util.object.extend;n.Rect?n.warn("fabric.Rect is already defined"):(n.Rect=n.util.createClass(n.Object,{stateProperties:n.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:n.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(l){this.callSuper("initialize",l),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(l){var t=this.rx?Math.min(this.rx,this.width/2):0,e=this.ry?Math.min(this.ry,this.height/2):0,i=this.width,s=this.height,r=-this.width/2,o=-this.height/2,f=0!==t||0!==e,m=.4477152502;l.beginPath(),l.moveTo(r+t,o),l.lineTo(r+i-t,o),f&&l.bezierCurveTo(r+i-m*t,o,r+i,o+m*e,r+i,o+e),l.lineTo(r+i,o+s-e),f&&l.bezierCurveTo(r+i,o+s-m*e,r+i-m*t,o+s,r+i-t,o+s),l.lineTo(r+t,o+s),f&&l.bezierCurveTo(r+m*t,o+s,r,o+s-m*e,r,o+s-e),l.lineTo(r,o+e),f&&l.bezierCurveTo(r,o+m*e,r+m*t,o,r+t,o),l.closePath(),this._renderPaintInOrder(l)},toObject:function(l){return this.callSuper("toObject",["rx","ry"].concat(l))},_toSVG:function(){return["<rect ","COMMON_PARTS",'x="',-this.width/2,'" y="',-this.height/2,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,'" />\n']}}),n.Rect.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),n.Rect.fromElement=function(l,t,e){if(!l)return t(null);e=e||{};var i=n.parseAttributes(l,n.Rect.ATTRIBUTE_NAMES);i.left=i.left||0,i.top=i.top||0,i.height=i.height||0,i.width=i.width||0;var s=new n.Rect(a(e?n.util.object.clone(e):{},i));s.visible=s.visible&&0<s.width&&0<s.height,t(s)},n.Rect.fromObject=function(l,t){return n.Object._fromObject("Rect",l,t)})}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.util.object.extend,l=n.util.array.min,t=n.util.array.max,e=n.util.toFixed,i=n.util.projectStrokeOnPoints;n.Polyline?n.warn("fabric.Polyline is already defined"):(n.Polyline=n.util.createClass(n.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:n.Object.prototype.cacheProperties.concat("points"),initialize:function(s,r){r=r||{},this.points=s||[],this.callSuper("initialize",r),this._setPositionDimensions(r)},_projectStrokeOnPoints:function(){return i(this.points,this,!0)},_setPositionDimensions:function(s){var r,o=this._calcDimensions(s),f=this.exactBoundingBox?this.strokeWidth:0;this.width=o.width-f,this.height=o.height-f,s.fromSVG||(r=this.translateToGivenOrigin({x:o.left-this.strokeWidth/2+f/2,y:o.top-this.strokeWidth/2+f/2},"left","top",this.originX,this.originY)),void 0===s.left&&(this.left=s.fromSVG?o.left:r.x),void 0===s.top&&(this.top=s.fromSVG?o.top:r.y),this.pathOffset={x:o.left+this.width/2+f/2,y:o.top+this.height/2+f/2}},_calcDimensions:function(){var s=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,r=l(s,"x")||0,o=l(s,"y")||0;return{left:r,top:o,width:(t(s,"x")||0)-r,height:(t(s,"y")||0)-o}},toObject:function(s){return a(this.callSuper("toObject",s),{points:this.points.concat()})},_toSVG:function(){for(var s=[],r=this.pathOffset.x,o=this.pathOffset.y,f=n.Object.NUM_FRACTION_DIGITS,m=0,b=this.points.length;m<b;m++)s.push(e(this.points[m].x-r,f),",",e(this.points[m].y-o,f)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',s.join(""),'" />\n']},commonRender:function(s){var r,o=this.points.length,f=this.pathOffset.x,m=this.pathOffset.y;if(!o||isNaN(this.points[o-1].y))return!1;s.beginPath(),s.moveTo(this.points[0].x-f,this.points[0].y-m);for(var b=0;b<o;b++)s.lineTo((r=this.points[b]).x-f,r.y-m);return!0},_render:function(s){this.commonRender(s)&&this._renderPaintInOrder(s)},complexity:function(){return this.get("points").length}}),n.Polyline.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat(),n.Polyline.fromElementGenerator=function(s){return function(r,o,f){if(!r)return o(null);f||(f={});var m=n.parsePointsAttribute(r.getAttribute("points")),b=n.parseAttributes(r,n[s].ATTRIBUTE_NAMES);b.fromSVG=!0,o(new n[s](m,a(b,f)))}},n.Polyline.fromElement=n.Polyline.fromElementGenerator("Polyline"),n.Polyline.fromObject=function(s,r){return n.Object._fromObject("Polyline",s,r,"points")})}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.util.projectStrokeOnPoints;n.Polygon?n.warn("fabric.Polygon is already defined"):(n.Polygon=n.util.createClass(n.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return a(this.points,this)},_render:function(l){this.commonRender(l)&&(l.closePath(),this._renderPaintInOrder(l))}}),n.Polygon.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat(),n.Polygon.fromElement=n.Polyline.fromElementGenerator("Polygon"),n.Polygon.fromObject=function(l,t){n.Object._fromObject("Polygon",l,t,"points")})}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.util.array.min,l=n.util.array.max,t=n.util.object.extend,e=n.util.object.clone,i=n.util.toFixed;n.Path?n.warn("fabric.Path is already defined"):(n.Path=n.util.createClass(n.Object,{type:"path",path:null,cacheProperties:n.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:n.Object.prototype.stateProperties.concat("path"),initialize:function(s,r){delete(r=e(r||{})).path,this.callSuper("initialize",r),this._setPath(s||[],r)},_setPath:function(s,r){this.path=n.util.makePathSimpler(Array.isArray(s)?s:n.util.parsePath(s)),n.Polyline.prototype._setPositionDimensions.call(this,r||{})},_renderPathCommands:function(s){var r,o=0,f=0,m=0,b=0,E=-this.pathOffset.x,M=-this.pathOffset.y;s.beginPath();for(var N=0,H=this.path.length;N<H;++N)switch((r=this.path[N])[0]){case"L":s.lineTo((m=r[1])+E,(b=r[2])+M);break;case"M":o=m=r[1],f=b=r[2],s.moveTo(m+E,b+M);break;case"C":s.bezierCurveTo(r[1]+E,r[2]+M,r[3]+E,r[4]+M,(m=r[5])+E,(b=r[6])+M);break;case"Q":s.quadraticCurveTo(r[1]+E,r[2]+M,r[3]+E,r[4]+M),m=r[3],b=r[4];break;case"z":case"Z":m=o,b=f,s.closePath()}},_render:function(s){this._renderPathCommands(s),this._renderPaintInOrder(s)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(s){return t(this.callSuper("toObject",s),{path:this.path.map(function(r){return r.slice()})})},toDatalessObject:function(s){var r=this.toObject(["sourcePath"].concat(s));return r.sourcePath&&delete r.path,r},_toSVG:function(){return["<path ","COMMON_PARTS",'d="',n.util.joinPath(this.path),'" stroke-linecap="round" ',"/>\n"]},_getOffsetTransform:function(){var s=n.Object.NUM_FRACTION_DIGITS;return" translate("+i(-this.pathOffset.x,s)+", "+i(-this.pathOffset.y,s)+")"},toClipPathSVG:function(s){var r=this._getOffsetTransform();return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:s,additionalTransform:r})},toSVG:function(s){var r=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:s,additionalTransform:r})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var s,r,o=[],f=[],m=0,b=0,C=0,w=0,E=0,M=this.path.length;E<M;++E){switch((s=this.path[E])[0]){case"L":C=s[1],w=s[2],r=[];break;case"M":m=C=s[1],b=w=s[2],r=[];break;case"C":r=n.util.getBoundsOfCurve(C,w,s[1],s[2],s[3],s[4],s[5],s[6]),C=s[5],w=s[6];break;case"Q":r=n.util.getBoundsOfCurve(C,w,s[1],s[2],s[1],s[2],s[3],s[4]),C=s[3],w=s[4];break;case"z":case"Z":C=m,w=b}r.forEach(function(nt){o.push(nt.x),f.push(nt.y)}),o.push(C),f.push(w)}var N=a(o)||0,H=a(f)||0;return{left:N,top:H,width:(l(o)||0)-N,height:(l(f)||0)-H}}}),n.Path.fromObject=function(s,r){"string"==typeof s.sourcePath?n.loadSVGFromURL(s.sourcePath,function(f){var m=f[0];m.setOptions(s),r&&r(m)}):n.Object._fromObject("Path",s,r,"path")},n.Path.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat(["d"]),n.Path.fromElement=function(s,r,o){var f=n.parseAttributes(s,n.Path.ATTRIBUTE_NAMES);f.fromSVG=!0,r(new n.Path(f.d,t(f,o)))})}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.util.array.min,l=n.util.array.max;n.Group||(n.Group=n.util.createClass(n.Object,n.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(t,e,i){e=e||{},this._objects=[],i&&this.callSuper("initialize",e),this._objects=t||[];for(var s=this._objects.length;s--;)this._objects[s].group=this;if(i)this._updateObjectsACoords();else{var r=e&&e.centerPoint;void 0!==e.originX&&(this.originX=e.originX),void 0!==e.originY&&(this.originY=e.originY),r||this._calcBounds(),this._updateObjectsCoords(r),delete e.centerPoint,this.callSuper("initialize",e)}this.setCoords()},_updateObjectsACoords:function(){for(var t=this._objects.length;t--;)this._objects[t].setCoords(!0)},_updateObjectsCoords:function(t){t=t||this.getCenterPoint();for(var e=this._objects.length;e--;)this._updateObjectCoords(this._objects[e],t)},_updateObjectCoords:function(t,e){t.set({left:t.left-e.x,top:t.top-e.y}),t.group=this,t.setCoords(!0)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(t){var e=!!this.group;return this._restoreObjectsState(),n.util.resetObjectTransform(this),t&&(e&&n.util.removeTransformFromObject(t,this.group.calcTransformMatrix()),this._objects.push(t),t.group=this,t._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,e?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(t){return this._restoreObjectsState(),n.util.resetObjectTransform(this),this.remove(t),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(t){this.dirty=!0,t.group=this,t._set("canvas",this.canvas)},_onObjectRemoved:function(t){this.dirty=!0,delete t.group},_set:function(t,e){var i=this._objects.length;if(this.useSetOnGroup)for(;i--;)this._objects[i].setOnGroup(t,e);if("canvas"===t)for(;i--;)this._objects[i]._set(t,e);n.Object.prototype._set.call(this,t,e)},toObject:function(t){var e=this.includeDefaultValues,i=this._objects.filter(function(r){return!r.excludeFromExport}).map(function(r){var o=r.includeDefaultValues;r.includeDefaultValues=e;var f=r.toObject(t);return r.includeDefaultValues=o,f}),s=n.Object.prototype.toObject.call(this,t);return s.objects=i,s},toDatalessObject:function(t){var e,i=this.sourcePath;if(i)e=i;else{var s=this.includeDefaultValues;e=this._objects.map(function(o){var f=o.includeDefaultValues;o.includeDefaultValues=s;var m=o.toDatalessObject(t);return o.includeDefaultValues=f,m})}var r=n.Object.prototype.toDatalessObject.call(this,t);return r.objects=e,r},render:function(t){this._transformDone=!0,this.callSuper("render",t),this._transformDone=!1},shouldCache:function(){var t=n.Object.prototype.shouldCache.call(this);if(t)for(var e=0,i=this._objects.length;e<i;e++)if(this._objects[e].willDrawShadow())return this.ownCaching=!1;return t},willDrawShadow:function(){if(n.Object.prototype.willDrawShadow.call(this))return!0;for(var t=0,e=this._objects.length;t<e;t++)if(this._objects[t].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(t){for(var e=0,i=this._objects.length;e<i;e++)this._objects[e].render(t);this._drawClipPath(t,this.clipPath)},isCacheDirty:function(t){if(this.callSuper("isCacheDirty",t))return!0;if(!this.statefullCache)return!1;for(var e=0,i=this._objects.length;e<i;e++)if(this._objects[e].isCacheDirty(!0)){if(this._cacheCanvas){var s=this.cacheWidth/this.zoomX,r=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-s/2,-r/2,s,r)}return!0}return!1},_restoreObjectsState:function(){var t=this.calcOwnMatrix();return this._objects.forEach(function(e){n.util.addTransformToObject(e,t),delete e.group,e.setCoords()}),this},destroy:function(){return this._objects.forEach(function(t){t.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(t){t.dispose&&t.dispose()}),this._objects=[]},toActiveSelection:function(){if(this.canvas){var t=this._objects,e=this.canvas;this._objects=[];var i=this.toObject();delete i.objects;var s=new n.ActiveSelection([]);return s.set(i),s.type="activeSelection",e.remove(this),t.forEach(function(r){r.group=s,r.dirty=!0,e.add(r)}),s.canvas=e,s._objects=t,(e._activeObject=s).setCoords(),s}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){return this.forEachObject(function(t){t.setCoords(!0)}),this},_calcBounds:function(t){for(var e,i,s,r,o=[],f=[],m=["tr","br","bl","tl"],b=0,C=this._objects.length,w=m.length;b<C;++b){for(s=(e=this._objects[b]).calcACoords(),r=0;r<w;r++)o.push(s[i=m[r]].x),f.push(s[i].y);e.aCoords=s}this._getBounds(o,f,t)},_getBounds:function(t,e,i){var s=new n.Point(a(t),a(e)),r=new n.Point(l(t),l(e)),o=s.y||0,f=s.x||0,b=r.y-s.y||0;this.width=r.x-s.x||0,this.height=b,i||this.setPositionByOrigin({x:f,y:o},"left","top")},_toSVG:function(t){for(var e=["<g ","COMMON_PARTS"," >\n"],i=0,s=this._objects.length;i<s;i++)e.push("\t\t",this._objects[i].toSVG(t));return e.push("</g>\n"),e},getSvgStyles:function(){var e=this.visible?"":" visibility: hidden;";return[void 0!==this.opacity&&1!==this.opacity?"opacity: "+this.opacity+";":"",this.getSvgFilter(),e].join("")},toClipPathSVG:function(t){for(var e=[],i=0,s=this._objects.length;i<s;i++)e.push("\t",this._objects[i].toClipPathSVG(t));return this._createBaseClipPathSVGMarkup(e,{reviver:t})}}),n.Group.fromObject=function(t,e){var i=t.objects,s=n.util.object.clone(t,!0);delete s.objects,"string"!=typeof i?n.util.enlivenObjects(i,function(r){var o=n.util.object.clone(t,!0);delete o.objects,n.util.enlivenObjectEnlivables(t,o,function(){e&&e(new n.Group(r,o,!0))})}):n.loadSVGFromURL(i,function(r){var o=n.util.groupSVGElements(r,t,i);o.set(s),e&&e(o)})})}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={});n.ActiveSelection||(n.ActiveSelection=n.util.createClass(n.Group,{type:"activeSelection",initialize:function(a,l){l=l||{},this._objects=a||[];for(var t=this._objects.length;t--;)this._objects[t].group=this;l.originX&&(this.originX=l.originX),l.originY&&(this.originY=l.originY),this._calcBounds(),this._updateObjectsCoords(),n.Object.prototype.initialize.call(this,l),this.setCoords()},toGroup:function(){var a=this._objects.concat();this._objects=[];var l=n.Object.prototype.toObject.call(this),t=new n.Group([]);if(delete l.type,t.set(l),a.forEach(function(i){i.canvas.remove(i),i.group=t}),t._objects=a,!this.canvas)return t;var e=this.canvas;return e.add(t),(e._activeObject=t).setCoords(),t},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(a,l,t){a.save(),a.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",a,l),void 0===(t=t||{}).hasControls&&(t.hasControls=!1),t.forActiveSelection=!0;for(var e=0,i=this._objects.length;e<i;e++)this._objects[e]._renderControls(a,t);a.restore()}}),n.ActiveSelection.fromObject=function(a,l){n.util.enlivenObjects(a.objects,function(t){delete a.objects,l&&l(new n.ActiveSelection(t,a,!0))})})}(typeof exports<"u"?exports:this),function(h){"use strict";var n=fabric.util.object.extend;h.fabric||(h.fabric={}),h.fabric.Image?fabric.warn("fabric.Image is already defined."):(fabric.Image=fabric.util.createClass(fabric.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:fabric.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:fabric.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(a,l){l||(l={}),this.filters=[],this.cacheKey="texture"+fabric.Object.__uid++,this.callSuper("initialize",l),this._initElement(a,l)},getElement:function(){return this._element||{}},setElement:function(a,l){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=a,this._originalElement=a,this._initConfig(l),0!==this.filters.length&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(a){var l=fabric.filterBackend;l&&l.evictCachesForKey&&l.evictCachesForKey(a)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(function(a){fabric.util.cleanUpJsdomNode(this[a]),this[a]=void 0}.bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var a=this.getElement();return{width:a.naturalWidth||a.width,height:a.naturalHeight||a.height}},_stroke:function(a){if(this.stroke&&0!==this.strokeWidth){var l=this.width/2,t=this.height/2;a.beginPath(),a.moveTo(-l,-t),a.lineTo(l,-t),a.lineTo(l,t),a.lineTo(-l,t),a.lineTo(-l,-t),a.closePath()}},toObject:function(a){var l=[];this.filters.forEach(function(e){e&&l.push(e.toObject())});var t=n(this.callSuper("toObject",["cropX","cropY"].concat(a)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:l});return this.resizeFilter&&(t.resizeFilter=this.resizeFilter.toObject()),t},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var a,l=[],t=[],e=this._element,i=-this.width/2,s=-this.height/2,r="",o="";if(!e)return[];if(this.hasCrop()){var f=fabric.Object.__uid++;l.push('<clipPath id="imageCrop_'+f+'">\n','\t<rect x="'+i+'" y="'+s+'" width="'+this.width+'" height="'+this.height+'" />\n',"</clipPath>\n"),r=' clip-path="url(#imageCrop_'+f+')" '}if(this.imageSmoothing||(o='" image-rendering="optimizeSpeed'),t.push("\t<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',i-this.cropX,'" y="',s-this.cropY,'" width="',e.width||e.naturalWidth,'" height="',e.height||e.height,o,'"',r,"></image>\n"),this.stroke||this.strokeDashArray){var m=this.fill;this.fill=null,a=["\t<rect ",'x="',i,'" y="',s,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'"/>\n'],this.fill=m}return"fill"!==this.paintFirst?l.concat(a,t):l.concat(t,a)},getSrc:function(a){var l=a?this._element:this._originalElement;return l?l.toDataURL?l.toDataURL():this.srcFromAttribute?l.getAttribute("src"):l.src:this.src||""},setSrc:function(a,l,t){return fabric.util.loadImage(a,function(e,i){this.setElement(e,t),this._setWidthHeight(),l&&l(this,i)},this,t&&t.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var a=this.resizeFilter,l=this.minimumScaleTrigger,t=this.getTotalObjectScaling(),e=t.scaleX,i=t.scaleY,s=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!a||l<e&&l<i)return this._element=s,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=e,void(this._lastScaleY=i);fabric.filterBackend||(fabric.filterBackend=fabric.initFilterBackend());var r=fabric.util.createCanvasElement(),o=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,f=s.width,m=s.height;r.width=f,r.height=m,this._element=r,this._lastScaleX=a.scaleX=e,this._lastScaleY=a.scaleY=i,fabric.filterBackend.applyFilters([a],s,f,m,this._element,o),this._filterScalingX=r.width/this._originalElement.width,this._filterScalingY=r.height/this._originalElement.height},applyFilters:function(a){if(a=(a=a||this.filters||[]).filter(function(s){return s&&!s.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),0===a.length)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var l=this._originalElement,t=l.naturalWidth||l.width,e=l.naturalHeight||l.height;if(this._element===this._originalElement){var i=fabric.util.createCanvasElement();i.width=t,i.height=e,this._element=i,this._filteredEl=i}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,t,e),this._lastScaleX=1,this._lastScaleY=1;return fabric.filterBackend||(fabric.filterBackend=fabric.initFilterBackend()),fabric.filterBackend.applyFilters(a,this._originalElement,t,e,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(a){fabric.util.setImageSmoothing(a,this.imageSmoothing),!0!==this.isMoving&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(a),this._renderPaintInOrder(a)},drawCacheOnCanvas:function(a){fabric.util.setImageSmoothing(a,this.imageSmoothing),fabric.Object.prototype.drawCacheOnCanvas.call(this,a)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(a){var l=this._element;if(l){var t=this._filterScalingX,e=this._filterScalingY,i=this.width,s=this.height,r=Math.min,o=Math.max,f=o(this.cropX,0),m=o(this.cropY,0),b=l.naturalWidth||l.width,C=l.naturalHeight||l.height,w=f*t,E=m*e,M=r(i*t,b-w),N=r(s*e,C-E),H=-i/2,nt=-s/2,st=r(i,b/t-f),p=r(s,C/e-m);l&&a.drawImage(l,w,E,M,N,H,nt,st,p)}},_needsResize:function(){var a=this.getTotalObjectScaling();return a.scaleX!==this._lastScaleX||a.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(a,l){this.setElement(fabric.util.getById(a),l),fabric.util.addClass(this.getElement(),fabric.Image.CSS_CANVAS)},_initConfig:function(a){a||(a={}),this.setOptions(a),this._setWidthHeight(a)},_initFilters:function(a,l){a&&a.length?fabric.util.enlivenObjects(a,function(t){l&&l(t)},"fabric.Image.filters"):l&&l()},_setWidthHeight:function(a){a||(a={});var l=this.getElement();this.width=a.width||l.naturalWidth||l.width||0,this.height=a.height||l.naturalHeight||l.height||0},parsePreserveAspectRatioAttribute:function(){var a,l=fabric.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),t=this._element.width,e=this._element.height,i=1,s=1,r=0,o=0,f=0,m=0,b=this.width,C=this.height,w={width:b,height:C};return!l||"none"===l.alignX&&"none"===l.alignY?(i=b/t,s=C/e):("meet"===l.meetOrSlice&&(a=(b-t*(i=s=fabric.util.findScaleToFit(this._element,w)))/2,"Min"===l.alignX&&(r=-a),"Max"===l.alignX&&(r=a),a=(C-e*s)/2,"Min"===l.alignY&&(o=-a),"Max"===l.alignY&&(o=a)),"slice"===l.meetOrSlice&&(a=t-b/(i=s=fabric.util.findScaleToCover(this._element,w)),"Mid"===l.alignX&&(f=a/2),"Max"===l.alignX&&(f=a),a=e-C/s,"Mid"===l.alignY&&(m=a/2),"Max"===l.alignY&&(m=a),t=b/i,e=C/s)),{width:t,height:e,scaleX:i,scaleY:s,offsetLeft:r,offsetTop:o,cropX:f,cropY:m}}}),fabric.Image.CSS_CANVAS="canvas-img",fabric.Image.prototype.getSvgSrc=fabric.Image.prototype.getSrc,fabric.Image.fromObject=function(a,l){var t=fabric.util.object.clone(a);fabric.util.loadImage(t.src,function(e,i){i?l&&l(null,!0):fabric.Image.prototype._initFilters.call(t,t.filters,function(s){t.filters=s||[],fabric.Image.prototype._initFilters.call(t,[t.resizeFilter],function(r){t.resizeFilter=r[0],fabric.util.enlivenObjectEnlivables(t,t,function(){var o=new fabric.Image(e,t);l(o,!1)})})})},null,t.crossOrigin)},fabric.Image.fromURL=function(a,l,t){fabric.util.loadImage(a,function(e,i){l&&l(new fabric.Image(e,t),i)},null,t&&t.crossOrigin)},fabric.Image.ATTRIBUTE_NAMES=fabric.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),fabric.Image.fromElement=function(a,l,t){var e=fabric.parseAttributes(a,fabric.Image.ATTRIBUTE_NAMES);fabric.Image.fromURL(e["xlink:href"],l,n(t?fabric.util.object.clone(t):{},e))})}(typeof exports<"u"?exports:this),fabric.util.object.extend(fabric.Object.prototype,{_getAngleValueForStraighten:function(){var h=this.angle%360;return 0<h?90*Math.round((h-1)/90):90*Math.round(h/90)},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(h){var n=function(){},a=(h=h||{}).onComplete||n,l=h.onChange||n,t=this;return fabric.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(e){t.rotate(e),l()},onComplete:function(){t.setCoords(),a()}})}}),fabric.util.object.extend(fabric.StaticCanvas.prototype,{straightenObject:function(h){return h.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(h){return h.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){"use strict";fabric.isWebglSupported=function(n){if(fabric.isLikelyNode)return!1;n=n||fabric.WebglFilterBackend.prototype.tileSize;var a,l,t,e=document.createElement("canvas"),i=e.getContext("webgl")||e.getContext("experimental-webgl"),s=!1;if(i){fabric.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),s=fabric.maxTextureSize>=n;for(var r=["highp","mediump","lowp"],o=0;o<3;o++)if(l="precision "+r[o]+" float;\nvoid main(){}",t=(a=i).createShader(a.FRAGMENT_SHADER),a.shaderSource(t,l),a.compileShader(t),a.getShaderParameter(t,a.COMPILE_STATUS)){fabric.webGlPrecision=r[o];break}}return this.isSupported=s},(fabric.WebglFilterBackend=function h(n){n&&n.tileSize&&(this.tileSize=n.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}).prototype={tileSize:2048,resources:{},setupGLContext:function(n,a){this.dispose(),this.createWebGLCanvas(n,a),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(n,a)},chooseFastestCopyGLTo2DMethod:function(n,a){var l,t=void 0!==window.performance;try{new ImageData(1,1),l=!0}catch{l=!1}var e=typeof ArrayBuffer<"u",i=typeof Uint8ClampedArray<"u";if(t&&l&&e&&i){var s=fabric.util.createCanvasElement(),r=new ArrayBuffer(n*a*4);if(fabric.forceGLPutImageData)return this.imageBuffer=r,void(this.copyGLTo2D=copyGLTo2DPutImageData);var o,f,m={imageBuffer:r,destinationWidth:n,destinationHeight:a,targetCanvas:s};s.width=n,s.height=a,o=window.performance.now(),copyGLTo2DDrawImage.call(m,this.gl,m),f=window.performance.now()-o,o=window.performance.now(),copyGLTo2DPutImageData.call(m,this.gl,m),window.performance.now()-o<f?(this.imageBuffer=r,this.copyGLTo2D=copyGLTo2DPutImageData):this.copyGLTo2D=copyGLTo2DDrawImage}},createWebGLCanvas:function(n,a){var l=fabric.util.createCanvasElement();l.width=n,l.height=a;var t={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},e=l.getContext("webgl",t);e||(e=l.getContext("experimental-webgl",t)),e&&(e.clearColor(0,0,0,0),this.canvas=l,this.gl=e)},applyFilters:function(n,a,l,t,e,i){var s,r=this.gl;i&&(s=this.getCachedTexture(i,a));var o={originalWidth:a.width||a.originalWidth,originalHeight:a.height||a.originalHeight,sourceWidth:l,sourceHeight:t,destinationWidth:l,destinationHeight:t,context:r,sourceTexture:this.createTexture(r,l,t,!s&&a),targetTexture:this.createTexture(r,l,t),originalTexture:s||this.createTexture(r,l,t,!s&&a),passes:n.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:e},f=r.createFramebuffer();return r.bindFramebuffer(r.FRAMEBUFFER,f),n.forEach(function(m){m&&m.applyTo(o)}),resizeCanvasIfNeeded(o),this.copyGLTo2D(r,o),r.bindTexture(r.TEXTURE_2D,null),r.deleteTexture(o.sourceTexture),r.deleteTexture(o.targetTexture),r.deleteFramebuffer(f),e.getContext("2d").setTransform(1,0,0,1,0,0),o},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(n,a,l,t){var e=n.createTexture();return n.bindTexture(n.TEXTURE_2D,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),t?n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t):n.texImage2D(n.TEXTURE_2D,0,n.RGBA,a,l,0,n.RGBA,n.UNSIGNED_BYTE,null),e},getCachedTexture:function(n,a){if(this.textureCache[n])return this.textureCache[n];var l=this.createTexture(this.gl,a.width,a.height,a);return this.textureCache[n]=l},evictCachesForKey:function(n){this.textureCache[n]&&(this.gl.deleteTexture(this.textureCache[n]),delete this.textureCache[n])},copyGLTo2D:copyGLTo2DDrawImage,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var n=this.gl,a={renderer:"",vendor:""};if(!n)return a;var l=n.getExtension("WEBGL_debug_renderer_info");if(l){var t=n.getParameter(l.UNMASKED_RENDERER_WEBGL),e=n.getParameter(l.UNMASKED_VENDOR_WEBGL);t&&(a.renderer=t.toLowerCase()),e&&(a.vendor=e.toLowerCase())}return this.gpuInfo=a}}}(),function(){"use strict";var h=function(){};(fabric.Canvas2dFilterBackend=function n(){}).prototype={evictCachesForKey:h,dispose:h,clearWebGLCaches:h,resources:{},applyFilters:function(a,l,t,e,i){var s=i.getContext("2d");s.drawImage(l,0,0,t,e);var r={sourceWidth:t,sourceHeight:e,imageData:s.getImageData(0,0,t,e),originalEl:l,originalImageData:s.getImageData(0,0,t,e),canvasEl:i,ctx:s,filterBackend:this};return a.forEach(function(o){o.applyTo(r)}),r.imageData.width===t&&r.imageData.height===e||(i.width=r.imageData.width,i.height=r.imageData.height),s.putImageData(r.imageData,0,0),r}}}(),fabric.Image=fabric.Image||{},fabric.Image.filters=fabric.Image.filters||{},fabric.Image.filters.BaseFilter=fabric.util.createClass({type:"BaseFilter",vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvoid main() {\nvTexCoord = aPosition;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:"precision highp float;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\n}",initialize:function(h){h&&this.setOptions(h)},setOptions:function(h){for(var n in h)this[n]=h[n]},createProgram:function(h,n,a){n=n||this.fragmentSource,a=a||this.vertexSource,"highp"!==fabric.webGlPrecision&&(n=n.replace(/precision highp float/g,"precision "+fabric.webGlPrecision+" float"));var l=h.createShader(h.VERTEX_SHADER);if(h.shaderSource(l,a),h.compileShader(l),!h.getShaderParameter(l,h.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+h.getShaderInfoLog(l));var t=h.createShader(h.FRAGMENT_SHADER);if(h.shaderSource(t,n),h.compileShader(t),!h.getShaderParameter(t,h.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+h.getShaderInfoLog(t));var e=h.createProgram();if(h.attachShader(e,l),h.attachShader(e,t),h.linkProgram(e),!h.getProgramParameter(e,h.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+h.getProgramInfoLog(e));var i=this.getAttributeLocations(h,e),s=this.getUniformLocations(h,e)||{};return s.uStepW=h.getUniformLocation(e,"uStepW"),s.uStepH=h.getUniformLocation(e,"uStepH"),{program:e,attributeLocations:i,uniformLocations:s}},getAttributeLocations:function(h,n){return{aPosition:h.getAttribLocation(n,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(h,n,a){var l=n.aPosition,t=h.createBuffer();h.bindBuffer(h.ARRAY_BUFFER,t),h.enableVertexAttribArray(l),h.vertexAttribPointer(l,2,h.FLOAT,!1,0,0),h.bufferData(h.ARRAY_BUFFER,a,h.STATIC_DRAW)},_setupFrameBuffer:function(h){var n,a,l=h.context;1<h.passes?(a=h.destinationHeight,h.sourceWidth===(n=h.destinationWidth)&&h.sourceHeight===a||(l.deleteTexture(h.targetTexture),h.targetTexture=h.filterBackend.createTexture(l,n,a)),l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,h.targetTexture,0)):(l.bindFramebuffer(l.FRAMEBUFFER,null),l.finish())},_swapTextures:function(h){h.passes--,h.pass++;var n=h.targetTexture;h.targetTexture=h.sourceTexture,h.sourceTexture=n},isNeutralState:function(){var h=this.mainParameter,n=fabric.Image.filters[this.type].prototype;if(h){if(Array.isArray(n[h])){for(var a=n[h].length;a--;)if(this[h][a]!==n[h][a])return!1;return!0}return n[h]===this[h]}return!1},applyTo:function(h){h.webgl?(this._setupFrameBuffer(h),this.applyToWebGL(h),this._swapTextures(h)):this.applyTo2d(h)},retrieveShader:function(h){return h.programCache.hasOwnProperty(this.type)||(h.programCache[this.type]=this.createProgram(h.context)),h.programCache[this.type]},applyToWebGL:function(h){var n=h.context,a=this.retrieveShader(h);n.bindTexture(n.TEXTURE_2D,0===h.pass&&h.originalTexture?h.originalTexture:h.sourceTexture),n.useProgram(a.program),this.sendAttributeData(n,a.attributeLocations,h.aPosition),n.uniform1f(a.uniformLocations.uStepW,1/h.sourceWidth),n.uniform1f(a.uniformLocations.uStepH,1/h.sourceHeight),this.sendUniformData(n,a.uniformLocations),n.viewport(0,0,h.destinationWidth,h.destinationHeight),n.drawArrays(n.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(h,n,a){h.activeTexture(a),h.bindTexture(h.TEXTURE_2D,n),h.activeTexture(h.TEXTURE0)},unbindAdditionalTexture:function(h,n){h.activeTexture(n),h.bindTexture(h.TEXTURE_2D,null),h.activeTexture(h.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(h){this[this.mainParameter]=h},sendUniformData:function(){},createHelpLayer:function(h){if(!h.helpLayer){var n=document.createElement("canvas");n.width=h.sourceWidth,n.height=h.sourceHeight,h.helpLayer=n}},toObject:function(){var h={type:this.type},n=this.mainParameter;return n&&(h[n]=this[n]),h},toJSON:function(){return this.toObject()}}),fabric.Image.filters.BaseFilter.fromObject=function(h,n){var a=new fabric.Image.filters[h.type](h);return n&&n(a),a},function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.Image.filters;a.ColorMatrix=(0,n.util.createClass)(a.BaseFilter,{type:"ColorMatrix",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nuniform mat4 uColorMatrix;\nuniform vec4 uConstants;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor *= uColorMatrix;\ncolor += uConstants;\ngl_FragColor = color;\n}",matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(t){this.callSuper("initialize",t),this.matrix=this.matrix.slice(0)},applyTo2d:function(t){var e,i,s,r,o,f=t.imageData.data,m=f.length,b=this.matrix,C=this.colorsOnly;for(o=0;o<m;o+=4)e=f[o],i=f[o+1],s=f[o+2],C?(f[o]=e*b[0]+i*b[1]+s*b[2]+255*b[4],f[o+1]=e*b[5]+i*b[6]+s*b[7]+255*b[9],f[o+2]=e*b[10]+i*b[11]+s*b[12]+255*b[14]):(f[o]=e*b[0]+i*b[1]+s*b[2]+(r=f[o+3])*b[3]+255*b[4],f[o+1]=e*b[5]+i*b[6]+s*b[7]+r*b[8]+255*b[9],f[o+2]=e*b[10]+i*b[11]+s*b[12]+r*b[13]+255*b[14],f[o+3]=e*b[15]+i*b[16]+s*b[17]+r*b[18]+255*b[19])},getUniformLocations:function(t,e){return{uColorMatrix:t.getUniformLocation(e,"uColorMatrix"),uConstants:t.getUniformLocation(e,"uConstants")}},sendUniformData:function(t,e){var i=this.matrix,r=[i[4],i[9],i[14],i[19]];t.uniformMatrix4fv(e.uColorMatrix,!1,[i[0],i[1],i[2],i[3],i[5],i[6],i[7],i[8],i[10],i[11],i[12],i[13],i[15],i[16],i[17],i[18]]),t.uniform4fv(e.uConstants,r)}}),n.Image.filters.ColorMatrix.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.Image.filters;a.Brightness=(0,n.util.createClass)(a.BaseFilter,{type:"Brightness",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBrightness;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += uBrightness;\ngl_FragColor = color;\n}",brightness:0,mainParameter:"brightness",applyTo2d:function(t){if(0!==this.brightness){var e,i=t.imageData.data,s=i.length,r=Math.round(255*this.brightness);for(e=0;e<s;e+=4)i[e]=i[e]+r,i[e+1]=i[e+1]+r,i[e+2]=i[e+2]+r}},getUniformLocations:function(t,e){return{uBrightness:t.getUniformLocation(e,"uBrightness")}},sendUniformData:function(t,e){t.uniform1f(e.uBrightness,this.brightness)}}),n.Image.filters.Brightness.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.util.object.extend,l=n.Image.filters;l.Convolute=(0,n.util.createClass)(l.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_3_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_5_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_5_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_7_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_7_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_9_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_9_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}"},retrieveShader:function(e){var i=Math.sqrt(this.matrix.length),s=this.type+"_"+i+"_"+(this.opaque?1:0),r=this.fragmentSource[s];return e.programCache.hasOwnProperty(s)||(e.programCache[s]=this.createProgram(e.context,r)),e.programCache[s]},applyTo2d:function(e){var i,s,r,o,f,m,b,C,w,E,M,N,H,nt=e.imageData,st=nt.data,p=this.matrix,F=Math.round(Math.sqrt(p.length)),V=Math.floor(F/2),et=nt.width,ot=nt.height,ct=e.ctx.createImageData(et,ot),W=ct.data,z=this.opaque?1:0;for(M=0;M<ot;M++)for(E=0;E<et;E++){for(f=4*(M*et+E),H=o=r=s=i=0;H<F;H++)for(N=0;N<F;N++)m=E+N-V,(b=M+H-V)<0||ot<=b||m<0||et<=m||(i+=st[C=4*(b*et+m)]*(w=p[H*F+N]),s+=st[C+1]*w,r+=st[C+2]*w,z||(o+=st[C+3]*w));W[f]=i,W[f+1]=s,W[f+2]=r,W[f+3]=z?st[f+3]:o}e.imageData=ct},getUniformLocations:function(e,i){return{uMatrix:e.getUniformLocation(i,"uMatrix"),uOpaque:e.getUniformLocation(i,"uOpaque"),uHalfSize:e.getUniformLocation(i,"uHalfSize"),uSize:e.getUniformLocation(i,"uSize")}},sendUniformData:function(e,i){e.uniform1fv(i.uMatrix,this.matrix)},toObject:function(){return a(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),n.Image.filters.Convolute.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.Image.filters;a.Grayscale=(0,n.util.createClass)(a.BaseFilter,{type:"Grayscale",fragmentSource:{average:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat average = (color.r + color.b + color.g) / 3.0;\ngl_FragColor = vec4(average, average, average, color.a);\n}",lightness:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;\ngl_FragColor = vec4(average, average, average, col.a);\n}",luminosity:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;\ngl_FragColor = vec4(average, average, average, col.a);\n}"},mode:"average",mainParameter:"mode",applyTo2d:function(t){var e,i,s=t.imageData.data,r=s.length,o=this.mode;for(e=0;e<r;e+=4)"average"===o?i=(s[e]+s[e+1]+s[e+2])/3:"lightness"===o?i=(Math.min(s[e],s[e+1],s[e+2])+Math.max(s[e],s[e+1],s[e+2]))/2:"luminosity"===o&&(i=.21*s[e]+.72*s[e+1]+.07*s[e+2]),s[e]=i,s[e+1]=i,s[e+2]=i},retrieveShader:function(t){var e=this.type+"_"+this.mode;return t.programCache.hasOwnProperty(e)||(t.programCache[e]=this.createProgram(t.context,this.fragmentSource[this.mode])),t.programCache[e]},getUniformLocations:function(t,e){return{uMode:t.getUniformLocation(e,"uMode")}},sendUniformData:function(t,e){t.uniform1i(e.uMode,1)},isNeutralState:function(){return!1}}),n.Image.filters.Grayscale.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.Image.filters;a.Invert=(0,n.util.createClass)(a.BaseFilter,{type:"Invert",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uInvert;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nif (uInvert == 1) {\ngl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);\n} else {\ngl_FragColor = color;\n}\n}",invert:!0,mainParameter:"invert",applyTo2d:function(t){var e,i=t.imageData.data,s=i.length;for(e=0;e<s;e+=4)i[e]=255-i[e],i[e+1]=255-i[e+1],i[e+2]=255-i[e+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(t,e){return{uInvert:t.getUniformLocation(e,"uInvert")}},sendUniformData:function(t,e){t.uniform1i(e.uInvert,this.invert)}}),n.Image.filters.Invert.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.util.object.extend,l=n.Image.filters;l.Noise=(0,n.util.createClass)(l.BaseFilter,{type:"Noise",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uStepH;\nuniform float uNoise;\nuniform float uSeed;\nvarying vec2 vTexCoord;\nfloat rand(vec2 co, float seed, float vScale) {\nreturn fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);\n}\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;\ngl_FragColor = color;\n}",mainParameter:"noise",noise:0,applyTo2d:function(e){if(0!==this.noise){var i,s,o,r=e.imageData.data,f=this.noise;for(i=0,o=r.length;i<o;i+=4)s=(.5-Math.random())*f,r[i]+=s,r[i+1]+=s,r[i+2]+=s}},getUniformLocations:function(e,i){return{uNoise:e.getUniformLocation(i,"uNoise"),uSeed:e.getUniformLocation(i,"uSeed")}},sendUniformData:function(e,i){e.uniform1f(i.uNoise,this.noise/255),e.uniform1f(i.uSeed,Math.random())},toObject:function(){return a(this.callSuper("toObject"),{noise:this.noise})}}),n.Image.filters.Noise.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.Image.filters;a.Pixelate=(0,n.util.createClass)(a.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBlocksize;\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nfloat blockW = uBlocksize * uStepW;\nfloat blockH = uBlocksize * uStepW;\nint posX = int(vTexCoord.x / blockW);\nint posY = int(vTexCoord.y / blockH);\nfloat fposX = float(posX);\nfloat fposY = float(posY);\nvec2 squareCoords = vec2(fposX * blockW, fposY * blockH);\nvec4 color = texture2D(uTexture, squareCoords);\ngl_FragColor = color;\n}",applyTo2d:function(t){var e,i,s,r,o,f,m,b,C,w,E,M=t.imageData,N=M.data,H=M.height,nt=M.width;for(i=0;i<H;i+=this.blocksize)for(s=0;s<nt;s+=this.blocksize)for(r=N[e=4*i*nt+4*s],o=N[e+1],f=N[e+2],m=N[e+3],w=Math.min(i+this.blocksize,H),E=Math.min(s+this.blocksize,nt),b=i;b<w;b++)for(C=s;C<E;C++)N[e=4*b*nt+4*C]=r,N[e+1]=o,N[e+2]=f,N[e+3]=m},isNeutralState:function(){return 1===this.blocksize},getUniformLocations:function(t,e){return{uBlocksize:t.getUniformLocation(e,"uBlocksize"),uStepW:t.getUniformLocation(e,"uStepW"),uStepH:t.getUniformLocation(e,"uStepH")}},sendUniformData:function(t,e){t.uniform1f(e.uBlocksize,this.blocksize)}}),n.Image.filters.Pixelate.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.util.object.extend,l=n.Image.filters;l.RemoveColor=(0,n.util.createClass)(l.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uLow;\nuniform vec4 uHigh;\nvarying vec2 vTexCoord;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\nif(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {\ngl_FragColor.a = 0.0;\n}\n}",distance:.02,useAlpha:!1,applyTo2d:function(e){var i,s,r,o,f=e.imageData.data,m=255*this.distance,b=new n.Color(this.color).getSource(),C=[b[0]-m,b[1]-m,b[2]-m],w=[b[0]+m,b[1]+m,b[2]+m];for(i=0;i<f.length;i+=4)r=f[i+1],o=f[i+2],C[0]<(s=f[i])&&C[1]<r&&C[2]<o&&s<w[0]&&r<w[1]&&o<w[2]&&(f[i+3]=0)},getUniformLocations:function(e,i){return{uLow:e.getUniformLocation(i,"uLow"),uHigh:e.getUniformLocation(i,"uHigh")}},sendUniformData:function(e,i){var s=new n.Color(this.color).getSource(),r=parseFloat(this.distance),f=[s[0]/255+r,s[1]/255+r,s[2]/255+r,1];e.uniform4fv(i.uLow,[0+s[0]/255-r,0+s[1]/255-r,0+s[2]/255-r,1]),e.uniform4fv(i.uHigh,f)},toObject:function(){return a(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),n.Image.filters.RemoveColor.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.Image.filters,l=n.util.createClass,t={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var e in t)a[e]=l(a.ColorMatrix,{type:e,matrix:t[e],mainParameter:!1,colorsOnly:!0}),n.Image.filters[e].fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric,a=n.Image.filters;a.BlendColor=(0,n.util.createClass)(a.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:"gl_FragColor.rgb *= uColor.rgb;\n",screen:"gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);\n",add:"gl_FragColor.rgb += uColor.rgb;\n",diff:"gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);\n",subtract:"gl_FragColor.rgb -= uColor.rgb;\n",lighten:"gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);\n",darken:"gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);\n",exclusion:"gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);\n",overlay:"if (uColor.r < 0.5) {\ngl_FragColor.r *= 2.0 * uColor.r;\n} else {\ngl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);\n}\nif (uColor.g < 0.5) {\ngl_FragColor.g *= 2.0 * uColor.g;\n} else {\ngl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);\n}\nif (uColor.b < 0.5) {\ngl_FragColor.b *= 2.0 * uColor.b;\n} else {\ngl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);\n}\n",tint:"gl_FragColor.rgb *= (1.0 - uColor.a);\ngl_FragColor.rgb += uColor.rgb;\n"},buildSource:function(t){return"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ngl_FragColor = color;\nif (color.a > 0.0) {\n"+this.fragmentSource[t]+"}\n}"},retrieveShader:function(t){var e,i=this.type+"_"+this.mode;return t.programCache.hasOwnProperty(i)||(e=this.buildSource(this.mode),t.programCache[i]=this.createProgram(t.context,e)),t.programCache[i]},applyTo2d:function(t){var e,i,s,r,o,f,m,b=t.imageData.data,C=b.length,w=1-this.alpha;e=(m=new n.Color(this.color).getSource())[0]*this.alpha,i=m[1]*this.alpha,s=m[2]*this.alpha;for(var E=0;E<C;E+=4)switch(r=b[E],o=b[E+1],f=b[E+2],this.mode){case"multiply":b[E]=r*e/255,b[E+1]=o*i/255,b[E+2]=f*s/255;break;case"screen":b[E]=255-(255-r)*(255-e)/255,b[E+1]=255-(255-o)*(255-i)/255,b[E+2]=255-(255-f)*(255-s)/255;break;case"add":b[E]=r+e,b[E+1]=o+i,b[E+2]=f+s;break;case"diff":case"difference":b[E]=Math.abs(r-e),b[E+1]=Math.abs(o-i),b[E+2]=Math.abs(f-s);break;case"subtract":b[E]=r-e,b[E+1]=o-i,b[E+2]=f-s;break;case"darken":b[E]=Math.min(r,e),b[E+1]=Math.min(o,i),b[E+2]=Math.min(f,s);break;case"lighten":b[E]=Math.max(r,e),b[E+1]=Math.max(o,i),b[E+2]=Math.max(f,s);break;case"overlay":b[E]=e<128?2*r*e/255:255-2*(255-r)*(255-e)/255,b[E+1]=i<128?2*o*i/255:255-2*(255-o)*(255-i)/255,b[E+2]=s<128?2*f*s/255:255-2*(255-f)*(255-s)/255;break;case"exclusion":b[E]=e+r-2*e*r/255,b[E+1]=i+o-2*i*o/255,b[E+2]=s+f-2*s*f/255;break;case"tint":b[E]=e+r*w,b[E+1]=i+o*w,b[E+2]=s+f*w}},getUniformLocations:function(t,e){return{uColor:t.getUniformLocation(e,"uColor")}},sendUniformData:function(t,e){var i=new n.Color(this.color).getSource();i[0]=this.alpha*i[0]/255,i[1]=this.alpha*i[1]/255,i[2]=this.alpha*i[2]/255,i[3]=this.alpha,t.uniform4fv(e.uColor,i)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),n.Image.filters.BlendColor.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric,a=n.Image.filters;a.BlendImage=(0,n.util.createClass)(a.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nuniform mat3 uTransformMatrix;\nvoid main() {\nvTexCoord = aPosition;\nvTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:{multiply:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.rgba *= color2.rgba;\ngl_FragColor = color;\n}",mask:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.a = color2.a;\ngl_FragColor = color;\n}"},retrieveShader:function(t){var e=this.type+"_"+this.mode,i=this.fragmentSource[this.mode];return t.programCache.hasOwnProperty(e)||(t.programCache[e]=this.createProgram(t.context,i)),t.programCache[e]},applyToWebGL:function(t){var e=t.context,i=this.createTexture(t.filterBackend,this.image);this.bindAdditionalTexture(e,i,e.TEXTURE1),this.callSuper("applyToWebGL",t),this.unbindAdditionalTexture(e,e.TEXTURE1)},createTexture:function(t,e){return t.getCachedTexture(e.cacheKey,e._element)},calculateMatrix:function(){var t=this.image;return[1/t.scaleX,0,0,0,1/t.scaleY,0,-t.left/t._element.width,-t.top/t._element.height,1]},applyTo2d:function(t){var e,i,s,r,o,f,m,b,C,w,E,M=t.imageData,N=t.filterBackend.resources,H=M.data,nt=H.length,st=M.width,p=M.height,F=this.image;N.blendImage||(N.blendImage=n.util.createCanvasElement()),w=(C=N.blendImage).getContext("2d"),C.width!==st||C.height!==p?(C.width=st,C.height=p):w.clearRect(0,0,st,p),w.setTransform(F.scaleX,0,0,F.scaleY,F.left,F.top),w.drawImage(F._element,0,0,st,p),E=w.getImageData(0,0,st,p).data;for(var V=0;V<nt;V+=4)switch(o=H[V],f=H[V+1],m=H[V+2],b=H[V+3],e=E[V],i=E[V+1],s=E[V+2],r=E[V+3],this.mode){case"multiply":H[V]=o*e/255,H[V+1]=f*i/255,H[V+2]=m*s/255,H[V+3]=b*r/255;break;case"mask":H[V+3]=r}},getUniformLocations:function(t,e){return{uTransformMatrix:t.getUniformLocation(e,"uTransformMatrix"),uImage:t.getUniformLocation(e,"uImage")}},sendUniformData:function(t,e){var i=this.calculateMatrix();t.uniform1i(e.uImage,1),t.uniformMatrix3fv(e.uTransformMatrix,!1,i)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),n.Image.filters.BlendImage.fromObject=function(t,e){n.Image.fromObject(t.image,function(i){var s=n.util.object.clone(t);s.image=i,e(new n.Image.filters.BlendImage(s))})}}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=Math.pow,l=Math.floor,t=Math.sqrt,e=Math.abs,i=Math.round,s=Math.sin,r=Math.ceil,o=n.Image.filters;o.Resize=(0,n.util.createClass)(o.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(m,b){return{uDelta:m.getUniformLocation(b,"uDelta"),uTaps:m.getUniformLocation(b,"uTaps")}},sendUniformData:function(m,b){m.uniform2fv(b.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),m.uniform1fv(b.uTaps,this.taps)},retrieveShader:function(m){var b=this.getFilterWindow(),C=this.type+"_"+b;if(!m.programCache.hasOwnProperty(C)){var w=this.generateShader(b);m.programCache[C]=this.createProgram(m.context,w)}return m.programCache[C]},getFilterWindow:function(){return Math.ceil(this.lanczosLobes/this.tempScale)},getTaps:function(){for(var m=this.lanczosCreate(this.lanczosLobes),b=this.tempScale,C=this.getFilterWindow(),w=new Array(C),E=1;E<=C;E++)w[E-1]=m(E*b);return w},generateShader:function(m){for(var b=new Array(m),C=this.fragmentSourceTOP,w=1;w<=m;w++)b[w-1]=w+".0 * uDelta";return C+="uniform float uTaps["+m+"];\n",C+="void main() {\n",C+="  vec4 color = texture2D(uTexture, vTexCoord);\n",C+="  float sum = 1.0;\n",b.forEach(function(E,M){C+="  color += texture2D(uTexture, vTexCoord + "+E+") * uTaps["+M+"];\n",C+="  color += texture2D(uTexture, vTexCoord - "+E+") * uTaps["+M+"];\n",C+="  sum += 2.0 * uTaps["+M+"];\n"}),C+="  gl_FragColor = color / sum;\n",C+="}"},fragmentSourceTOP:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\n",applyTo:function(m){m.webgl?(m.passes++,this.width=m.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=m.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),m.destinationWidth=this.dW,this._setupFrameBuffer(m),this.applyToWebGL(m),this._swapTextures(m),m.sourceWidth=m.destinationWidth,this.height=m.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),m.destinationHeight=this.dH,this._setupFrameBuffer(m),this.applyToWebGL(m),this._swapTextures(m),m.sourceHeight=m.destinationHeight):this.applyTo2d(m)},isNeutralState:function(){return 1===this.scaleX&&1===this.scaleY},lanczosCreate:function(m){return function(b){if(m<=b||b<=-m)return 0;if(b<1.1920929e-7&&-1.1920929e-7<b)return 1;var C=(b*=Math.PI)/m;return s(b)/b*s(C)/C}},applyTo2d:function(m){var b=m.imageData,C=this.scaleX,w=this.scaleY;this.rcpScaleX=1/C,this.rcpScaleY=1/w;var E,M=b.width,N=b.height,H=i(M*C),nt=i(N*w);"sliceHack"===this.resizeType?E=this.sliceByTwo(m,M,N,H,nt):"hermite"===this.resizeType?E=this.hermiteFastResize(m,M,N,H,nt):"bilinear"===this.resizeType?E=this.bilinearFiltering(m,M,N,H,nt):"lanczos"===this.resizeType&&(E=this.lanczosResize(m,M,N,H,nt)),m.imageData=E},sliceByTwo:function(m,b,C,w,E){var M,N,H=m.imageData,nt=!1,st=!1,p=.5*b,F=.5*C,V=n.filterBackend.resources,et=0,ot=0,ct=b,W=0;for(V.sliceByTwo||(V.sliceByTwo=document.createElement("canvas")),((M=V.sliceByTwo).width<1.5*b||M.height<C)&&(M.width=1.5*b,M.height=C),(N=M.getContext("2d")).clearRect(0,0,1.5*b,C),N.putImageData(H,0,0),w=l(w),E=l(E);!nt||!st;)C=F,w<l(.5*(b=p))?p=l(.5*p):(p=w,nt=!0),E<l(.5*F)?F=l(.5*F):(F=E,st=!0),N.drawImage(M,et,ot,b,C,ct,W,p,F),et=ct,ot=W,W+=F;return N.getImageData(et,ot,w,E)},lanczosResize:function(m,b,C,w,E){var M=m.imageData.data,N=m.ctx.createImageData(w,E),H=N.data,nt=this.lanczosCreate(this.lanczosLobes),st=this.rcpScaleX,p=this.rcpScaleY,F=2/this.rcpScaleX,V=2/this.rcpScaleY,et=r(st*this.lanczosLobes/2),ot=r(p*this.lanczosLobes/2),ct={},W={},z={};return function tt(ft){var at,mt,_t,G,bt,Ct,Q,St,Tt,Lt,Wt;for(W.x=(ft+.5)*st,z.x=l(W.x),at=0;at<E;at++){for(W.y=(at+.5)*p,z.y=l(W.y),Tt=St=Q=Ct=bt=0,mt=z.x-et;mt<=z.x+et;mt++)if(!(mt<0||b<=mt)){Lt=l(1e3*e(mt-W.x)),ct[Lt]||(ct[Lt]={});for(var Xt=z.y-ot;Xt<=z.y+ot;Xt++)Xt<0||C<=Xt||(Wt=l(1e3*e(Xt-W.y)),ct[Lt][Wt]||(ct[Lt][Wt]=nt(t(a(Lt*F,2)+a(Wt*V,2))/1e3)),0<(_t=ct[Lt][Wt])&&(bt+=_t,Ct+=_t*M[G=4*(Xt*b+mt)],Q+=_t*M[G+1],St+=_t*M[G+2],Tt+=_t*M[G+3]))}H[G=4*(at*w+ft)]=Ct/bt,H[G+1]=Q/bt,H[G+2]=St/bt,H[G+3]=Tt/bt}return++ft<w?tt(ft):N}(0)},bilinearFiltering:function(m,b,C,w,E){var M,N,H,nt,st,p,F,et,ot=0,ct=this.rcpScaleX,W=this.rcpScaleY,z=4*(b-1),tt=m.imageData.data,ft=m.ctx.createImageData(w,E),at=ft.data;for(H=0;H<E;H++)for(nt=0;nt<w;nt++)for(st=ct*nt-(M=l(ct*nt)),p=W*H-(N=l(W*H)),et=4*(N*b+M),F=0;F<4;F++)at[ot++]=tt[et+F]*(1-st)*(1-p)+tt[et+4+F]*st*(1-p)+tt[et+z+F]*p*(1-st)+tt[et+z+4+F]*st*p;return ft},hermiteFastResize:function(m,b,C,w,E){for(var M=this.rcpScaleX,N=this.rcpScaleY,H=r(M/2),nt=r(N/2),st=m.imageData.data,p=m.ctx.createImageData(w,E),F=p.data,V=0;V<E;V++)for(var et=0;et<w;et++){for(var ot=4*(et+V*w),ct=0,W=0,z=0,tt=0,ft=0,at=0,mt=0,_t=(V+.5)*N,G=l(V*N);G<(V+1)*N;G++)for(var bt=e(_t-(G+.5))/nt,Ct=(et+.5)*M,Q=bt*bt,St=l(et*M);St<(et+1)*M;St++){var Tt=e(Ct-(St+.5))/H,Lt=t(Q+Tt*Tt);1<Lt&&Lt<-1||0<(ct=2*Lt*Lt*Lt-3*Lt*Lt+1)&&(mt+=ct*st[3+(Tt=4*(St+G*b))],z+=ct,st[Tt+3]<255&&(ct=ct*st[Tt+3]/250),tt+=ct*st[Tt],ft+=ct*st[Tt+1],at+=ct*st[Tt+2],W+=ct)}F[ot]=tt/W,F[ot+1]=ft/W,F[ot+2]=at/W,F[ot+3]=mt/z}return p},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),n.Image.filters.Resize.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.Image.filters;a.Contrast=(0,n.util.createClass)(a.BaseFilter,{type:"Contrast",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uContrast;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));\ncolor.rgb = contrastF * (color.rgb - 0.5) + 0.5;\ngl_FragColor = color;\n}",contrast:0,mainParameter:"contrast",applyTo2d:function(t){if(0!==this.contrast){var e,i=t.imageData.data,s=i.length,r=Math.floor(255*this.contrast),o=259*(r+255)/(255*(259-r));for(e=0;e<s;e+=4)i[e]=o*(i[e]-128)+128,i[e+1]=o*(i[e+1]-128)+128,i[e+2]=o*(i[e+2]-128)+128}},getUniformLocations:function(t,e){return{uContrast:t.getUniformLocation(e,"uContrast")}},sendUniformData:function(t,e){t.uniform1f(e.uContrast,this.contrast)}}),n.Image.filters.Contrast.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.Image.filters;a.Saturation=(0,n.util.createClass)(a.BaseFilter,{type:"Saturation",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uSaturation;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat rgMax = max(color.r, color.g);\nfloat rgbMax = max(rgMax, color.b);\ncolor.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;\ncolor.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;\ncolor.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;\ngl_FragColor = color;\n}",saturation:0,mainParameter:"saturation",applyTo2d:function(t){if(0!==this.saturation){var e,i,s=t.imageData.data,r=s.length,o=-this.saturation;for(e=0;e<r;e+=4)i=Math.max(s[e],s[e+1],s[e+2]),s[e]+=i!==s[e]?(i-s[e])*o:0,s[e+1]+=i!==s[e+1]?(i-s[e+1])*o:0,s[e+2]+=i!==s[e+2]?(i-s[e+2])*o:0}},getUniformLocations:function(t,e){return{uSaturation:t.getUniformLocation(e,"uSaturation")}},sendUniformData:function(t,e){t.uniform1f(e.uSaturation,-this.saturation)}}),n.Image.filters.Saturation.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.Image.filters;a.Vibrance=(0,n.util.createClass)(a.BaseFilter,{type:"Vibrance",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uVibrance;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat max = max(color.r, max(color.g, color.b));\nfloat avg = (color.r + color.g + color.b) / 3.0;\nfloat amt = (abs(max - avg) * 2.0) * uVibrance;\ncolor.r += max != color.r ? (max - color.r) * amt : 0.00;\ncolor.g += max != color.g ? (max - color.g) * amt : 0.00;\ncolor.b += max != color.b ? (max - color.b) * amt : 0.00;\ngl_FragColor = color;\n}",vibrance:0,mainParameter:"vibrance",applyTo2d:function(t){if(0!==this.vibrance){var e,i,r,o=t.imageData.data,f=o.length,m=-this.vibrance;for(e=0;e<f;e+=4)i=Math.max(o[e],o[e+1],o[e+2]),r=2*Math.abs(i-(o[e]+o[e+1]+o[e+2])/3)/255*m,o[e]+=i!==o[e]?(i-o[e])*r:0,o[e+1]+=i!==o[e+1]?(i-o[e+1])*r:0,o[e+2]+=i!==o[e+2]?(i-o[e+2])*r:0}},getUniformLocations:function(t,e){return{uVibrance:t.getUniformLocation(e,"uVibrance")}},sendUniformData:function(t,e){t.uniform1f(e.uVibrance,-this.vibrance)}}),n.Image.filters.Vibrance.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.Image.filters;a.Blur=(0,n.util.createClass)(a.BaseFilter,{type:"Blur",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\nconst float nSamples = 15.0;\nvec3 v3offset = vec3(12.9898, 78.233, 151.7182);\nfloat random(vec3 scale) {\nreturn fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);\n}\nvoid main() {\nvec4 color = vec4(0.0);\nfloat total = 0.0;\nfloat offset = random(v3offset);\nfor (float t = -nSamples; t <= nSamples; t++) {\nfloat percent = (t + offset - 0.5) / nSamples;\nfloat weight = 1.0 - abs(percent);\ncolor += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;\ntotal += weight;\n}\ngl_FragColor = color / total;\n}",blur:0,mainParameter:"blur",applyTo:function(t){t.webgl?(this.aspectRatio=t.sourceWidth/t.sourceHeight,t.passes++,this._setupFrameBuffer(t),this.horizontal=!0,this.applyToWebGL(t),this._swapTextures(t),this._setupFrameBuffer(t),this.horizontal=!1,this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)},applyTo2d:function(t){t.imageData=this.simpleBlur(t)},simpleBlur:function(t){var e,i,s=t.filterBackend.resources,r=t.imageData.width,o=t.imageData.height;s.blurLayer1||(s.blurLayer1=n.util.createCanvasElement(),s.blurLayer2=n.util.createCanvasElement()),i=s.blurLayer2,(e=s.blurLayer1).width===r&&e.height===o||(i.width=e.width=r,i.height=e.height=o);var f,m,b,C,w=e.getContext("2d"),E=i.getContext("2d"),M=.06*this.blur*.5;for(w.putImageData(t.imageData,0,0),E.clearRect(0,0,r,o),C=-15;C<=15;C++)b=M*(m=C/15)*r+(f=(Math.random()-.5)/4),E.globalAlpha=1-Math.abs(m),E.drawImage(e,b,f),w.drawImage(i,0,0),E.globalAlpha=1,E.clearRect(0,0,i.width,i.height);for(C=-15;C<=15;C++)b=M*(m=C/15)*o+(f=(Math.random()-.5)/4),E.globalAlpha=1-Math.abs(m),E.drawImage(e,f,b),w.drawImage(i,0,0),E.globalAlpha=1,E.clearRect(0,0,i.width,i.height);t.ctx.drawImage(e,0,0);var N=t.ctx.getImageData(0,0,e.width,e.height);return w.globalAlpha=1,w.clearRect(0,0,e.width,e.height),N},getUniformLocations:function(t,e){return{delta:t.getUniformLocation(e,"uDelta")}},sendUniformData:function(t,e){var i=this.chooseRightDelta();t.uniform2fv(e.delta,i)},chooseRightDelta:function(){var t,e=1,i=[0,0];return this.horizontal?1<this.aspectRatio&&(e=1/this.aspectRatio):this.aspectRatio<1&&(e=this.aspectRatio),t=e*this.blur*.12,this.horizontal?i[0]=t:i[1]=t,i}}),a.Blur.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.Image.filters;a.Gamma=(0,n.util.createClass)(a.BaseFilter,{type:"Gamma",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec3 uGamma;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec3 correction = (1.0 / uGamma);\ncolor.r = pow(color.r, correction.r);\ncolor.g = pow(color.g, correction.g);\ncolor.b = pow(color.b, correction.b);\ngl_FragColor = color;\ngl_FragColor.rgb *= color.a;\n}",gamma:[1,1,1],mainParameter:"gamma",initialize:function(t){this.gamma=[1,1,1],a.BaseFilter.prototype.initialize.call(this,t)},applyTo2d:function(t){var e,i=t.imageData.data,s=this.gamma,r=i.length,o=1/s[0],f=1/s[1],m=1/s[2];for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),e=0,r=256;e<r;e++)this.rVals[e]=255*Math.pow(e/255,o),this.gVals[e]=255*Math.pow(e/255,f),this.bVals[e]=255*Math.pow(e/255,m);for(e=0,r=i.length;e<r;e+=4)i[e]=this.rVals[i[e]],i[e+1]=this.gVals[i[e+1]],i[e+2]=this.bVals[i[e+2]]},getUniformLocations:function(t,e){return{uGamma:t.getUniformLocation(e,"uGamma")}},sendUniformData:function(t,e){t.uniform3fv(e.uGamma,this.gamma)}}),n.Image.filters.Gamma.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.Image.filters;a.Composed=(0,n.util.createClass)(a.BaseFilter,{type:"Composed",subFilters:[],initialize:function(t){this.callSuper("initialize",t),this.subFilters=this.subFilters.slice(0)},applyTo:function(t){t.passes+=this.subFilters.length-1,this.subFilters.forEach(function(e){e.applyTo(t)})},toObject:function(){return n.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(t){return t.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(t){return!t.isNeutralState()})}}),n.Image.filters.Composed.fromObject=function(t,e){var i=(t.subFilters||[]).map(function(r){return new n.Image.filters[r.type](r)}),s=new n.Image.filters.Composed({subFilters:i});return e&&e(s),s}}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.Image.filters;a.HueRotation=(0,n.util.createClass)(a.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var t=this.rotation*Math.PI,e=n.util.cos(t),i=n.util.sin(t),s=Math.sqrt(1/3)*i,r=1-e;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=e+r/3,this.matrix[1]=1/3*r-s,this.matrix[2]=1/3*r+s,this.matrix[5]=1/3*r+s,this.matrix[6]=e+1/3*r,this.matrix[7]=1/3*r-s,this.matrix[10]=1/3*r-s,this.matrix[11]=1/3*r+s,this.matrix[12]=e+1/3*r},isNeutralState:function(t){return this.calculateMatrix(),a.BaseFilter.prototype.isNeutralState.call(this,t)},applyTo:function(t){this.calculateMatrix(),a.BaseFilter.prototype.applyTo.call(this,t)}}),n.Image.filters.HueRotation.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.util.object.clone;if(n.Text)n.warn("fabric.Text is already defined");else{var l="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");n.Text=n.util.createClass(n.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:n.Object.prototype.stateProperties.concat(l),cacheProperties:n.Object.prototype.cacheProperties.concat(l),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(t,e){this.styles=e&&e.styles||{},this.text=t,this.__skipDimension=!0,this.callSuper("initialize",e),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var t=this.path;t&&(t.segmentsInfo=n.util.getPathSegmentsInfo(t.path))},getMeasuringContext:function(){return n._measuringContext||(n._measuringContext=this.canvas&&this.canvas.contextCache||n.util.createCanvasElement().getContext("2d")),n._measuringContext},_splitText:function(){var t=this._splitTextIntoLines(this.text);return this.textLines=t.lines,this._textLines=t.graphemeLines,this._unwrappedTextLines=t._unwrappedLines,this._text=t.graphemeText,t},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var t,e,s,r,o,f,m=0,b=this._textLines.length;m<b;m++)if(("justify"===this.textAlign||m!==b-1&&!this.isEndOfWrapping(m))&&(s=0,r=this._textLines[m],(e=this.getLineWidth(m))<this.width&&(f=this.textLines[m].match(this._reSpacesAndTabs)))){t=(this.width-e)/f.length;for(var C=0,w=r.length;C<=w;C++)o=this.__charBounds[m][C],this._reSpaceAndTab.test(r[C])?(o.width+=t,o.kernedWidth+=t,o.left+=s,s+=t):o.left+=s}},isEndOfWrapping:function(t){return t===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var t=this.callSuper("_getCacheCanvasDimensions"),e=this.fontSize;return t.width+=e*t.zoomX,t.height+=e*t.zoomY,t},_render:function(t){var e=this.path;e&&!e.isNotVisible()&&e._render(t),this._setTextStyles(t),this._renderTextLinesBackground(t),this._renderTextDecoration(t,"underline"),this._renderText(t),this._renderTextDecoration(t,"overline"),this._renderTextDecoration(t,"linethrough")},_renderText:function(t){"stroke"===this.paintFirst?(this._renderTextStroke(t),this._renderTextFill(t)):(this._renderTextFill(t),this._renderTextStroke(t))},_setTextStyles:function(t,e,i){if(t.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":t.textBaseline="middle";break;case"ascender":t.textBaseline="top";break;case"descender":t.textBaseline="bottom"}t.font=this._getFontDeclaration(e,i)},calcTextWidth:function(){for(var t=this.getLineWidth(0),e=1,i=this._textLines.length;e<i;e++){var s=this.getLineWidth(e);t<s&&(t=s)}return t},_renderTextLine:function(t,e,i,s,r,o){this._renderChars(t,e,i,s,r,o)},_renderTextLinesBackground:function(t){if(this.textBackgroundColor||this.styleHas("textBackgroundColor")){for(var e,i,s,r,o,f,m,b=t.fillStyle,C=this._getLeftOffset(),w=this._getTopOffset(),E=0,M=0,N=this.path,H=0,nt=this._textLines.length;H<nt;H++)if(e=this.getHeightOfLine(H),this.textBackgroundColor||this.styleHas("textBackgroundColor",H)){s=this._textLines[H],i=this._getLineLeftOffset(H),E=M=0,r=this.getValueOfPropertyAt(H,0,"textBackgroundColor");for(var st=0,p=s.length;st<p;st++)o=this.__charBounds[H][st],f=this.getValueOfPropertyAt(H,st,"textBackgroundColor"),N?(t.save(),t.translate(o.renderLeft,o.renderTop),t.rotate(o.angle),(t.fillStyle=f)&&t.fillRect(-o.width/2,-e/this.lineHeight*(1-this._fontSizeFraction),o.width,e/this.lineHeight),t.restore()):f!==r?(m=C+i+E,"rtl"===this.direction&&(m=this.width-m-M),(t.fillStyle=r)&&t.fillRect(m,w,M,e/this.lineHeight),E=o.left,M=o.width,r=f):M+=o.kernedWidth;f&&!N&&(m=C+i+E,"rtl"===this.direction&&(m=this.width-m-M),t.fillStyle=f,t.fillRect(m,w,M,e/this.lineHeight)),w+=e}else w+=e;t.fillStyle=b,this._removeShadow(t)}},getFontCache:function(t){var e=t.fontFamily.toLowerCase();n.charWidthsCache[e]||(n.charWidthsCache[e]={});var i=n.charWidthsCache[e],s=t.fontStyle.toLowerCase()+"_"+(t.fontWeight+"").toLowerCase();return i[s]||(i[s]={}),i[s]},_measureChar:function(t,e,i,s){var r,o,f,m,b=this.getFontCache(e),C=i+t,w=this._getFontDeclaration(e)===this._getFontDeclaration(s),E=e.fontSize/this.CACHE_FONT_SIZE;if(i&&void 0!==b[i]&&(f=b[i]),void 0!==b[t]&&(m=r=b[t]),w&&void 0!==b[C]&&(m=(o=b[C])-f),void 0===r||void 0===f||void 0===o){var M=this.getMeasuringContext();this._setTextStyles(M,e,!0)}return void 0===r&&(m=r=M.measureText(t).width,b[t]=r),void 0===f&&w&&i&&(f=M.measureText(i).width,b[i]=f),w&&void 0===o&&(o=M.measureText(C).width,m=(b[C]=o)-f),{width:r*E,kernedWidth:m*E}},getHeightOfChar:function(t,e){return this.getValueOfPropertyAt(t,e,"fontSize")},measureLine:function(t){var e=this._measureLine(t);return 0!==this.charSpacing&&(e.width-=this._getWidthOfCharSpacing()),e.width<0&&(e.width=0),e},_measureLine:function(t){var e,i,s,r,o,f,m=0,b=this._textLines[t],C=new Array(b.length),w=0,E=this.path,M="right"===this.pathSide;for(this.__charBounds[t]=C,e=0;e<b.length;e++)r=this._getGraphemeBox(i=b[e],t,e,s),m+=(C[e]=r).kernedWidth,s=i;if(C[e]={left:r?r.left+r.width:0,width:0,kernedWidth:0,height:this.fontSize},E){switch(f=E.segmentsInfo[E.segmentsInfo.length-1].length,(o=n.util.getPointOnPath(E.path,0,E.segmentsInfo)).x+=E.pathOffset.x,o.y+=E.pathOffset.y,this.textAlign){case"left":w=M?f-m:0;break;case"center":w=(f-m)/2;break;case"right":w=M?0:f-m}for(w+=this.pathStartOffset*(M?-1:1),e=M?b.length-1:0;M?0<=e:e<b.length;M?e--:e++)f<w?w%=f:w<0&&(w+=f),this._setGraphemeOnPath(w,r=C[e],o),w+=r.kernedWidth}return{width:m,numOfSpaces:0}},_setGraphemeOnPath:function(t,e,i){var r=this.path,o=n.util.getPointOnPath(r.path,t+e.kernedWidth/2,r.segmentsInfo);e.renderLeft=o.x-i.x,e.renderTop=o.y-i.y,e.angle=o.angle+("right"===this.pathSide?Math.PI:0)},_getGraphemeBox:function(t,e,i,s,r){var o,f=this.getCompleteStyleDeclaration(e,i),m=s?this.getCompleteStyleDeclaration(e,i-1):{},b=this._measureChar(t,f,s,m),C=b.kernedWidth,w=b.width;0!==this.charSpacing&&(w+=o=this._getWidthOfCharSpacing(),C+=o);var E={width:w,left:0,height:f.fontSize,kernedWidth:C,deltaY:f.deltaY};if(0<i&&!r){var M=this.__charBounds[e][i-1];E.left=M.left+M.width+b.kernedWidth-b.width}return E},getHeightOfLine:function(t){if(this.__lineHeights[t])return this.__lineHeights[t];for(var e=this._textLines[t],i=this.getHeightOfChar(t,0),s=1,r=e.length;s<r;s++)i=Math.max(this.getHeightOfChar(t,s),i);return this.__lineHeights[t]=i*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var t,e=0,i=0,s=this._textLines.length;i<s;i++)t=this.getHeightOfLine(i),e+=i===s-1?t/this.lineHeight:t;return e},_getLeftOffset:function(){return"ltr"===this.direction?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(t,e){t.save();for(var i=0,s=this._getLeftOffset(),r=this._getTopOffset(),o=0,f=this._textLines.length;o<f;o++){var m=this.getHeightOfLine(o),b=m/this.lineHeight,C=this._getLineLeftOffset(o);this._renderTextLine(e,t,this._textLines[o],s+C,r+i+b,o),i+=m}t.restore()},_renderTextFill:function(t){(this.fill||this.styleHas("fill"))&&this._renderTextCommon(t,"fillText")},_renderTextStroke:function(t){(this.stroke&&0!==this.strokeWidth||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this._setLineDash(t,this.strokeDashArray),t.beginPath(),this._renderTextCommon(t,"strokeText"),t.closePath(),t.restore())},_renderChars:function(t,e,i,s,r,o){var f,m,b,C,E=this.getHeightOfLine(o),M=-1!==this.textAlign.indexOf("justify"),N="",H=0,nt=this.path,st=!M&&0===this.charSpacing&&this.isEmptyStyles(o)&&!nt,p="ltr"===this.direction,F="ltr"===this.direction?1:-1,V=e.canvas.getAttribute("dir");if(e.save(),V!==this.direction&&(e.canvas.setAttribute("dir",p?"ltr":"rtl"),e.direction=p?"ltr":"rtl",e.textAlign=p?"left":"right"),r-=E*this._fontSizeFraction/this.lineHeight,st)return this._renderChar(t,e,o,0,i.join(""),s,r,E),void e.restore();for(var et=0,ot=i.length-1;et<=ot;et++)C=et===ot||this.charSpacing||nt,N+=i[et],b=this.__charBounds[o][et],0===H?(s+=F*(b.kernedWidth-b.width),H+=b.width):H+=b.kernedWidth,M&&!C&&this._reSpaceAndTab.test(i[et])&&(C=!0),C||(f=f||this.getCompleteStyleDeclaration(o,et),m=this.getCompleteStyleDeclaration(o,et+1),C=this._hasStyleChanged(f,m)),C&&(nt?(e.save(),e.translate(b.renderLeft,b.renderTop),e.rotate(b.angle),this._renderChar(t,e,o,et,N,-H/2,0,E),e.restore()):this._renderChar(t,e,o,et,N,s,r,E),N="",f=m,s+=F*H,H=0);e.restore()},_applyPatternGradientTransformText:function(t){var e,i=n.util.createCanvasElement(),s=this.width+this.strokeWidth,r=this.height+this.strokeWidth;return i.width=s,i.height=r,(e=i.getContext("2d")).beginPath(),e.moveTo(0,0),e.lineTo(s,0),e.lineTo(s,r),e.lineTo(0,r),e.closePath(),e.translate(s/2,r/2),e.fillStyle=t.toLive(e),this._applyPatternGradientTransform(e,t),e.fill(),e.createPattern(i,"no-repeat")},handleFiller:function(t,e,i){var s,r;return i.toLive?"percentage"===i.gradientUnits||i.gradientTransform||i.patternTransform?(t.translate(s=-this.width/2,r=-this.height/2),t[e]=this._applyPatternGradientTransformText(i),{offsetX:s,offsetY:r}):(t[e]=i.toLive(t,this),this._applyPatternGradientTransform(t,i)):(t[e]=i,{offsetX:0,offsetY:0})},_setStrokeStyles:function(t,e){return t.lineWidth=e.strokeWidth,t.lineCap=this.strokeLineCap,t.lineDashOffset=this.strokeDashOffset,t.lineJoin=this.strokeLineJoin,t.miterLimit=this.strokeMiterLimit,this.handleFiller(t,"strokeStyle",e.stroke)},_setFillStyles:function(t,e){return this.handleFiller(t,"fillStyle",e.fill)},_renderChar:function(t,e,i,s,r,o,f){var m,b,C=this._getStyleDeclaration(i,s),w=this.getCompleteStyleDeclaration(i,s),E="fillText"===t&&w.fill,M="strokeText"===t&&w.stroke&&w.strokeWidth;(M||E)&&(e.save(),E&&(m=this._setFillStyles(e,w)),M&&(b=this._setStrokeStyles(e,w)),e.font=this._getFontDeclaration(w),C&&C.textBackgroundColor&&this._removeShadow(e),C&&C.deltaY&&(f+=C.deltaY),E&&e.fillText(r,o-m.offsetX,f-m.offsetY),M&&e.strokeText(r,o-b.offsetX,f-b.offsetY),e.restore())},setSuperscript:function(t,e){return this._setScript(t,e,this.superscript)},setSubscript:function(t,e){return this._setScript(t,e,this.subscript)},_setScript:function(t,e,i){var s=this.get2DCursorLocation(t,!0),r=this.getValueOfPropertyAt(s.lineIndex,s.charIndex,"fontSize"),o=this.getValueOfPropertyAt(s.lineIndex,s.charIndex,"deltaY");return this.setSelectionStyles({fontSize:r*i.size,deltaY:o+r*i.baseline},t,e),this},_hasStyleChanged:function(t,e){return t.fill!==e.fill||t.stroke!==e.stroke||t.strokeWidth!==e.strokeWidth||t.fontSize!==e.fontSize||t.fontFamily!==e.fontFamily||t.fontWeight!==e.fontWeight||t.fontStyle!==e.fontStyle||t.deltaY!==e.deltaY},_hasStyleChangedForSvg:function(t,e){return this._hasStyleChanged(t,e)||t.overline!==e.overline||t.underline!==e.underline||t.linethrough!==e.linethrough},_getLineLeftOffset:function(t){var e=this.getLineWidth(t),i=this.width-e,s=this.textAlign,r=this.direction,o=0,f=this.isEndOfWrapping(t);return"justify"===s||"justify-center"===s&&!f||"justify-right"===s&&!f||"justify-left"===s&&!f?0:("center"===s&&(o=i/2),"right"===s&&(o=i),"justify-center"===s&&(o=i/2),"justify-right"===s&&(o=i),"rtl"===r&&(o-=i),o)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var t=this._forceClearCache;return t||(t=this.hasStateChanged("_dimensionAffectingProps")),t&&(this.dirty=!0,this._forceClearCache=!1),t},getLineWidth:function(t){if(void 0!==this.__lineWidths[t])return this.__lineWidths[t];var e=this.measureLine(t).width;return this.__lineWidths[t]=e},_getWidthOfCharSpacing:function(){return 0!==this.charSpacing?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(t,e,i){var s=this._getStyleDeclaration(t,e);return s&&void 0!==s[i]?s[i]:this[i]},_renderTextDecoration:function(t,e){if(this[e]||this.styleHas(e)){for(var i,s,r,o,f,m,b,C,w,E,M,N,H,nt,st,p,F=this._getLeftOffset(),V=this._getTopOffset(),et=this.path,ot=this._getWidthOfCharSpacing(),ct=this.offsets[e],W=0,z=this._textLines.length;W<z;W++)if(i=this.getHeightOfLine(W),this[e]||this.styleHas(e,W)){b=this._textLines[W],nt=i/this.lineHeight,o=this._getLineLeftOffset(W),M=E=0,C=this.getValueOfPropertyAt(W,0,e),p=this.getValueOfPropertyAt(W,0,"fill"),w=V+nt*(1-this._fontSizeFraction),s=this.getHeightOfChar(W,0),f=this.getValueOfPropertyAt(W,0,"deltaY");for(var tt=0,ft=b.length;tt<ft;tt++)if(N=this.__charBounds[W][tt],H=this.getValueOfPropertyAt(W,tt,e),st=this.getValueOfPropertyAt(W,tt,"fill"),r=this.getHeightOfChar(W,tt),m=this.getValueOfPropertyAt(W,tt,"deltaY"),et&&H&&st)t.save(),t.fillStyle=p,t.translate(N.renderLeft,N.renderTop),t.rotate(N.angle),t.fillRect(-N.kernedWidth/2,ct*r+m,N.kernedWidth,this.fontSize/15),t.restore();else if((H!==C||st!==p||r!==s||m!==f)&&0<M){var at=F+o+E;"rtl"===this.direction&&(at=this.width-at-M),C&&p&&(t.fillStyle=p,t.fillRect(at,w+ct*s+f,M,this.fontSize/15)),E=N.left,M=N.width,C=H,p=st,s=r,f=m}else M+=N.kernedWidth;at=F+o+E,"rtl"===this.direction&&(at=this.width-at-M),t.fillStyle=st,H&&st&&t.fillRect(at,w+ct*s+f,M-ot,this.fontSize/15),V+=i}else V+=i;this._removeShadow(t)}},_getFontDeclaration:function(t,e){var i=t||this,s=this.fontFamily,r=-1<n.Text.genericFonts.indexOf(s.toLowerCase()),o=void 0===s||-1<s.indexOf("'")||-1<s.indexOf(",")||-1<s.indexOf('"')||r?i.fontFamily:'"'+i.fontFamily+'"';return[n.isLikelyNode?i.fontWeight:i.fontStyle,n.isLikelyNode?i.fontStyle:i.fontWeight,e?this.CACHE_FONT_SIZE+"px":i.fontSize+"px",o].join(" ")},render:function(t){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",t)))},_splitTextIntoLines:function(t){for(var e=t.split(this._reNewline),i=new Array(e.length),s=["\n"],r=[],o=0;o<e.length;o++)i[o]=n.util.string.graphemeSplit(e[o]),r=r.concat(i[o],s);return r.pop(),{_unwrappedLines:i,lines:e,graphemeText:r,graphemeLines:i}},toObject:function(t){var e=l.concat(t),i=this.callSuper("toObject",e);return i.styles=a(this.styles,!0),i.path&&(i.path=this.path.toObject()),i},set:function(t,e){this.callSuper("set",t,e);var i=!1,s=!1;if("object"==typeof t)for(var r in t)"path"===r&&this.setPathInfo(),i=i||-1!==this._dimensionAffectingProps.indexOf(r),s=s||"path"===r;else i=-1!==this._dimensionAffectingProps.indexOf(t),s="path"===t;return s&&this.setPathInfo(),i&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),n.Text.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),n.Text.DEFAULT_SVG_FONT_SIZE=16,n.Text.fromElement=function(t,e,i){if(!t)return e(null);var s=n.parseAttributes(t,n.Text.ATTRIBUTE_NAMES),r=s.textAnchor||"left";if((i=n.util.object.extend(i?a(i):{},s)).top=i.top||0,i.left=i.left||0,s.textDecoration){var o=s.textDecoration;-1!==o.indexOf("underline")&&(i.underline=!0),-1!==o.indexOf("overline")&&(i.overline=!0),-1!==o.indexOf("line-through")&&(i.linethrough=!0),delete i.textDecoration}"dx"in s&&(i.left+=s.dx),"dy"in s&&(i.top+=s.dy),"fontSize"in i||(i.fontSize=n.Text.DEFAULT_SVG_FONT_SIZE);var f="";"textContent"in t?f=t.textContent:"firstChild"in t&&null!==t.firstChild&&"data"in t.firstChild&&null!==t.firstChild.data&&(f=t.firstChild.data),f=f.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var m=i.strokeWidth;i.strokeWidth=0;var b=new n.Text(f,i),C=b.getScaledHeight()/b.height,w=((b.height+b.strokeWidth)*b.lineHeight-b.height)*C,E=b.getScaledHeight()+w,M=0;"center"===r&&(M=b.getScaledWidth()/2),"right"===r&&(M=b.getScaledWidth()),b.set({left:b.left-M,top:b.top-(E-b.fontSize*(.07+b._fontSizeFraction))/b.lineHeight,strokeWidth:void 0!==m?m:1}),e(b)},n.Text.fromObject=function(t,e){var i=a(t),s=t.path;return delete i.path,n.Object._fromObject("Text",i,function(r){s?n.Object._fromObject("Path",s,function(o){r.set("path",o),e(r)},"path"):e(r)},"text")},n.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],n.util.createAccessors&&n.util.createAccessors(n.Text)}}(typeof exports<"u"?exports:this),fabric.util.object.extend(fabric.Text.prototype,{isEmptyStyles:function(h){if(!this.styles||void 0!==h&&!this.styles[h])return!0;var n=void 0===h?this.styles:{line:this.styles[h]};for(var a in n)for(var l in n[a])for(var t in n[a][l])return!1;return!0},styleHas:function(h,n){if(!this.styles||!h||""===h||void 0!==n&&!this.styles[n])return!1;var a=void 0===n?this.styles:{0:this.styles[n]};for(var l in a)for(var t in a[l])if(void 0!==a[l][t][h])return!0;return!1},cleanStyle:function(h){if(!this.styles||!h||""===h)return!1;var n,a,l=this.styles,t=0,e=!0,i=0;for(var s in l){for(var r in n=0,l[s]){var o;t++,(o=l[s][r]).hasOwnProperty(h)?(a?o[h]!==a&&(e=!1):a=o[h],o[h]===this[h]&&delete o[h]):e=!1,0!==Object.keys(o).length?n++:delete l[s][r]}0===n&&delete l[s]}for(var f=0;f<this._textLines.length;f++)i+=this._textLines[f].length;e&&t===i&&(this[h]=a,this.removeStyle(h))},removeStyle:function(h){if(this.styles&&h&&""!==h){var n,a,l,t=this.styles;for(a in t){for(l in n=t[a])delete n[l][h],0===Object.keys(n[l]).length&&delete n[l];0===Object.keys(n).length&&delete t[a]}}},_extendStyles:function(h,n){var a=this.get2DCursorLocation(h);this._getLineStyle(a.lineIndex)||this._setLineStyle(a.lineIndex),this._getStyleDeclaration(a.lineIndex,a.charIndex)||this._setStyleDeclaration(a.lineIndex,a.charIndex,{}),fabric.util.object.extend(this._getStyleDeclaration(a.lineIndex,a.charIndex),n)},get2DCursorLocation:function(h,n){void 0===h&&(h=this.selectionStart);for(var a=n?this._unwrappedTextLines:this._textLines,l=a.length,t=0;t<l;t++){if(h<=a[t].length)return{lineIndex:t,charIndex:h};h-=a[t].length+this.missingNewlineOffset(t)}return{lineIndex:t-1,charIndex:a[t-1].length<h?a[t-1].length:h}},getSelectionStyles:function(h,n,a){void 0===h&&(h=this.selectionStart||0),void 0===n&&(n=this.selectionEnd||h);for(var l=[],t=h;t<n;t++)l.push(this.getStyleAtPosition(t,a));return l},getStyleAtPosition:function(h,n){var a=this.get2DCursorLocation(h);return(n?this.getCompleteStyleDeclaration(a.lineIndex,a.charIndex):this._getStyleDeclaration(a.lineIndex,a.charIndex))||{}},setSelectionStyles:function(h,n,a){void 0===n&&(n=this.selectionStart||0),void 0===a&&(a=this.selectionEnd||n);for(var l=n;l<a;l++)this._extendStyles(l,h);return this._forceClearCache=!0,this},_getStyleDeclaration:function(h,n){var a=this.styles&&this.styles[h];return a?a[n]:null},getCompleteStyleDeclaration:function(h,n){for(var a,l=this._getStyleDeclaration(h,n)||{},t={},e=0;e<this._styleProperties.length;e++)t[a=this._styleProperties[e]]=void 0===l[a]?this[a]:l[a];return t},_setStyleDeclaration:function(h,n,a){this.styles[h][n]=a},_deleteStyleDeclaration:function(h,n){delete this.styles[h][n]},_getLineStyle:function(h){return!!this.styles[h]},_setLineStyle:function(h){this.styles[h]={}},_deleteLineStyle:function(h){delete this.styles[h]}}),function(){function h(n){n.textDecoration&&(-1<n.textDecoration.indexOf("underline")&&(n.underline=!0),-1<n.textDecoration.indexOf("line-through")&&(n.linethrough=!0),-1<n.textDecoration.indexOf("overline")&&(n.overline=!0),delete n.textDecoration)}fabric.IText=fabric.util.createClass(fabric.Text,fabric.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(n,a){this.callSuper("initialize",n,a),this.initBehavior()},setSelectionStart:function(n){n=Math.max(n,0),this._updateAndFire("selectionStart",n)},setSelectionEnd:function(n){n=Math.min(n,this.text.length),this._updateAndFire("selectionEnd",n)},_updateAndFire:function(n,a){this[n]!==a&&(this._fireSelectionChanged(),this[n]=a),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(n){this.clearContextTop(),this.callSuper("render",n),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(n){this.callSuper("_render",n)},clearContextTop:function(n){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var a=this.canvas.contextTop,l=this.canvas.viewportTransform;a.save(),a.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this.transform(a),this._clearTextArea(a),n||a.restore()}},renderCursorOrSelection:function(){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var n=this._getCursorBoundaries(),a=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(n,a):this.renderSelection(n,a),a.restore()}},_clearTextArea:function(n){var a=this.width+4,l=this.height+4;n.clearRect(-a/2,-l/2,a,l)},_getCursorBoundaries:function(n){void 0===n&&(n=this.selectionStart);var a=this._getLeftOffset(),l=this._getTopOffset(),t=this._getCursorBoundariesOffsets(n);return{left:a,top:l,leftOffset:t.left,topOffset:t.top}},_getCursorBoundariesOffsets:function(n){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var a,l,t,e,i=0,s=0,r=this.get2DCursorLocation(n);t=r.charIndex,l=r.lineIndex;for(var o=0;o<l;o++)i+=this.getHeightOfLine(o);a=this._getLineLeftOffset(l);var f=this.__charBounds[l][t];return f&&(s=f.left),0!==this.charSpacing&&t===this._textLines[l].length&&(s-=this._getWidthOfCharSpacing()),e={top:i,left:a+(0<s?s:0)},"rtl"===this.direction&&(e.left*=-1),this.cursorOffsetCache=e,this.cursorOffsetCache},renderCursor:function(n,a){var l=this.get2DCursorLocation(),t=l.lineIndex,e=0<l.charIndex?l.charIndex-1:0,i=this.getValueOfPropertyAt(t,e,"fontSize"),s=this.scaleX*this.canvas.getZoom(),r=this.cursorWidth/s,o=n.topOffset,f=this.getValueOfPropertyAt(t,e,"deltaY");o+=(1-this._fontSizeFraction)*this.getHeightOfLine(t)/this.lineHeight-i*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(n,a),a.fillStyle=this.cursorColor||this.getValueOfPropertyAt(t,e,"fill"),a.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,a.fillRect(n.left+n.leftOffset-r/2,o+n.top+f,r,i)},renderSelection:function(n,a){for(var l=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,t=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,e=-1!==this.textAlign.indexOf("justify"),i=this.get2DCursorLocation(l),s=this.get2DCursorLocation(t),r=i.lineIndex,o=s.lineIndex,f=i.charIndex<0?0:i.charIndex,m=s.charIndex<0?0:s.charIndex,b=r;b<=o;b++){var C,w=this._getLineLeftOffset(b)||0,E=this.getHeightOfLine(b),M=0,N=0;if(b===r&&(M=this.__charBounds[r][f].left),r<=b&&b<o)N=e&&!this.isEndOfWrapping(b)?this.width:this.getLineWidth(b)||5;else if(b===o)if(0===m)N=this.__charBounds[o][m].left;else{var H=this._getWidthOfCharSpacing();N=this.__charBounds[o][m-1].left+this.__charBounds[o][m-1].width-H}C=E,(this.lineHeight<1||b===o&&1<this.lineHeight)&&(E/=this.lineHeight);var nt=n.left+w+M,st=N-M,p=E,F=0;this.inCompositionMode?(a.fillStyle=this.compositionColor||"black",p=1,F=E):a.fillStyle=this.selectionColor,"rtl"===this.direction&&(nt=this.width-nt-st),a.fillRect(nt,n.top+n.topOffset+F,st,p),n.topOffset+=C}},getCurrentCharFontSize:function(){var n=this._getCurrentCharIndex();return this.getValueOfPropertyAt(n.l,n.c,"fontSize")},getCurrentCharColor:function(){var n=this._getCurrentCharIndex();return this.getValueOfPropertyAt(n.l,n.c,"fill")},_getCurrentCharIndex:function(){var n=this.get2DCursorLocation(this.selectionStart,!0);return{l:n.lineIndex,c:0<n.charIndex?n.charIndex-1:0}}}),fabric.IText.fromObject=function(n,a){if(h(n),n.styles)for(var l in n.styles)for(var t in n.styles[l])h(n.styles[l][t]);fabric.Object._fromObject("IText",n,a,"text")}}(),function(){var h=fabric.util.object.clone;fabric.util.object.extend(fabric.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var n=this;this.on("added",function(){var a=n.canvas;a&&(a._hasITextHandlers||(a._hasITextHandlers=!0,n._initCanvasHandlers(a)),a._iTextInstances=a._iTextInstances||[],a._iTextInstances.push(n))})},initRemovedHandler:function(){var n=this;this.on("removed",function(){var a=n.canvas;a&&(a._iTextInstances=a._iTextInstances||[],fabric.util.removeFromArray(a._iTextInstances,n),0===a._iTextInstances.length&&(a._hasITextHandlers=!1,n._removeCanvasHandlers(a)))})},_initCanvasHandlers:function(n){n._mouseUpITextHandler=function(){n._iTextInstances&&n._iTextInstances.forEach(function(a){a.__isMousedown=!1})},n.on("mouse:up",n._mouseUpITextHandler)},_removeCanvasHandlers:function(n){n.off("mouse:up",n._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(n,a,l,t){var e;return e={isAborted:!1,abort:function(){this.isAborted=!0}},n.animate("_currentCursorOpacity",a,{duration:l,onComplete:function(){e.isAborted||n[t]()},onChange:function(){n.canvas&&n.selectionStart===n.selectionEnd&&n.renderCursorOrSelection()},abort:function(){return e.isAborted}}),e},_onTickComplete:function(){var n=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){n._currentTickCompleteState=n._animateCursor(n,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(n){var a=this,l=n?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){a._tick()},l)},abortCursorAnimation:function(){var n=this._currentTickState||this._currentTickCompleteState,a=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,n&&a&&a.clearContext(a.contextTop||a.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(n){var a=0,l=n-1;if(this._reSpace.test(this._text[l]))for(;this._reSpace.test(this._text[l]);)a++,l--;for(;/\S/.test(this._text[l])&&-1<l;)a++,l--;return n-a},findWordBoundaryRight:function(n){var a=0,l=n;if(this._reSpace.test(this._text[l]))for(;this._reSpace.test(this._text[l]);)a++,l++;for(;/\S/.test(this._text[l])&&l<this._text.length;)a++,l++;return n+a},findLineBoundaryLeft:function(n){for(var a=0,l=n-1;!/\n/.test(this._text[l])&&-1<l;)a++,l--;return n-a},findLineBoundaryRight:function(n){for(var a=0,l=n;!/\n/.test(this._text[l])&&l<this._text.length;)a++,l++;return n+a},searchWordBoundary:function(n,a){for(var l=this._text,t=this._reSpace.test(l[n])?n-1:n,e=l[t],i=fabric.reNonWord;!i.test(e)&&0<t&&t<l.length;)e=l[t+=a];return i.test(e)&&(t+=1===a?0:1),t},selectWord:function(n){var a=this.searchWordBoundary(n=n||this.selectionStart,-1),l=this.searchWordBoundary(n,1);this.selectionStart=a,this.selectionEnd=l,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(n){var a=this.findLineBoundaryLeft(n=n||this.selectionStart),l=this.findLineBoundaryRight(n);return this.selectionStart=a,this.selectionEnd=l,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(n){if(!this.isEditing&&this.editable)return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(n),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll()),this},exitEditingOnOthers:function(n){n._iTextInstances&&n._iTextInstances.forEach(function(a){a.selected=!1,a.isEditing&&a.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(n){if(this.__isMousedown&&this.isEditing){var a=this.getSelectionStartFromPointer(n.e),l=this.selectionStart,t=this.selectionEnd;(a===this.__selectionStartOnMouseDown&&l!==t||l!==a&&t!==a)&&(a>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=a):(this.selectionStart=a,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===l&&this.selectionEnd===t||(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(n,a,l){var t=l.slice(0,n),e=fabric.util.string.graphemeSplit(t).length;if(n===a)return{selectionStart:e,selectionEnd:e};var i=l.slice(n,a);return{selectionStart:e,selectionEnd:e+fabric.util.string.graphemeSplit(i).length}},fromGraphemeToStringSelection:function(n,a,l){var t=l.slice(0,n).join("").length;return n===a?{selectionStart:t,selectionEnd:t}:{selectionStart:t,selectionEnd:t+l.slice(n,a).join("").length}},_updateTextarea:function(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){var n=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=n.selectionStart,this.hiddenTextarea.selectionEnd=n.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var n=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=n.selectionEnd,this.inCompositionMode||(this.selectionStart=n.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var n=this._calcTextareaPosition();this.hiddenTextarea.style.left=n.left,this.hiddenTextarea.style.top=n.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var n=this.inCompositionMode?this.compositionStart:this.selectionStart,a=this._getCursorBoundaries(n),l=this.get2DCursorLocation(n),i=this.getValueOfPropertyAt(l.lineIndex,l.charIndex,"fontSize")*this.lineHeight,s=a.leftOffset,r=this.calcTransformMatrix(),o={x:a.left+s,y:a.top+a.topOffset+i},f=this.canvas.getRetinaScaling(),m=this.canvas.upperCanvasEl,b=m.width/f,C=m.height/f,w=b-i,E=C-i,M=m.clientWidth/b,N=m.clientHeight/C;return o=fabric.util.transformPoint(o,r),(o=fabric.util.transformPoint(o,this.canvas.viewportTransform)).x*=M,o.y*=N,o.x<0&&(o.x=0),o.x>w&&(o.x=w),o.y<0&&(o.y=0),o.y>E&&(o.y=E),o.x+=this.canvas._offset.left,o.y+=this.canvas._offset.top,{left:o.x+"px",top:o.y+"px",fontSize:i+"px",charHeight:i}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var n=this._textBeforeEdit!==this.text,a=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,a&&(a.blur&&a.blur(),a.parentNode&&a.parentNode.removeChild(a)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),n&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),n&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var n in this.styles)this._textLines[n]||delete this.styles[n]},removeStyleFromTo:function(n,a){var l,t,e=this.get2DCursorLocation(n,!0),i=this.get2DCursorLocation(a,!0),s=e.lineIndex,r=e.charIndex,o=i.lineIndex,f=i.charIndex;if(s!==o){if(this.styles[s])for(l=r;l<this._unwrappedTextLines[s].length;l++)delete this.styles[s][l];if(this.styles[o])for(l=f;l<this._unwrappedTextLines[o].length;l++)(t=this.styles[o][l])&&(this.styles[s]||(this.styles[s]={}),this.styles[s][r+l-f]=t);for(l=s+1;l<=o;l++)delete this.styles[l];this.shiftLineStyles(o,s-o)}else if(this.styles[s]){t=this.styles[s];var m,b,C=f-r;for(l=r;l<f;l++)delete t[l];for(b in this.styles[s])f<=(m=parseInt(b,10))&&(t[m-C]=t[b],delete t[b])}},shiftLineStyles:function(n,a){var l=h(this.styles);for(var t in this.styles){var e=parseInt(t,10);n<e&&(this.styles[e+a]=l[e],l[e-a]||delete this.styles[e])}},restartCursorIfNeeded:function(){this._currentTickState&&!this._currentTickState.isAborted&&this._currentTickCompleteState&&!this._currentTickCompleteState.isAborted||this.initDelayedCursor()},insertNewlineStyleObject:function(n,a,l,t){var e,i={},s=!1,r=this._unwrappedTextLines[n].length===a;for(var o in l||(l=1),this.shiftLineStyles(n,l),this.styles[n]&&(e=this.styles[n][0===a?a:a-1]),this.styles[n]){var f=parseInt(o,10);a<=f&&(s=!0,i[f-a]=this.styles[n][o],r&&0===a||delete this.styles[n][o])}var m=!1;for(s&&!r&&(this.styles[n+l]=i,m=!0),m&&l--;0<l;)t&&t[l-1]?this.styles[n+l]={0:h(t[l-1])}:e?this.styles[n+l]={0:h(e)}:delete this.styles[n+l],l--;this._forceClearCache=!0},insertCharStyleObject:function(n,a,l,t){this.styles||(this.styles={});var e=this.styles[n],i=e?h(e):{};for(var s in l||(l=1),i){var r=parseInt(s,10);a<=r&&(e[r+l]=i[r],i[r-l]||delete e[r])}if(this._forceClearCache=!0,t)for(;l--;)Object.keys(t[l]).length&&(this.styles[n]||(this.styles[n]={}),this.styles[n][a+l]=h(t[l]));else if(e)for(var o=e[a?a-1:1];o&&l--;)this.styles[n][a+l]=h(o)},insertNewStyleBlock:function(n,a,l){for(var t=this.get2DCursorLocation(a,!0),e=[0],i=0,s=0;s<n.length;s++)"\n"===n[s]?e[++i]=0:e[i]++;for(0<e[0]&&(this.insertCharStyleObject(t.lineIndex,t.charIndex,e[0],l),l=l&&l.slice(e[0]+1)),i&&this.insertNewlineStyleObject(t.lineIndex,t.charIndex+e[0],i),s=1;s<i;s++)0<e[s]?this.insertCharStyleObject(t.lineIndex+s,0,e[s],l):l&&this.styles[t.lineIndex+s]&&l[0]&&(this.styles[t.lineIndex+s][0]=l[0]),l=l&&l.slice(e[s]+1);0<e[s]&&this.insertCharStyleObject(t.lineIndex+s,0,e[s],l)},setSelectionStartEndWithShift:function(n,a,l){l<=n?(a===n?this._selectionDirection="left":"right"===this._selectionDirection&&(this._selectionDirection="left",this.selectionEnd=n),this.selectionStart=l):n<l&&l<a?"right"===this._selectionDirection?this.selectionEnd=l:this.selectionStart=l:(a===n?this._selectionDirection="right":"left"===this._selectionDirection&&(this._selectionDirection="right",this.selectionStart=a),this.selectionEnd=l)},setSelectionInBoundaries:function(){var n=this.text.length;this.selectionStart>n?this.selectionStart=n:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>n?this.selectionEnd=n:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),fabric.util.object.extend(fabric.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(h){if(this.canvas){this.__newClickTime=+new Date;var n=h.pointer;this.isTripleClick(n)&&(this.fire("tripleclick",h),this._stopEvent(h.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=n,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(h){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===h.x&&this.__lastPointer.y===h.y},_stopEvent:function(h){h.preventDefault&&h.preventDefault(),h.stopPropagation&&h.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(h){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(h.e))},tripleClickHandler:function(h){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(h.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(h){!this.canvas||!this.editable||h.e.button&&1!==h.e.button||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(h.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(h){!this.canvas||!this.editable||h.e.button&&1!==h.e.button||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(h){if(this.__isMousedown=!1,!(!this.editable||this.group||h.transform&&h.transform.actionPerformed||h.e.button&&1!==h.e.button)){if(this.canvas){var n=this.canvas._activeObject;if(n&&n!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(h.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(h){var n=this.getSelectionStartFromPointer(h);h.shiftKey?this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,n):(this.selectionStart=n,this.selectionEnd=n),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(h){for(var n,a=this.getLocalPointer(h),l=0,t=0,e=0,i=0,s=0,r=0,o=this._textLines.length;r<o&&e<=a.y;r++)e+=this.getHeightOfLine(r)*this.scaleY,0<(s=r)&&(i+=this._textLines[r-1].length+this.missingNewlineOffset(r-1));t=this._getLineLeftOffset(s)*this.scaleX,n=this._textLines[s],"rtl"===this.direction&&(a.x=this.width*this.scaleX-a.x+t);for(var f=0,m=n.length;f<m&&(l=t,(t+=this.__charBounds[s][f].kernedWidth*this.scaleX)<=a.x);f++)i++;return this._getNewSelectionStartFromOffset(a,l,t,i,m)},_getNewSelectionStartFromOffset:function(h,n,a,l,t){var i=a-h.x,s=l+(h.x-n<i||i<0?0:1);return this.flipX&&(s=t-s),s>this._text.length&&(s=this._text.length),s}}),fabric.util.object.extend(fabric.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=fabric.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var h=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+h.top+"; left: "+h.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding\uff70top: "+h.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):fabric.document.body.appendChild(this.hiddenTextarea),fabric.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),fabric.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),fabric.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),fabric.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),fabric.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),fabric.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),fabric.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),fabric.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),fabric.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(fabric.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(h){if(this.isEditing){var n="rtl"===this.direction?this.keysMapRtl:this.keysMap;if(h.keyCode in n)this[n[h.keyCode]](h);else{if(!(h.keyCode in this.ctrlKeysMapDown)||!h.ctrlKey&&!h.metaKey)return;this[this.ctrlKeysMapDown[h.keyCode]](h)}h.stopImmediatePropagation(),h.preventDefault(),33<=h.keyCode&&h.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(h){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:h.keyCode in this.ctrlKeysMapUp&&(h.ctrlKey||h.metaKey)&&(this[this.ctrlKeysMapUp[h.keyCode]](h),h.stopImmediatePropagation(),h.preventDefault(),this.canvas&&this.canvas.requestRenderAll())},onInput:function(h){var n=this.fromPaste;if(this.fromPaste=!1,h&&h.stopPropagation(),this.isEditing){var a,l,t,e,i,s=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,r=this._text.length,o=s.length,f=o-r,m=this.selectionStart,b=this.selectionEnd,C=m!==b;if(""===this.hiddenTextarea.value)return this.styles={},this.updateFromTextArea(),this.fire("changed"),void(this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll()));var w=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),E=m>w.selectionStart;C?(a=this._text.slice(m,b),f+=b-m):o<r&&(a=E?this._text.slice(b+f,b):this._text.slice(m,m-f)),l=s.slice(w.selectionEnd-f,w.selectionEnd),a&&a.length&&(l.length&&(t=this.getSelectionStyles(m,m+1,!1),t=l.map(function(){return t[0]})),C?(e=m,i=b):E?(e=b-a.length,i=b):i=(e=b)+a.length,this.removeStyleFromTo(e,i)),l.length&&(n&&l.join("")===fabric.copiedText&&!fabric.disableStyleCopyPaste&&(t=fabric.copiedTextStyle),this.insertNewStyleBlock(l,m,t)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(h){this.compositionStart=h.target.selectionStart,this.compositionEnd=h.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(fabric.copiedText=this.getSelectedText(),fabric.copiedTextStyle=fabric.disableStyleCopyPaste?null:this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(h){return h&&h.clipboardData||fabric.window.clipboardData},_getWidthBeforeCursor:function(h,n){var a,l=this._getLineLeftOffset(h);return 0<n&&(l+=(a=this.__charBounds[h][n-1]).left+a.width),l},getDownCursorOffset:function(h,n){var a=this._getSelectionForOffset(h,n),l=this.get2DCursorLocation(a),t=l.lineIndex;if(t===this._textLines.length-1||h.metaKey||34===h.keyCode)return this._text.length-a;var e=l.charIndex,i=this._getWidthBeforeCursor(t,e),s=this._getIndexOnLine(t+1,i);return this._textLines[t].slice(e).length+s+1+this.missingNewlineOffset(t)},_getSelectionForOffset:function(h,n){return h.shiftKey&&this.selectionStart!==this.selectionEnd&&n?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(h,n){var a=this._getSelectionForOffset(h,n),l=this.get2DCursorLocation(a),t=l.lineIndex;if(0===t||h.metaKey||33===h.keyCode)return-a;var e=l.charIndex,i=this._getWidthBeforeCursor(t,e),s=this._getIndexOnLine(t-1,i),r=this._textLines[t].slice(0,e),o=this.missingNewlineOffset(t-1);return-this._textLines[t-1].length+s-r.length+(1-o)},_getIndexOnLine:function(h,n){for(var a,l,t=this._textLines[h],e=this._getLineLeftOffset(h),i=0,s=0,r=t.length;s<r;s++)if(n<(e+=a=this.__charBounds[h][s].width)){l=!0;var f=e,m=Math.abs(e-a-n);i=Math.abs(f-n)<m?s:s-1;break}return l||(i=t.length-1),i},moveCursorDown:function(h){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",h)},moveCursorUp:function(h){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorUpOrDown("Up",h)},_moveCursorUpOrDown:function(h,n){var a=this["get"+h+"CursorOffset"](n,"right"===this._selectionDirection);n.shiftKey?this.moveCursorWithShift(a):this.moveCursorWithoutShift(a),0!==a&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(h){return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,"left"===this._selectionDirection?this.selectionStart+h:this.selectionEnd+h),0!==h},moveCursorWithoutShift:function(h){return h<0?(this.selectionStart+=h,this.selectionEnd=this.selectionStart):(this.selectionEnd+=h,this.selectionStart=this.selectionEnd),0!==h},moveCursorLeft:function(h){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorLeftOrRight("Left",h)},_move:function(h,n,a){var l;if(h.altKey)l=this["findWordBoundary"+a](this[n]);else{if(!h.metaKey&&35!==h.keyCode&&36!==h.keyCode)return this[n]+="Left"===a?-1:1,!0;l=this["findLineBoundary"+a](this[n])}if(void 0!==typeof l&&this[n]!==l)return this[n]=l,!0},_moveLeft:function(h,n){return this._move(h,n,"Left")},_moveRight:function(h,n){return this._move(h,n,"Right")},moveCursorLeftWithoutShift:function(h){var n=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&0!==this.selectionStart&&(n=this._moveLeft(h,"selectionStart")),this.selectionEnd=this.selectionStart,n},moveCursorLeftWithShift:function(h){return"right"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveLeft(h,"selectionEnd"):0!==this.selectionStart?(this._selectionDirection="left",this._moveLeft(h,"selectionStart")):void 0},moveCursorRight:function(h){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",h)},_moveCursorLeftOrRight:function(h,n){var a="moveCursor"+h+"With";this._currentCursorOpacity=1,this[a+=n.shiftKey?"Shift":"outShift"](n)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(h){return"left"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveRight(h,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection="right",this._moveRight(h,"selectionEnd")):void 0},moveCursorRightWithoutShift:function(h){var n=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(n=this._moveRight(h,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,n},removeChars:function(h,n){void 0===n&&(n=h+1),this.removeStyleFromTo(h,n),this._text.splice(h,n-h),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(h,n,a,l){void 0===l&&(l=a),a<l&&this.removeStyleFromTo(a,l);var t=fabric.util.string.graphemeSplit(h);this.insertNewStyleBlock(t,a,n),this._text=[].concat(this._text.slice(0,a),t,this._text.slice(l)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var h=fabric.util.toFixed,n=/  +/g;fabric.util.object.extend(fabric.Text.prototype,{_toSVG:function(){var a=this._getSVGLeftTopOffsets(),l=this._getSVGTextAndBg(a.textTop,a.textLeft);return this._wrapSVGTextAndBg(l)},toSVG:function(a){return this._createBaseSVGMarkup(this._toSVG(),{reviver:a,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(a){var l=this.getSvgTextDecoration(this);return[a.textBgRects.join(""),'\t\t<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",l?'text-decoration="'+l+'" ':"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",a.textSpans.join(""),"</text>\n"]},_getSVGTextAndBg:function(a,l){var t,e=[],i=[],s=a;this._setSVGBg(i);for(var r=0,o=this._textLines.length;r<o;r++)t=this._getLineLeftOffset(r),(this.textBackgroundColor||this.styleHas("textBackgroundColor",r))&&this._setSVGTextLineBg(i,r,l+t,s),this._setSVGTextLineText(e,r,l+t,s),s+=this.getHeightOfLine(r);return{textSpans:e,textBgRects:i}},_createTextCharSpan:function(a,l,t,e){var i=a!==a.trim()||a.match(n),s=this.getSvgSpanStyles(l,i),r=s?'style="'+s+'"':"",o=l.deltaY,f="",m=fabric.Object.NUM_FRACTION_DIGITS;return o&&(f=' dy="'+h(o,m)+'" '),['<tspan x="',h(t,m),'" y="',h(e,m),'" ',f,r,">",fabric.util.string.escapeXml(a),"</tspan>"].join("")},_setSVGTextLineText:function(a,l,t,e){var i,s,r,o,f,m=this.getHeightOfLine(l),b=-1!==this.textAlign.indexOf("justify"),C="",w=0,E=this._textLines[l];e+=m*(1-this._fontSizeFraction)/this.lineHeight;for(var M=0,N=E.length-1;M<=N;M++)f=M===N||this.charSpacing,C+=E[M],r=this.__charBounds[l][M],0===w?(t+=r.kernedWidth-r.width,w+=r.width):w+=r.kernedWidth,b&&!f&&this._reSpaceAndTab.test(E[M])&&(f=!0),f||(i=i||this.getCompleteStyleDeclaration(l,M),s=this.getCompleteStyleDeclaration(l,M+1),f=this._hasStyleChangedForSvg(i,s)),f&&(o=this._getStyleDeclaration(l,M)||{},a.push(this._createTextCharSpan(C,o,t,e)),C="",i=s,t+=w,w=0)},_pushTextBgRect:function(a,l,t,e,i,s){var r=fabric.Object.NUM_FRACTION_DIGITS;a.push("\t\t<rect ",this._getFillAttributes(l),' x="',h(t,r),'" y="',h(e,r),'" width="',h(i,r),'" height="',h(s,r),'"></rect>\n')},_setSVGTextLineBg:function(a,l,t,e){for(var i,s,r=this._textLines[l],o=this.getHeightOfLine(l)/this.lineHeight,f=0,m=0,b=this.getValueOfPropertyAt(l,0,"textBackgroundColor"),C=0,w=r.length;C<w;C++)i=this.__charBounds[l][C],(s=this.getValueOfPropertyAt(l,C,"textBackgroundColor"))!==b?(b&&this._pushTextBgRect(a,b,t+m,e,f,o),m=i.left,f=i.width,b=s):f+=i.kernedWidth;s&&this._pushTextBgRect(a,s,t+m,e,f,o)},_getFillAttributes:function(a){var l=a&&"string"==typeof a?new fabric.Color(a):"";return l&&l.getSource()&&1!==l.getAlpha()?'opacity="'+l.getAlpha()+'" fill="'+l.setAlpha(1).toRgb()+'"':'fill="'+a+'"'},_getSVGLineTopOffset:function(a){for(var l,t=0,e=0;e<a;e++)t+=this.getHeightOfLine(e);return l=this.getHeightOfLine(e),{lineTop:t,offset:(this._fontSizeMult-this._fontSizeFraction)*l/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(a){return fabric.Object.prototype.getSvgStyles.call(this,a)+" white-space: pre;"}})}(),function(h){"use strict";var n=h.fabric||(h.fabric={});n.Textbox=n.util.createClass(n.IText,n.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:n.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(a){for(var l=0,t=0,e=0,i={},s=0;s<a.graphemeLines.length;s++)"\n"===a.graphemeText[e]&&0<s?(t=0,e++,l++):!this.splitByGrapheme&&this._reSpaceAndTab.test(a.graphemeText[e])&&0<s&&(t++,e++),i[s]={line:l,offset:t},e+=a.graphemeLines[s].length,t+=a.graphemeLines[s].length;return i},styleHas:function(a,l){if(this._styleMap&&!this.isWrapping){var t=this._styleMap[l];t&&(l=t.line)}return n.Text.prototype.styleHas.call(this,a,l)},isEmptyStyles:function(a){if(!this.styles)return!0;var l,t,e=0,i=!1,s=this._styleMap[a],r=this._styleMap[a+1];for(var o in s&&(a=s.line,e=s.offset),r&&(i=r.line===a,l=r.offset),t=void 0===a?this.styles:{line:this.styles[a]})for(var f in t[o])if(e<=f&&(!i||f<l))for(var m in t[o][f])return!1;return!0},_getStyleDeclaration:function(a,l){if(this._styleMap&&!this.isWrapping){var t=this._styleMap[a];if(!t)return null;a=t.line,l=t.offset+l}return this.callSuper("_getStyleDeclaration",a,l)},_setStyleDeclaration:function(a,l,t){var e=this._styleMap[a];this.styles[a=e.line][l=e.offset+l]=t},_deleteStyleDeclaration:function(a,l){var t=this._styleMap[a];delete this.styles[a=t.line][l=t.offset+l]},_getLineStyle:function(a){return!!this.styles[this._styleMap[a].line]},_setLineStyle:function(a){this.styles[this._styleMap[a].line]={}},_wrapText:function(a,l){var t,e=[];for(this.isWrapping=!0,t=0;t<a.length;t++)e=e.concat(this._wrapLine(a[t],t,l));return this.isWrapping=!1,e},_measureWord:function(a,l,t){var e,i=0;t=t||0;for(var s=0,r=a.length;s<r;s++)i+=this._getGraphemeBox(a[s],l,s+t,e,!0).kernedWidth,e=a[s];return i},_wrapLine:function(a,l,t,e){var i=0,s=this.splitByGrapheme,r=[],o=[],f=s?n.util.string.graphemeSplit(a):a.split(this._wordJoiners),m="",b=0,C=s?"":" ",w=0,E=0,M=0,N=!0,H=this._getWidthOfCharSpacing();e=e||0,0===f.length&&f.push([]),t-=e;for(var nt=0;nt<f.length;nt++)m=s?f[nt]:n.util.string.graphemeSplit(f[nt]),w=this._measureWord(m,l,b),b+=m.length,t<(i+=E+w-H)&&!N?(r.push(o),o=[],i=w,N=!0):i+=H,N||s||o.push(C),o=o.concat(m),E=s?0:this._measureWord([C],l,b),b++,N=!1,M<w&&(M=w);return nt&&r.push(o),M+e>this.dynamicMinWidth&&(this.dynamicMinWidth=M-H+e),r},isEndOfWrapping:function(a){return!this._styleMap[a+1]||this._styleMap[a+1].line!==this._styleMap[a].line},missingNewlineOffset:function(a){return this.splitByGrapheme?this.isEndOfWrapping(a)?1:0:1},_splitTextIntoLines:function(a){for(var l=n.Text.prototype._splitTextIntoLines.call(this,a),t=this._wrapText(l.lines,this.width),e=new Array(t.length),i=0;i<t.length;i++)e[i]=t[i].join("");return l.lines=e,l.graphemeLines=t,l},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var a={};for(var l in this._styleMap)this._textLines[l]&&(a[this._styleMap[l].line]=1);for(var l in this.styles)a[l]||delete this.styles[l]},toObject:function(a){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(a))}}),n.Textbox.fromObject=function(a,l){return n.Object._fromObject("Textbox",a,l,"text")}}(typeof exports<"u"?exports:this),function(){var h=fabric.controlsUtils,n=h.scaleSkewCursorStyleHandler,a=h.scaleCursorStyleHandler,l=h.scalingEqually,t=h.scalingYOrSkewingX,e=h.scalingXOrSkewingY,i=h.scaleOrSkewActionName,s=fabric.Object.prototype.controls;if(s.ml=new fabric.Control({x:-.5,y:0,cursorStyleHandler:n,actionHandler:e,getActionName:i}),s.mr=new fabric.Control({x:.5,y:0,cursorStyleHandler:n,actionHandler:e,getActionName:i}),s.mb=new fabric.Control({x:0,y:.5,cursorStyleHandler:n,actionHandler:t,getActionName:i}),s.mt=new fabric.Control({x:0,y:-.5,cursorStyleHandler:n,actionHandler:t,getActionName:i}),s.tl=new fabric.Control({x:-.5,y:-.5,cursorStyleHandler:a,actionHandler:l}),s.tr=new fabric.Control({x:.5,y:-.5,cursorStyleHandler:a,actionHandler:l}),s.bl=new fabric.Control({x:-.5,y:.5,cursorStyleHandler:a,actionHandler:l}),s.br=new fabric.Control({x:.5,y:.5,cursorStyleHandler:a,actionHandler:l}),s.mtr=new fabric.Control({x:0,y:-.5,actionHandler:h.rotationWithSnapping,cursorStyleHandler:h.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),fabric.Textbox){var r=fabric.Textbox.prototype.controls={};r.mtr=s.mtr,r.tr=s.tr,r.br=s.br,r.tl=s.tl,r.bl=s.bl,r.mt=s.mt,r.mb=s.mb,r.mr=new fabric.Control({x:.5,y:0,actionHandler:h.changeWidth,cursorStyleHandler:n,actionName:"resizing"}),r.ml=new fabric.Control({x:-.5,y:0,actionHandler:h.changeWidth,cursorStyleHandler:n,actionName:"resizing"})}}(),function(h,n){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=h.document?n(h,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return n(a)}:n(h)}(typeof window<"u"?window:this,function(h,n){"use strict";var a=[],l=Object.getPrototypeOf,t=a.slice,e=a.flat?function(c){return a.flat.call(c)}:function(c){return a.concat.apply([],c)},i=a.push,s=a.indexOf,r={},o=r.toString,f=r.hasOwnProperty,m=f.toString,b=m.call(Object),C={},w=function(c){return"function"==typeof c&&"number"!=typeof c.nodeType&&"function"!=typeof c.item},E=function(c){return null!=c&&c===c.window},M=h.document,N={type:!0,src:!0,nonce:!0,noModule:!0};function H(c,d,v){var y,T,k=(v=v||M).createElement("script");if(k.text=c,d)for(y in N)(T=d[y]||d.getAttribute&&d.getAttribute(y))&&k.setAttribute(y,T);v.head.appendChild(k).parentNode.removeChild(k)}function nt(c){return null==c?c+"":"object"==typeof c||"function"==typeof c?r[o.call(c)]||"object":typeof c}var p=function(c,d){return new p.fn.init(c,d)};function F(c){var d=!!c&&"length"in c&&c.length,v=nt(c);return!w(c)&&!E(c)&&("array"===v||0===d||"number"==typeof d&&0<d&&d-1 in c)}p.fn=p.prototype={jquery:"3.6.0",constructor:p,length:0,toArray:function(){return t.call(this)},get:function(c){return null==c?t.call(this):c<0?this[c+this.length]:this[c]},pushStack:function(c){var d=p.merge(this.constructor(),c);return d.prevObject=this,d},each:function(c){return p.each(this,c)},map:function(c){return this.pushStack(p.map(this,function(d,v){return c.call(d,v,d)}))},slice:function(){return this.pushStack(t.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(p.grep(this,function(c,d){return(d+1)%2}))},odd:function(){return this.pushStack(p.grep(this,function(c,d){return d%2}))},eq:function(c){var d=this.length,v=+c+(c<0?d:0);return this.pushStack(0<=v&&v<d?[this[v]]:[])},end:function(){return this.prevObject||this.constructor()},push:i,sort:a.sort,splice:a.splice},p.extend=p.fn.extend=function(){var c,d,v,y,T,k,j=arguments[0]||{},R=1,Y=arguments.length,q=!1;for("boolean"==typeof j&&(q=j,j=arguments[R]||{},R++),"object"==typeof j||w(j)||(j={}),R===Y&&(j=this,R--);R<Y;R++)if(null!=(c=arguments[R]))for(d in c)y=c[d],"__proto__"!==d&&j!==y&&(q&&y&&(p.isPlainObject(y)||(T=Array.isArray(y)))?(v=j[d],k=T&&!Array.isArray(v)?[]:T||p.isPlainObject(v)?v:{},T=!1,j[d]=p.extend(q,k,y)):void 0!==y&&(j[d]=y));return j},p.extend({expando:"jQuery"+("3.6.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(c){throw new Error(c)},noop:function(){},isPlainObject:function(c){var d,v;return!(!c||"[object Object]"!==o.call(c)||(d=l(c))&&("function"!=typeof(v=f.call(d,"constructor")&&d.constructor)||m.call(v)!==b))},isEmptyObject:function(c){var d;for(d in c)return!1;return!0},globalEval:function(c,d,v){H(c,{nonce:d&&d.nonce},v)},each:function(c,d){var v,y=0;if(F(c))for(v=c.length;y<v&&!1!==d.call(c[y],y,c[y]);y++);else for(y in c)if(!1===d.call(c[y],y,c[y]))break;return c},makeArray:function(c,d){var v=d||[];return null!=c&&(F(Object(c))?p.merge(v,"string"==typeof c?[c]:c):i.call(v,c)),v},inArray:function(c,d,v){return null==d?-1:s.call(d,c,v)},merge:function(c,d){for(var v=+d.length,y=0,T=c.length;y<v;y++)c[T++]=d[y];return c.length=T,c},grep:function(c,d,v){for(var y=[],T=0,k=c.length,j=!v;T<k;T++)!d(c[T],T)!==j&&y.push(c[T]);return y},map:function(c,d,v){var y,T,k=0,j=[];if(F(c))for(y=c.length;k<y;k++)null!=(T=d(c[k],k,v))&&j.push(T);else for(k in c)null!=(T=d(c[k],k,v))&&j.push(T);return e(j)},guid:1,support:C}),"function"==typeof Symbol&&(p.fn[Symbol.iterator]=a[Symbol.iterator]),p.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(c,d){r["[object "+d+"]"]=d.toLowerCase()});var V=function(c){var d,v,y,T,k,j,R,Y,q,D,g,x,A,$,lt,ht,Bt,qt,pe,ee="sizzle"+1*new Date,zt=c.document,De=0,Zt=0,ue=Qn(),Ve=Qn(),Ri=Qn(),Ue=Qn(),Bi=function(L,B){return L===B&&(g=!0),0},si={}.hasOwnProperty,Ke=[],pn=Ke.pop,mi=Ke.push,Oe=Ke.push,vi=Ke.slice,_i=function(L,B){for(var K=0,gt=L.length;K<gt;K++)if(L[K]===B)return K;return-1},ii="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",te="[\\x20\\t\\r\\n\\f]",fe="(?:\\\\[\\da-fA-F]{1,6}"+te+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Ie="\\["+te+"*("+fe+")(?:"+te+"*([*^$|!~]?=)"+te+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+fe+"))|)"+te+"*\\]",ui=":("+fe+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+Ie+")*)|.*)\\)|)",Le=new RegExp(te+"+","g"),fi=new RegExp("^"+te+"+|((?:^|[^\\\\])(?:\\\\.)*)"+te+"+$","g"),jn=new RegExp("^"+te+"*,"+te+"*"),qn=new RegExp("^"+te+"*([>+~]|"+te+")"+te+"*"),Gi=new RegExp(te+"|>"),_r=new RegExp(ui),yr=new RegExp("^"+fe+"$"),$n={ID:new RegExp("^#("+fe+")"),CLASS:new RegExp("^\\.("+fe+")"),TAG:new RegExp("^("+fe+"|[*])"),ATTR:new RegExp("^"+Ie),PSEUDO:new RegExp("^"+ui),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+te+"*(even|odd|(([+-]|)(\\d*)n|)"+te+"*(?:([+-]|)"+te+"*(\\d+)|))"+te+"*\\)|)","i"),bool:new RegExp("^(?:"+ii+")$","i"),needsContext:new RegExp("^"+te+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+te+"*((?:-\\d)?\\d*)"+te+"*\\)|)(?=[^-]|$)","i")},br=/HTML$/i,hr=/^(?:input|select|textarea|button)$/i,xr=/^h\d$/i,Hn=/^[^{]+\{\s*\[native \w/,wr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,rr=/[+~]/,qi=new RegExp("\\\\[\\da-fA-F]{1,6}"+te+"?|\\\\([^\\r\\n\\f])","g"),ki=function(L,B){var K="0x"+L.slice(1)-65536;return B||(K<0?String.fromCharCode(K+65536):String.fromCharCode(K>>10|55296,1023&K|56320))},Wn=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,sr=function(L,B){return B?"\0"===L?"\ufffd":L.slice(0,-1)+"\\"+L.charCodeAt(L.length-1).toString(16)+" ":"\\"+L},or=function(){x()},Kn=on(function(L){return!0===L.disabled&&"fieldset"===L.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{Oe.apply(Ke=vi.call(zt.childNodes),zt.childNodes)}catch{Oe={apply:Ke.length?function(B,K){mi.apply(B,vi.call(K))}:function(B,K){for(var gt=B.length,it=0;B[gt++]=K[it++];);B.length=gt-1}}}function ye(L,B,K,gt){var it,vt,xt,Ot,Dt,$t,Gt,Vt=B&&B.ownerDocument,S=B?B.nodeType:9;if(K=K||[],"string"!=typeof L||!L||1!==S&&9!==S&&11!==S)return K;if(!gt&&(x(B),B=B||A,lt)){if(11!==S&&(Dt=wr.exec(L)))if(it=Dt[1]){if(9===S){if(!(xt=B.getElementById(it)))return K;if(xt.id===it)return K.push(xt),K}else if(Vt&&(xt=Vt.getElementById(it))&&pe(B,xt)&&xt.id===it)return K.push(xt),K}else{if(Dt[2])return Oe.apply(K,B.getElementsByTagName(L)),K;if((it=Dt[3])&&v.getElementsByClassName&&B.getElementsByClassName)return Oe.apply(K,B.getElementsByClassName(it)),K}if(v.qsa&&!Ue[L+" "]&&(!ht||!ht.test(L))&&(1!==S||"object"!==B.nodeName.toLowerCase())){if(Gt=L,Vt=B,1===S&&(Gi.test(L)||qn.test(L))){for((Vt=rr.test(L)&&Zn(B.parentNode)||B)===B&&v.scope||((Ot=B.getAttribute("id"))?Ot=Ot.replace(Wn,sr):B.setAttribute("id",Ot=ee)),vt=($t=j(L)).length;vt--;)$t[vt]=(Ot?"#"+Ot:":scope")+" "+tr($t[vt]);Gt=$t.join(",")}try{return Oe.apply(K,Vt.querySelectorAll(Gt)),K}catch{Ue(L,!0)}finally{Ot===ee&&B.removeAttribute("id")}}}return Y(L.replace(fi,"$1"),B,K,gt)}function Qn(){var L=[];return function B(K,gt){return L.push(K+" ")>y.cacheLength&&delete B[L.shift()],B[K+" "]=gt}}function Di(L){return L[ee]=!0,L}function Pi(L){var B=A.createElement("fieldset");try{return!!L(B)}catch{return!1}finally{B.parentNode&&B.parentNode.removeChild(B),B=null}}function $i(L,B){for(var K=L.split("|"),gt=K.length;gt--;)y.attrHandle[K[gt]]=B}function ur(L,B){var K=B&&L,gt=K&&1===L.nodeType&&1===B.nodeType&&L.sourceIndex-B.sourceIndex;if(gt)return gt;if(K)for(;K=K.nextSibling;)if(K===B)return-1;return L?1:-1}function Cr(L){return function(B){return"input"===B.nodeName.toLowerCase()&&B.type===L}}function Jn(L){return function(B){var K=B.nodeName.toLowerCase();return("input"===K||"button"===K)&&B.type===L}}function ar(L){return function(B){return"form"in B?B.parentNode&&!1===B.disabled?"label"in B?"label"in B.parentNode?B.parentNode.disabled===L:B.disabled===L:B.isDisabled===L||B.isDisabled!==!L&&Kn(B)===L:B.disabled===L:"label"in B&&B.disabled===L}}function ji(L){return Di(function(B){return B=+B,Di(function(K,gt){for(var it,vt=L([],K.length,B),xt=vt.length;xt--;)K[it=vt[xt]]&&(K[it]=!(gt[it]=K[it]))})})}function Zn(L){return L&&typeof L.getElementsByTagName<"u"&&L}for(d in v=ye.support={},k=ye.isXML=function(L){var K=L&&(L.ownerDocument||L).documentElement;return!br.test(L&&L.namespaceURI||K&&K.nodeName||"HTML")},x=ye.setDocument=function(L){var B,K,gt=L?L.ownerDocument||L:zt;return gt!=A&&9===gt.nodeType&&gt.documentElement&&($=(A=gt).documentElement,lt=!k(A),zt!=A&&(K=A.defaultView)&&K.top!==K&&(K.addEventListener?K.addEventListener("unload",or,!1):K.attachEvent&&K.attachEvent("onunload",or)),v.scope=Pi(function(it){return $.appendChild(it).appendChild(A.createElement("div")),typeof it.querySelectorAll<"u"&&!it.querySelectorAll(":scope fieldset div").length}),v.attributes=Pi(function(it){return it.className="i",!it.getAttribute("className")}),v.getElementsByTagName=Pi(function(it){return it.appendChild(A.createComment("")),!it.getElementsByTagName("*").length}),v.getElementsByClassName=Hn.test(A.getElementsByClassName),v.getById=Pi(function(it){return $.appendChild(it).id=ee,!A.getElementsByName||!A.getElementsByName(ee).length}),v.getById?(y.filter.ID=function(it){var vt=it.replace(qi,ki);return function(xt){return xt.getAttribute("id")===vt}},y.find.ID=function(it,vt){if(typeof vt.getElementById<"u"&&lt){var xt=vt.getElementById(it);return xt?[xt]:[]}}):(y.filter.ID=function(it){var vt=it.replace(qi,ki);return function(xt){var Ot=typeof xt.getAttributeNode<"u"&&xt.getAttributeNode("id");return Ot&&Ot.value===vt}},y.find.ID=function(it,vt){if(typeof vt.getElementById<"u"&&lt){var xt,Ot,Dt,$t=vt.getElementById(it);if($t){if((xt=$t.getAttributeNode("id"))&&xt.value===it)return[$t];for(Dt=vt.getElementsByName(it),Ot=0;$t=Dt[Ot++];)if((xt=$t.getAttributeNode("id"))&&xt.value===it)return[$t]}return[]}}),y.find.TAG=v.getElementsByTagName?function(it,vt){return typeof vt.getElementsByTagName<"u"?vt.getElementsByTagName(it):v.qsa?vt.querySelectorAll(it):void 0}:function(it,vt){var xt,Ot=[],Dt=0,$t=vt.getElementsByTagName(it);if("*"===it){for(;xt=$t[Dt++];)1===xt.nodeType&&Ot.push(xt);return Ot}return $t},y.find.CLASS=v.getElementsByClassName&&function(it,vt){if(typeof vt.getElementsByClassName<"u"&&lt)return vt.getElementsByClassName(it)},Bt=[],ht=[],(v.qsa=Hn.test(A.querySelectorAll))&&(Pi(function(it){var vt;$.appendChild(it).innerHTML="<a id='"+ee+"'></a><select id='"+ee+"-\r\\' msallowcapture=''><option selected=''></option></select>",it.querySelectorAll("[msallowcapture^='']").length&&ht.push("[*^$]="+te+"*(?:''|\"\")"),it.querySelectorAll("[selected]").length||ht.push("\\["+te+"*(?:value|"+ii+")"),it.querySelectorAll("[id~="+ee+"-]").length||ht.push("~="),(vt=A.createElement("input")).setAttribute("name",""),it.appendChild(vt),it.querySelectorAll("[name='']").length||ht.push("\\["+te+"*name"+te+"*="+te+"*(?:''|\"\")"),it.querySelectorAll(":checked").length||ht.push(":checked"),it.querySelectorAll("a#"+ee+"+*").length||ht.push(".#.+[+~]"),it.querySelectorAll("\\\f"),ht.push("[\\r\\n\\f]")}),Pi(function(it){it.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var vt=A.createElement("input");vt.setAttribute("type","hidden"),it.appendChild(vt).setAttribute("name","D"),it.querySelectorAll("[name=d]").length&&ht.push("name"+te+"*[*^$|!~]?="),2!==it.querySelectorAll(":enabled").length&&ht.push(":enabled",":disabled"),$.appendChild(it).disabled=!0,2!==it.querySelectorAll(":disabled").length&&ht.push(":enabled",":disabled"),it.querySelectorAll("*,:x"),ht.push(",.*:")})),(v.matchesSelector=Hn.test(qt=$.matches||$.webkitMatchesSelector||$.mozMatchesSelector||$.oMatchesSelector||$.msMatchesSelector))&&Pi(function(it){v.disconnectedMatch=qt.call(it,"*"),qt.call(it,"[s!='']:x"),Bt.push("!=",ui)}),ht=ht.length&&new RegExp(ht.join("|")),Bt=Bt.length&&new RegExp(Bt.join("|")),B=Hn.test($.compareDocumentPosition),pe=B||Hn.test($.contains)?function(it,vt){var xt=9===it.nodeType?it.documentElement:it,Ot=vt&&vt.parentNode;return it===Ot||!(!Ot||1!==Ot.nodeType||!(xt.contains?xt.contains(Ot):it.compareDocumentPosition&&16&it.compareDocumentPosition(Ot)))}:function(it,vt){if(vt)for(;vt=vt.parentNode;)if(vt===it)return!0;return!1},Bi=B?function(it,vt){if(it===vt)return g=!0,0;var xt=!it.compareDocumentPosition-!vt.compareDocumentPosition;return xt||(1&(xt=(it.ownerDocument||it)==(vt.ownerDocument||vt)?it.compareDocumentPosition(vt):1)||!v.sortDetached&&vt.compareDocumentPosition(it)===xt?it==A||it.ownerDocument==zt&&pe(zt,it)?-1:vt==A||vt.ownerDocument==zt&&pe(zt,vt)?1:D?_i(D,it)-_i(D,vt):0:4&xt?-1:1)}:function(it,vt){if(it===vt)return g=!0,0;var xt,Ot=0,Dt=it.parentNode,$t=vt.parentNode,Gt=[it],Vt=[vt];if(!Dt||!$t)return it==A?-1:vt==A?1:Dt?-1:$t?1:D?_i(D,it)-_i(D,vt):0;if(Dt===$t)return ur(it,vt);for(xt=it;xt=xt.parentNode;)Gt.unshift(xt);for(xt=vt;xt=xt.parentNode;)Vt.unshift(xt);for(;Gt[Ot]===Vt[Ot];)Ot++;return Ot?ur(Gt[Ot],Vt[Ot]):Gt[Ot]==zt?-1:Vt[Ot]==zt?1:0}),A},ye.matches=function(L,B){return ye(L,null,null,B)},ye.matchesSelector=function(L,B){if(x(L),v.matchesSelector&&lt&&!Ue[B+" "]&&(!Bt||!Bt.test(B))&&(!ht||!ht.test(B)))try{var K=qt.call(L,B);if(K||v.disconnectedMatch||L.document&&11!==L.document.nodeType)return K}catch{Ue(B,!0)}return 0<ye(B,A,null,[L]).length},ye.contains=function(L,B){return(L.ownerDocument||L)!=A&&x(L),pe(L,B)},ye.attr=function(L,B){(L.ownerDocument||L)!=A&&x(L);var K=y.attrHandle[B.toLowerCase()],gt=K&&si.call(y.attrHandle,B.toLowerCase())?K(L,B,!lt):void 0;return void 0!==gt?gt:v.attributes||!lt?L.getAttribute(B):(gt=L.getAttributeNode(B))&&gt.specified?gt.value:null},ye.escape=function(L){return(L+"").replace(Wn,sr)},ye.error=function(L){throw new Error("Syntax error, unrecognized expression: "+L)},ye.uniqueSort=function(L){var B,K=[],gt=0,it=0;if(g=!v.detectDuplicates,D=!v.sortStable&&L.slice(0),L.sort(Bi),g){for(;B=L[it++];)B===L[it]&&(gt=K.push(it));for(;gt--;)L.splice(K[gt],1)}return D=null,L},T=ye.getText=function(L){var B,K="",gt=0,it=L.nodeType;if(it){if(1===it||9===it||11===it){if("string"==typeof L.textContent)return L.textContent;for(L=L.firstChild;L;L=L.nextSibling)K+=T(L)}else if(3===it||4===it)return L.nodeValue}else for(;B=L[gt++];)K+=T(B);return K},(y=ye.selectors={cacheLength:50,createPseudo:Di,match:$n,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(L){return L[1]=L[1].replace(qi,ki),L[3]=(L[3]||L[4]||L[5]||"").replace(qi,ki),"~="===L[2]&&(L[3]=" "+L[3]+" "),L.slice(0,4)},CHILD:function(L){return L[1]=L[1].toLowerCase(),"nth"===L[1].slice(0,3)?(L[3]||ye.error(L[0]),L[4]=+(L[4]?L[5]+(L[6]||1):2*("even"===L[3]||"odd"===L[3])),L[5]=+(L[7]+L[8]||"odd"===L[3])):L[3]&&ye.error(L[0]),L},PSEUDO:function(L){var B,K=!L[6]&&L[2];return $n.CHILD.test(L[0])?null:(L[3]?L[2]=L[4]||L[5]||"":K&&_r.test(K)&&(B=j(K,!0))&&(B=K.indexOf(")",K.length-B)-K.length)&&(L[0]=L[0].slice(0,B),L[2]=K.slice(0,B)),L.slice(0,3))}},filter:{TAG:function(L){var B=L.replace(qi,ki).toLowerCase();return"*"===L?function(){return!0}:function(K){return K.nodeName&&K.nodeName.toLowerCase()===B}},CLASS:function(L){var B=ue[L+" "];return B||(B=new RegExp("(^|"+te+")"+L+"("+te+"|$)"))&&ue(L,function(K){return B.test("string"==typeof K.className&&K.className||typeof K.getAttribute<"u"&&K.getAttribute("class")||"")})},ATTR:function(L,B,K){return function(gt){var it=ye.attr(gt,L);return null==it?"!="===B:!B||(it+="","="===B?it===K:"!="===B?it!==K:"^="===B?K&&0===it.indexOf(K):"*="===B?K&&-1<it.indexOf(K):"$="===B?K&&it.slice(-K.length)===K:"~="===B?-1<(" "+it.replace(Le," ")+" ").indexOf(K):"|="===B&&(it===K||it.slice(0,K.length+1)===K+"-"))}},CHILD:function(L,B,K,gt,it){var vt="nth"!==L.slice(0,3),xt="last"!==L.slice(-4),Ot="of-type"===B;return 1===gt&&0===it?function(Dt){return!!Dt.parentNode}:function(Dt,$t,Gt){var Vt,S,u,_,P,U,Z=vt!==xt?"nextSibling":"previousSibling",rt=Dt.parentNode,yt=Ot&&Dt.nodeName.toLowerCase(),wt=!Gt&&!Ot,Et=!1;if(rt){if(vt){for(;Z;){for(_=Dt;_=_[Z];)if(Ot?_.nodeName.toLowerCase()===yt:1===_.nodeType)return!1;U=Z="only"===L&&!U&&"nextSibling"}return!0}if(U=[xt?rt.firstChild:rt.lastChild],xt&&wt){for(Et=(P=(Vt=(S=(u=(_=rt)[ee]||(_[ee]={}))[_.uniqueID]||(u[_.uniqueID]={}))[L]||[])[0]===De&&Vt[1])&&Vt[2],_=P&&rt.childNodes[P];_=++P&&_&&_[Z]||(Et=P=0)||U.pop();)if(1===_.nodeType&&++Et&&_===Dt){S[L]=[De,P,Et];break}}else if(wt&&(Et=P=(Vt=(S=(u=(_=Dt)[ee]||(_[ee]={}))[_.uniqueID]||(u[_.uniqueID]={}))[L]||[])[0]===De&&Vt[1]),!1===Et)for(;(_=++P&&_&&_[Z]||(Et=P=0)||U.pop())&&((Ot?_.nodeName.toLowerCase()!==yt:1!==_.nodeType)||!++Et||(wt&&((S=(u=_[ee]||(_[ee]={}))[_.uniqueID]||(u[_.uniqueID]={}))[L]=[De,Et]),_!==Dt)););return(Et-=it)===gt||Et%gt==0&&0<=Et/gt}}},PSEUDO:function(L,B){var K,gt=y.pseudos[L]||y.setFilters[L.toLowerCase()]||ye.error("unsupported pseudo: "+L);return gt[ee]?gt(B):1<gt.length?(K=[L,L,"",B],y.setFilters.hasOwnProperty(L.toLowerCase())?Di(function(it,vt){for(var xt,Ot=gt(it,B),Dt=Ot.length;Dt--;)it[xt=_i(it,Ot[Dt])]=!(vt[xt]=Ot[Dt])}):function(it){return gt(it,0,K)}):gt}},pseudos:{not:Di(function(L){var B=[],K=[],gt=R(L.replace(fi,"$1"));return gt[ee]?Di(function(it,vt,xt,Ot){for(var Dt,$t=gt(it,null,Ot,[]),Gt=it.length;Gt--;)(Dt=$t[Gt])&&(it[Gt]=!(vt[Gt]=Dt))}):function(it,vt,xt){return B[0]=it,gt(B,null,xt,K),B[0]=null,!K.pop()}}),has:Di(function(L){return function(B){return 0<ye(L,B).length}}),contains:Di(function(L){return L=L.replace(qi,ki),function(B){return-1<(B.textContent||T(B)).indexOf(L)}}),lang:Di(function(L){return yr.test(L||"")||ye.error("unsupported lang: "+L),L=L.replace(qi,ki).toLowerCase(),function(B){var K;do{if(K=lt?B.lang:B.getAttribute("xml:lang")||B.getAttribute("lang"))return(K=K.toLowerCase())===L||0===K.indexOf(L+"-")}while((B=B.parentNode)&&1===B.nodeType);return!1}}),target:function(L){var B=c.location&&c.location.hash;return B&&B.slice(1)===L.id},root:function(L){return L===$},focus:function(L){return L===A.activeElement&&(!A.hasFocus||A.hasFocus())&&!!(L.type||L.href||~L.tabIndex)},enabled:ar(!1),disabled:ar(!0),checked:function(L){var B=L.nodeName.toLowerCase();return"input"===B&&!!L.checked||"option"===B&&!!L.selected},selected:function(L){return!0===L.selected},empty:function(L){for(L=L.firstChild;L;L=L.nextSibling)if(L.nodeType<6)return!1;return!0},parent:function(L){return!y.pseudos.empty(L)},header:function(L){return xr.test(L.nodeName)},input:function(L){return hr.test(L.nodeName)},button:function(L){var B=L.nodeName.toLowerCase();return"input"===B&&"button"===L.type||"button"===B},text:function(L){var B;return"input"===L.nodeName.toLowerCase()&&"text"===L.type&&(null==(B=L.getAttribute("type"))||"text"===B.toLowerCase())},first:ji(function(){return[0]}),last:ji(function(L,B){return[B-1]}),eq:ji(function(L,B,K){return[K<0?K+B:K]}),even:ji(function(L,B){for(var K=0;K<B;K+=2)L.push(K);return L}),odd:ji(function(L,B){for(var K=1;K<B;K+=2)L.push(K);return L}),lt:ji(function(L,B,K){for(var gt=K<0?K+B:B<K?B:K;0<=--gt;)L.push(gt);return L}),gt:ji(function(L,B,K){for(var gt=K<0?K+B:K;++gt<B;)L.push(gt);return L})}}).pseudos.nth=y.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})y.pseudos[d]=Cr(d);for(d in{submit:!0,reset:!0})y.pseudos[d]=Jn(d);function fr(){}function tr(L){for(var B=0,K=L.length,gt="";B<K;B++)gt+=L[B].value;return gt}function on(L,B,K){var gt=B.dir,it=B.next,vt=it||gt,xt=K&&"parentNode"===vt,Ot=Zt++;return B.first?function(Dt,$t,Gt){for(;Dt=Dt[gt];)if(1===Dt.nodeType||xt)return L(Dt,$t,Gt);return!1}:function(Dt,$t,Gt){var Vt,S,u,_=[De,Ot];if(Gt){for(;Dt=Dt[gt];)if((1===Dt.nodeType||xt)&&L(Dt,$t,Gt))return!0}else for(;Dt=Dt[gt];)if(1===Dt.nodeType||xt)if(S=(u=Dt[ee]||(Dt[ee]={}))[Dt.uniqueID]||(u[Dt.uniqueID]={}),it&&it===Dt.nodeName.toLowerCase())Dt=Dt[gt]||Dt;else{if((Vt=S[vt])&&Vt[0]===De&&Vt[1]===Ot)return _[2]=Vt[2];if((S[vt]=_)[2]=L(Dt,$t,Gt))return!0}return!1}}function lr(L){return 1<L.length?function(B,K,gt){for(var it=L.length;it--;)if(!L[it](B,K,gt))return!1;return!0}:L[0]}function zn(L,B,K,gt,it){for(var vt,xt=[],Ot=0,Dt=L.length,$t=null!=B;Ot<Dt;Ot++)(vt=L[Ot])&&(K&&!K(vt,gt,it)||(xt.push(vt),$t&&B.push(Ot)));return xt}function cr(L,B,K,gt,it,vt){return gt&&!gt[ee]&&(gt=cr(gt)),it&&!it[ee]&&(it=cr(it,vt)),Di(function(xt,Ot,Dt,$t){var Gt,Vt,S,u=[],_=[],P=Ot.length,U=xt||function(yt,wt,Et){for(var Pt=0,It=wt.length;Pt<It;Pt++)ye(yt,wt[Pt],Et);return Et}(B||"*",Dt.nodeType?[Dt]:Dt,[]),Z=!L||!xt&&B?U:zn(U,u,L,Dt,$t),rt=K?it||(xt?L:P||gt)?[]:Ot:Z;if(K&&K(Z,rt,Dt,$t),gt)for(Gt=zn(rt,_),gt(Gt,[],Dt,$t),Vt=Gt.length;Vt--;)(S=Gt[Vt])&&(rt[_[Vt]]=!(Z[_[Vt]]=S));if(xt){if(it||L){if(it){for(Gt=[],Vt=rt.length;Vt--;)(S=rt[Vt])&&Gt.push(Z[Vt]=S);it(null,rt=[],Gt,$t)}for(Vt=rt.length;Vt--;)(S=rt[Vt])&&-1<(Gt=it?_i(xt,S):u[Vt])&&(xt[Gt]=!(Ot[Gt]=S))}}else rt=zn(rt===Ot?rt.splice(P,rt.length):rt),it?it(null,Ot,rt,$t):Oe.apply(Ot,rt)})}function er(L){for(var B,K,gt,it=L.length,vt=y.relative[L[0].type],xt=vt||y.relative[" "],Ot=vt?1:0,Dt=on(function(Vt){return Vt===B},xt,!0),$t=on(function(Vt){return-1<_i(B,Vt)},xt,!0),Gt=[function(Vt,S,u){var _=!vt&&(u||S!==q)||((B=S).nodeType?Dt(Vt,S,u):$t(Vt,S,u));return B=null,_}];Ot<it;Ot++)if(K=y.relative[L[Ot].type])Gt=[on(lr(Gt),K)];else{if((K=y.filter[L[Ot].type].apply(null,L[Ot].matches))[ee]){for(gt=++Ot;gt<it&&!y.relative[L[gt].type];gt++);return cr(1<Ot&&lr(Gt),1<Ot&&tr(L.slice(0,Ot-1).concat({value:" "===L[Ot-2].type?"*":""})).replace(fi,"$1"),K,Ot<gt&&er(L.slice(Ot,gt)),gt<it&&er(L=L.slice(gt)),gt<it&&tr(L))}Gt.push(K)}return lr(Gt)}return fr.prototype=y.filters=y.pseudos,y.setFilters=new fr,j=ye.tokenize=function(L,B){var K,gt,it,vt,xt,Ot,Dt,$t=Ve[L+" "];if($t)return B?0:$t.slice(0);for(xt=L,Ot=[],Dt=y.preFilter;xt;){for(vt in K&&!(gt=jn.exec(xt))||(gt&&(xt=xt.slice(gt[0].length)||xt),Ot.push(it=[])),K=!1,(gt=qn.exec(xt))&&(K=gt.shift(),it.push({value:K,type:gt[0].replace(fi," ")}),xt=xt.slice(K.length)),y.filter)!(gt=$n[vt].exec(xt))||Dt[vt]&&!(gt=Dt[vt](gt))||(K=gt.shift(),it.push({value:K,type:vt,matches:gt}),xt=xt.slice(K.length));if(!K)break}return B?xt.length:xt?ye.error(L):Ve(L,Ot).slice(0)},R=ye.compile=function(L,B){var K,gt,it,vt,xt,Ot,Dt=[],$t=[],Gt=Ri[L+" "];if(!Gt){for(B||(B=j(L)),K=B.length;K--;)(Gt=er(B[K]))[ee]?Dt.push(Gt):$t.push(Gt);(Gt=Ri(L,(gt=$t,vt=0<(it=Dt).length,xt=0<gt.length,Ot=function(Vt,S,u,_,P){var U,Z,rt,yt=0,wt="0",Et=Vt&&[],Pt=[],It=q,le=Vt||xt&&y.find.TAG("*",P),Ut=De+=null==It?1:Math.random()||.1,Kt=le.length;for(P&&(q=S==A||S||P);wt!==Kt&&null!=(U=le[wt]);wt++){if(xt&&U){for(Z=0,S||U.ownerDocument==A||(x(U),u=!lt);rt=gt[Z++];)if(rt(U,S||A,u)){_.push(U);break}P&&(De=Ut)}vt&&((U=!rt&&U)&&yt--,Vt&&Et.push(U))}if(yt+=wt,vt&&wt!==yt){for(Z=0;rt=it[Z++];)rt(Et,Pt,S,u);if(Vt){if(0<yt)for(;wt--;)Et[wt]||Pt[wt]||(Pt[wt]=pn.call(_));Pt=zn(Pt)}Oe.apply(_,Pt),P&&!Vt&&0<Pt.length&&1<yt+it.length&&ye.uniqueSort(_)}return P&&(De=Ut,q=It),Et},vt?Di(Ot):Ot))).selector=L}return Gt},Y=ye.select=function(L,B,K,gt){var it,vt,xt,Ot,Dt,$t="function"==typeof L&&L,Gt=!gt&&j(L=$t.selector||L);if(K=K||[],1===Gt.length){if(2<(vt=Gt[0]=Gt[0].slice(0)).length&&"ID"===(xt=vt[0]).type&&9===B.nodeType&&lt&&y.relative[vt[1].type]){if(!(B=(y.find.ID(xt.matches[0].replace(qi,ki),B)||[])[0]))return K;$t&&(B=B.parentNode),L=L.slice(vt.shift().value.length)}for(it=$n.needsContext.test(L)?0:vt.length;it--&&!y.relative[Ot=(xt=vt[it]).type];)if((Dt=y.find[Ot])&&(gt=Dt(xt.matches[0].replace(qi,ki),rr.test(vt[0].type)&&Zn(B.parentNode)||B))){if(vt.splice(it,1),!(L=gt.length&&tr(vt)))return Oe.apply(K,gt),K;break}}return($t||R(L,Gt))(gt,B,!lt,K,!B||rr.test(L)&&Zn(B.parentNode)||B),K},v.sortStable=ee.split("").sort(Bi).join("")===ee,v.detectDuplicates=!!g,x(),v.sortDetached=Pi(function(L){return 1&L.compareDocumentPosition(A.createElement("fieldset"))}),Pi(function(L){return L.innerHTML="<a href='#'></a>","#"===L.firstChild.getAttribute("href")})||$i("type|href|height|width",function(L,B,K){if(!K)return L.getAttribute(B,"type"===B.toLowerCase()?1:2)}),v.attributes&&Pi(function(L){return L.innerHTML="<input/>",L.firstChild.setAttribute("value",""),""===L.firstChild.getAttribute("value")})||$i("value",function(L,B,K){if(!K&&"input"===L.nodeName.toLowerCase())return L.defaultValue}),Pi(function(L){return null==L.getAttribute("disabled")})||$i(ii,function(L,B,K){var gt;if(!K)return!0===L[B]?B.toLowerCase():(gt=L.getAttributeNode(B))&&gt.specified?gt.value:null}),ye}(h);p.find=V,p.expr=V.selectors,p.expr[":"]=p.expr.pseudos,p.uniqueSort=p.unique=V.uniqueSort,p.text=V.getText,p.isXMLDoc=V.isXML,p.contains=V.contains,p.escapeSelector=V.escape;var et=function(c,d,v){for(var y=[],T=void 0!==v;(c=c[d])&&9!==c.nodeType;)if(1===c.nodeType){if(T&&p(c).is(v))break;y.push(c)}return y},ot=function(c,d){for(var v=[];c;c=c.nextSibling)1===c.nodeType&&c!==d&&v.push(c);return v},ct=p.expr.match.needsContext;function W(c,d){return c.nodeName&&c.nodeName.toLowerCase()===d.toLowerCase()}var z=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function tt(c,d,v){return w(d)?p.grep(c,function(y,T){return!!d.call(y,T,y)!==v}):d.nodeType?p.grep(c,function(y){return y===d!==v}):"string"!=typeof d?p.grep(c,function(y){return-1<s.call(d,y)!==v}):p.filter(d,c,v)}p.filter=function(c,d,v){var y=d[0];return v&&(c=":not("+c+")"),1===d.length&&1===y.nodeType?p.find.matchesSelector(y,c)?[y]:[]:p.find.matches(c,p.grep(d,function(T){return 1===T.nodeType}))},p.fn.extend({find:function(c){var d,v,y=this.length,T=this;if("string"!=typeof c)return this.pushStack(p(c).filter(function(){for(d=0;d<y;d++)if(p.contains(T[d],this))return!0}));for(v=this.pushStack([]),d=0;d<y;d++)p.find(c,T[d],v);return 1<y?p.uniqueSort(v):v},filter:function(c){return this.pushStack(tt(this,c||[],!1))},not:function(c){return this.pushStack(tt(this,c||[],!0))},is:function(c){return!!tt(this,"string"==typeof c&&ct.test(c)?p(c):c||[],!1).length}});var ft,at=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(p.fn.init=function(c,d,v){var y,T;if(!c)return this;if(v=v||ft,"string"==typeof c){if(!(y="<"===c[0]&&">"===c[c.length-1]&&3<=c.length?[null,c,null]:at.exec(c))||!y[1]&&d)return!d||d.jquery?(d||v).find(c):this.constructor(d).find(c);if(y[1]){if(p.merge(this,p.parseHTML(y[1],(d=d instanceof p?d[0]:d)&&d.nodeType?d.ownerDocument||d:M,!0)),z.test(y[1])&&p.isPlainObject(d))for(y in d)w(this[y])?this[y](d[y]):this.attr(y,d[y]);return this}return(T=M.getElementById(y[2]))&&(this[0]=T,this.length=1),this}return c.nodeType?(this[0]=c,this.length=1,this):w(c)?void 0!==v.ready?v.ready(c):c(p):p.makeArray(c,this)}).prototype=p.fn,ft=p(M);var mt=/^(?:parents|prev(?:Until|All))/,_t={children:!0,contents:!0,next:!0,prev:!0};function G(c,d){for(;(c=c[d])&&1!==c.nodeType;);return c}p.fn.extend({has:function(c){var d=p(c,this),v=d.length;return this.filter(function(){for(var y=0;y<v;y++)if(p.contains(this,d[y]))return!0})},closest:function(c,d){var v,y=0,T=this.length,k=[],j="string"!=typeof c&&p(c);if(!ct.test(c))for(;y<T;y++)for(v=this[y];v&&v!==d;v=v.parentNode)if(v.nodeType<11&&(j?-1<j.index(v):1===v.nodeType&&p.find.matchesSelector(v,c))){k.push(v);break}return this.pushStack(1<k.length?p.uniqueSort(k):k)},index:function(c){return c?"string"==typeof c?s.call(p(c),this[0]):s.call(this,c.jquery?c[0]:c):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(c,d){return this.pushStack(p.uniqueSort(p.merge(this.get(),p(c,d))))},addBack:function(c){return this.add(null==c?this.prevObject:this.prevObject.filter(c))}}),p.each({parent:function(c){var d=c.parentNode;return d&&11!==d.nodeType?d:null},parents:function(c){return et(c,"parentNode")},parentsUntil:function(c,d,v){return et(c,"parentNode",v)},next:function(c){return G(c,"nextSibling")},prev:function(c){return G(c,"previousSibling")},nextAll:function(c){return et(c,"nextSibling")},prevAll:function(c){return et(c,"previousSibling")},nextUntil:function(c,d,v){return et(c,"nextSibling",v)},prevUntil:function(c,d,v){return et(c,"previousSibling",v)},siblings:function(c){return ot((c.parentNode||{}).firstChild,c)},children:function(c){return ot(c.firstChild)},contents:function(c){return null!=c.contentDocument&&l(c.contentDocument)?c.contentDocument:(W(c,"template")&&(c=c.content||c),p.merge([],c.childNodes))}},function(c,d){p.fn[c]=function(v,y){var T=p.map(this,d,v);return"Until"!==c.slice(-5)&&(y=v),y&&"string"==typeof y&&(T=p.filter(y,T)),1<this.length&&(_t[c]||p.uniqueSort(T),mt.test(c)&&T.reverse()),this.pushStack(T)}});var bt=/[^\x20\t\r\n\f]+/g;function Ct(c){return c}function Q(c){throw c}function St(c,d,v,y){var T;try{c&&w(T=c.promise)?T.call(c).done(d).fail(v):c&&w(T=c.then)?T.call(c,d,v):d.apply(void 0,[c].slice(y))}catch(k){v.apply(void 0,[k])}}p.Callbacks=function(c){var v;c="string"==typeof c?(v={},p.each(c.match(bt)||[],function(x,A){v[A]=!0}),v):p.extend({},c);var y,T,k,j,R=[],Y=[],q=-1,D=function(){for(j=j||c.once,k=y=!0;Y.length;q=-1)for(T=Y.shift();++q<R.length;)!1===R[q].apply(T[0],T[1])&&c.stopOnFalse&&(q=R.length,T=!1);c.memory||(T=!1),y=!1,j&&(R=T?[]:"")},g={add:function(){return R&&(T&&!y&&(q=R.length-1,Y.push(T)),function x(A){p.each(A,function($,lt){w(lt)?c.unique&&g.has(lt)||R.push(lt):lt&&lt.length&&"string"!==nt(lt)&&x(lt)})}(arguments),T&&!y&&D()),this},remove:function(){return p.each(arguments,function(x,A){for(var $;-1<($=p.inArray(A,R,$));)R.splice($,1),$<=q&&q--}),this},has:function(x){return x?-1<p.inArray(x,R):0<R.length},empty:function(){return R&&(R=[]),this},disable:function(){return j=Y=[],R=T="",this},disabled:function(){return!R},lock:function(){return j=Y=[],T||y||(R=T=""),this},locked:function(){return!!j},fireWith:function(x,A){return j||(A=[x,(A=A||[]).slice?A.slice():A],Y.push(A),y||D()),this},fire:function(){return g.fireWith(this,arguments),this},fired:function(){return!!k}};return g},p.extend({Deferred:function(c){var d=[["notify","progress",p.Callbacks("memory"),p.Callbacks("memory"),2],["resolve","done",p.Callbacks("once memory"),p.Callbacks("once memory"),0,"resolved"],["reject","fail",p.Callbacks("once memory"),p.Callbacks("once memory"),1,"rejected"]],v="pending",y={state:function(){return v},always:function(){return T.done(arguments).fail(arguments),this},catch:function(k){return y.then(null,k)},pipe:function(){var k=arguments;return p.Deferred(function(j){p.each(d,function(R,Y){var q=w(k[Y[4]])&&k[Y[4]];T[Y[1]](function(){var D=q&&q.apply(this,arguments);D&&w(D.promise)?D.promise().progress(j.notify).done(j.resolve).fail(j.reject):j[Y[0]+"With"](this,q?[D]:arguments)})}),k=null}).promise()},then:function(k,j,R){var Y=0;function q(D,g,x,A){return function(){var $=this,lt=arguments,ht=function(){var qt,pe;if(!(D<Y)){if((qt=x.apply($,lt))===g.promise())throw new TypeError("Thenable self-resolution");w(pe=qt&&("object"==typeof qt||"function"==typeof qt)&&qt.then)?A?pe.call(qt,q(Y,g,Ct,A),q(Y,g,Q,A)):(Y++,pe.call(qt,q(Y,g,Ct,A),q(Y,g,Q,A),q(Y,g,Ct,g.notifyWith))):(x!==Ct&&($=void 0,lt=[qt]),(A||g.resolveWith)($,lt))}},Bt=A?ht:function(){try{ht()}catch(qt){p.Deferred.exceptionHook&&p.Deferred.exceptionHook(qt,Bt.stackTrace),Y<=D+1&&(x!==Q&&($=void 0,lt=[qt]),g.rejectWith($,lt))}};D?Bt():(p.Deferred.getStackHook&&(Bt.stackTrace=p.Deferred.getStackHook()),h.setTimeout(Bt))}}return p.Deferred(function(D){d[0][3].add(q(0,D,w(R)?R:Ct,D.notifyWith)),d[1][3].add(q(0,D,w(k)?k:Ct)),d[2][3].add(q(0,D,w(j)?j:Q))}).promise()},promise:function(k){return null!=k?p.extend(k,y):y}},T={};return p.each(d,function(k,j){var R=j[2],Y=j[5];y[j[1]]=R.add,Y&&R.add(function(){v=Y},d[3-k][2].disable,d[3-k][3].disable,d[0][2].lock,d[0][3].lock),R.add(j[3].fire),T[j[0]]=function(){return T[j[0]+"With"](this===T?void 0:this,arguments),this},T[j[0]+"With"]=R.fireWith}),y.promise(T),c&&c.call(T,T),T},when:function(c){var d=arguments.length,v=d,y=Array(v),T=t.call(arguments),k=p.Deferred(),j=function(R){return function(Y){y[R]=this,T[R]=1<arguments.length?t.call(arguments):Y,--d||k.resolveWith(y,T)}};if(d<=1&&(St(c,k.done(j(v)).resolve,k.reject,!d),"pending"===k.state()||w(T[v]&&T[v].then)))return k.then();for(;v--;)St(T[v],j(v),k.reject);return k.promise()}});var Tt=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;p.Deferred.exceptionHook=function(c,d){h.console&&h.console.warn&&c&&Tt.test(c.name)&&h.console.warn("jQuery.Deferred exception: "+c.message,c.stack,d)},p.readyException=function(c){h.setTimeout(function(){throw c})};var Lt=p.Deferred();function Wt(){M.removeEventListener("DOMContentLoaded",Wt),h.removeEventListener("load",Wt),p.ready()}p.fn.ready=function(c){return Lt.then(c).catch(function(d){p.readyException(d)}),this},p.extend({isReady:!1,readyWait:1,ready:function(c){(!0===c?--p.readyWait:p.isReady)||(p.isReady=!0)!==c&&0<--p.readyWait||Lt.resolveWith(M,[p])}}),p.ready.then=Lt.then,"complete"===M.readyState||"loading"!==M.readyState&&!M.documentElement.doScroll?h.setTimeout(p.ready):(M.addEventListener("DOMContentLoaded",Wt),h.addEventListener("load",Wt));var Xt=function(c,d,v,y,T,k,j){var R=0,Y=c.length,q=null==v;if("object"===nt(v))for(R in T=!0,v)Xt(c,d,R,v[R],!0,k,j);else if(void 0!==y&&(T=!0,w(y)||(j=!0),q&&(j?(d.call(c,y),d=null):(q=d,d=function(D,g,x){return q.call(p(D),x)})),d))for(;R<Y;R++)d(c[R],v,j?y:y.call(c[R],R,d(c[R],v)));return T?c:q?d.call(c):Y?d(c[0],v):k},we=/^-ms-/,ve=/-([a-z])/g;function ne(c,d){return d.toUpperCase()}function re(c){return c.replace(we,"ms-").replace(ve,ne)}var jt=function(c){return 1===c.nodeType||9===c.nodeType||!+c.nodeType};function Fe(){this.expando=p.expando+Fe.uid++}Fe.uid=1,Fe.prototype={cache:function(c){var d=c[this.expando];return d||(d={},jt(c)&&(c.nodeType?c[this.expando]=d:Object.defineProperty(c,this.expando,{value:d,configurable:!0}))),d},set:function(c,d,v){var y,T=this.cache(c);if("string"==typeof d)T[re(d)]=v;else for(y in d)T[re(y)]=d[y];return T},get:function(c,d){return void 0===d?this.cache(c):c[this.expando]&&c[this.expando][re(d)]},access:function(c,d,v){return void 0===d||d&&"string"==typeof d&&void 0===v?this.get(c,d):(this.set(c,d,v),void 0!==v?v:d)},remove:function(c,d){var v,y=c[this.expando];if(void 0!==y){if(void 0!==d)for((v=(d=Array.isArray(d)?d.map(re):(d=re(d))in y?[d]:d.match(bt)||[]).length);v--;)delete y[d[v]];(void 0===d||p.isEmptyObject(y))&&(c.nodeType?c[this.expando]=void 0:delete c[this.expando])}},hasData:function(c){var d=c[this.expando];return void 0!==d&&!p.isEmptyObject(d)}};var Ft=new Fe,Rt=new Fe,qe=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Je=/[A-Z]/g;function Ne(c,d,v){var y,T;if(void 0===v&&1===c.nodeType)if(y="data-"+d.replace(Je,"-$&").toLowerCase(),"string"==typeof(v=c.getAttribute(y))){try{v="true"===(T=v)||"false"!==T&&("null"===T?null:T===+T+""?+T:qe.test(T)?JSON.parse(T):T)}catch{}Rt.set(c,d,v)}else v=void 0;return v}p.extend({hasData:function(c){return Rt.hasData(c)||Ft.hasData(c)},data:function(c,d,v){return Rt.access(c,d,v)},removeData:function(c,d){Rt.remove(c,d)},_data:function(c,d,v){return Ft.access(c,d,v)},_removeData:function(c,d){Ft.remove(c,d)}}),p.fn.extend({data:function(c,d){var v,y,T,k=this[0],j=k&&k.attributes;if(void 0===c){if(this.length&&(T=Rt.get(k),1===k.nodeType&&!Ft.get(k,"hasDataAttrs"))){for(v=j.length;v--;)j[v]&&0===(y=j[v].name).indexOf("data-")&&(y=re(y.slice(5)),Ne(k,y,T[y]));Ft.set(k,"hasDataAttrs",!0)}return T}return"object"==typeof c?this.each(function(){Rt.set(this,c)}):Xt(this,function(R){var Y;if(k&&void 0===R)return void 0!==(Y=Rt.get(k,c))||void 0!==(Y=Ne(k,c))?Y:void 0;this.each(function(){Rt.set(this,c,R)})},null,d,1<arguments.length,null,!0)},removeData:function(c){return this.each(function(){Rt.remove(this,c)})}}),p.extend({queue:function(c,d,v){var y;if(c)return y=Ft.get(c,d=(d||"fx")+"queue"),v&&(!y||Array.isArray(v)?y=Ft.access(c,d,p.makeArray(v)):y.push(v)),y||[]},dequeue:function(c,d){var v=p.queue(c,d=d||"fx"),y=v.length,T=v.shift(),k=p._queueHooks(c,d);"inprogress"===T&&(T=v.shift(),y--),T&&("fx"===d&&v.unshift("inprogress"),delete k.stop,T.call(c,function(){p.dequeue(c,d)},k)),!y&&k&&k.empty.fire()},_queueHooks:function(c,d){var v=d+"queueHooks";return Ft.get(c,v)||Ft.access(c,v,{empty:p.Callbacks("once memory").add(function(){Ft.remove(c,[d+"queue",v])})})}}),p.fn.extend({queue:function(c,d){var v=2;return"string"!=typeof c&&(d=c,c="fx",v--),arguments.length<v?p.queue(this[0],c):void 0===d?this:this.each(function(){var y=p.queue(this,c,d);p._queueHooks(this,c),"fx"===c&&"inprogress"!==y[0]&&p.dequeue(this,c)})},dequeue:function(c){return this.each(function(){p.dequeue(this,c)})},clearQueue:function(c){return this.queue(c||"fx",[])},promise:function(c,d){var v,y=1,T=p.Deferred(),k=this,j=this.length,R=function(){--y||T.resolveWith(k,[k])};for("string"!=typeof c&&(d=c,c=void 0),c=c||"fx";j--;)(v=Ft.get(k[j],c+"queueHooks"))&&v.empty&&(y++,v.empty.add(R));return R(),T.promise(d)}});var me=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,_e=new RegExp("^(?:([+-])=|)("+me+")([a-z%]*)$","i"),Ce=["Top","Right","Bottom","Left"],Se=M.documentElement,ri=function(c){return p.contains(c.ownerDocument,c)},Li={composed:!0};Se.getRootNode&&(ri=function(c){return p.contains(c.ownerDocument,c)||c.getRootNode(Li)===c.ownerDocument});var He=function(c,d){return"none"===(c=d||c).style.display||""===c.style.display&&ri(c)&&"none"===p.css(c,"display")};function oi(c,d,v,y){var T,k,j=20,R=y?function(){return y.cur()}:function(){return p.css(c,d,"")},Y=R(),q=v&&v[3]||(p.cssNumber[d]?"":"px"),D=c.nodeType&&(p.cssNumber[d]||"px"!==q&&+Y)&&_e.exec(p.css(c,d));if(D&&D[3]!==q){for(q=q||D[3],D=+(Y/=2)||1;j--;)p.style(c,d,D+q),(1-k)*(1-(k=R()/Y||.5))<=0&&(j=0),D/=k;p.style(c,d,(D*=2)+q),v=v||[]}return v&&(D=+D||+Y||0,T=v[1]?D+(v[1]+1)*v[2]:+v[2],y&&(y.unit=q,y.start=D,y.end=T)),T}var Ci={};function Pe(c,d){for(var v,y,T,k,j,R,Y,q=[],D=0,g=c.length;D<g;D++)(y=c[D]).style&&(v=y.style.display,d?("none"===v&&(q[D]=Ft.get(y,"display")||null,q[D]||(y.style.display="")),""===y.style.display&&He(y)&&(q[D]=(Y=j=k=void 0,j=(T=y).ownerDocument,(Y=Ci[R=T.nodeName])||(k=j.body.appendChild(j.createElement(R)),Y=p.css(k,"display"),k.parentNode.removeChild(k),"none"===Y&&(Y="block"),Ci[R]=Y)))):"none"!==v&&(q[D]="none",Ft.set(y,"display",v)));for(D=0;D<g;D++)null!=q[D]&&(c[D].style.display=q[D]);return c}p.fn.extend({show:function(){return Pe(this,!0)},hide:function(){return Pe(this)},toggle:function(c){return"boolean"==typeof c?c?this.show():this.hide():this.each(function(){He(this)?p(this).show():p(this).hide()})}});var he,We,Re=/^(?:checkbox|radio)$/i,ai=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ze=/^$|^module$|\/(?:java|ecma)script/i;he=M.createDocumentFragment().appendChild(M.createElement("div")),(We=M.createElement("input")).setAttribute("type","radio"),We.setAttribute("checked","checked"),We.setAttribute("name","t"),he.appendChild(We),C.checkClone=he.cloneNode(!0).cloneNode(!0).lastChild.checked,he.innerHTML="<textarea>x</textarea>",C.noCloneChecked=!!he.cloneNode(!0).lastChild.defaultValue,he.innerHTML="<option></option>",C.option=!!he.lastChild;var ae={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function O(c,d){var v;return v=typeof c.getElementsByTagName<"u"?c.getElementsByTagName(d||"*"):typeof c.querySelectorAll<"u"?c.querySelectorAll(d||"*"):[],void 0===d||d&&W(c,d)?p.merge([c],v):v}function I(c,d){for(var v=0,y=c.length;v<y;v++)Ft.set(c[v],"globalEval",!d||Ft.get(d[v],"globalEval"))}ae.tbody=ae.tfoot=ae.colgroup=ae.caption=ae.thead,ae.th=ae.td,C.option||(ae.optgroup=ae.option=[1,"<select multiple='multiple'>","</select>"]);var X=/<|&#?\w+;/;function J(c,d,v,y,T){for(var k,j,R,Y,q,D,g=d.createDocumentFragment(),x=[],A=0,$=c.length;A<$;A++)if((k=c[A])||0===k)if("object"===nt(k))p.merge(x,k.nodeType?[k]:k);else if(X.test(k)){for(j=j||g.appendChild(d.createElement("div")),R=(ai.exec(k)||["",""])[1].toLowerCase(),j.innerHTML=(Y=ae[R]||ae._default)[1]+p.htmlPrefilter(k)+Y[2],D=Y[0];D--;)j=j.lastChild;p.merge(x,j.childNodes),(j=g.firstChild).textContent=""}else x.push(d.createTextNode(k));for(g.textContent="",A=0;k=x[A++];)if(y&&-1<p.inArray(k,y))T&&T.push(k);else if(q=ri(k),j=O(g.appendChild(k),"script"),q&&I(j),v)for(D=0;k=j[D++];)ze.test(k.type||"")&&v.push(k);return g}var pt=/^([^.]*)(?:\.(.+)|)/;function dt(){return!0}function ut(){return!1}function At(c,d){return c===function(){try{return M.activeElement}catch{}}()==("focus"===d)}function kt(c,d,v,y,T,k){var j,R;if("object"==typeof d){for(R in"string"!=typeof v&&(y=y||v,v=void 0),d)kt(c,R,v,y,d[R],k);return c}if(null==y&&null==T?(T=v,y=v=void 0):null==T&&("string"==typeof v?(T=y,y=void 0):(T=y,y=v,v=void 0)),!1===T)T=ut;else if(!T)return c;return 1===k&&(j=T,(T=function(Y){return p().off(Y),j.apply(this,arguments)}).guid=j.guid||(j.guid=p.guid++)),c.each(function(){p.event.add(this,d,T,y,v)})}function Nt(c,d,v){v?(Ft.set(c,d,!1),p.event.add(c,d,{namespace:!1,handler:function(y){var T,k,j=Ft.get(this,d);if(1&y.isTrigger&&this[d]){if(j.length)(p.event.special[d]||{}).delegateType&&y.stopPropagation();else if(j=t.call(arguments),Ft.set(this,d,j),T=v(this,d),this[d](),j!==(k=Ft.get(this,d))||T?Ft.set(this,d,!1):k={},j!==k)return y.stopImmediatePropagation(),y.preventDefault(),k&&k.value}else j.length&&(Ft.set(this,d,{value:p.event.trigger(p.extend(j[0],p.Event.prototype),j.slice(1),this)}),y.stopImmediatePropagation())}})):void 0===Ft.get(c,d)&&p.event.add(c,d,dt)}p.event={global:{},add:function(c,d,v,y,T){var k,j,R,Y,q,D,g,x,A,$,lt,ht=Ft.get(c);if(jt(c))for(v.handler&&(v=(k=v).handler,T=k.selector),T&&p.find.matchesSelector(Se,T),v.guid||(v.guid=p.guid++),(Y=ht.events)||(Y=ht.events=Object.create(null)),(j=ht.handle)||(j=ht.handle=function(Bt){return typeof p<"u"&&p.event.triggered!==Bt.type?p.event.dispatch.apply(c,arguments):void 0}),q=(d=(d||"").match(bt)||[""]).length;q--;)A=lt=(R=pt.exec(d[q])||[])[1],$=(R[2]||"").split(".").sort(),A&&(g=p.event.special[A]||{},g=p.event.special[A=(T?g.delegateType:g.bindType)||A]||{},D=p.extend({type:A,origType:lt,data:y,handler:v,guid:v.guid,selector:T,needsContext:T&&p.expr.match.needsContext.test(T),namespace:$.join(".")},k),(x=Y[A])||((x=Y[A]=[]).delegateCount=0,g.setup&&!1!==g.setup.call(c,y,$,j)||c.addEventListener&&c.addEventListener(A,j)),g.add&&(g.add.call(c,D),D.handler.guid||(D.handler.guid=v.guid)),T?x.splice(x.delegateCount++,0,D):x.push(D),p.event.global[A]=!0)},remove:function(c,d,v,y,T){var k,j,R,Y,q,D,g,x,A,$,lt,ht=Ft.hasData(c)&&Ft.get(c);if(ht&&(Y=ht.events)){for(q=(d=(d||"").match(bt)||[""]).length;q--;)if(A=lt=(R=pt.exec(d[q])||[])[1],$=(R[2]||"").split(".").sort(),A){for(g=p.event.special[A]||{},x=Y[A=(y?g.delegateType:g.bindType)||A]||[],R=R[2]&&new RegExp("(^|\\.)"+$.join("\\.(?:.*\\.|)")+"(\\.|$)"),j=k=x.length;k--;)D=x[k],!T&&lt!==D.origType||v&&v.guid!==D.guid||R&&!R.test(D.namespace)||y&&y!==D.selector&&("**"!==y||!D.selector)||(x.splice(k,1),D.selector&&x.delegateCount--,g.remove&&g.remove.call(c,D));j&&!x.length&&(g.teardown&&!1!==g.teardown.call(c,$,ht.handle)||p.removeEvent(c,A,ht.handle),delete Y[A])}else for(A in Y)p.event.remove(c,A+d[q],v,y,!0);p.isEmptyObject(Y)&&Ft.remove(c,"handle events")}},dispatch:function(c){var d,v,y,T,k,j,R=new Array(arguments.length),Y=p.event.fix(c),q=(Ft.get(this,"events")||Object.create(null))[Y.type]||[],D=p.event.special[Y.type]||{};for(R[0]=Y,d=1;d<arguments.length;d++)R[d]=arguments[d];if(Y.delegateTarget=this,!D.preDispatch||!1!==D.preDispatch.call(this,Y)){for(j=p.event.handlers.call(this,Y,q),d=0;(T=j[d++])&&!Y.isPropagationStopped();)for(Y.currentTarget=T.elem,v=0;(k=T.handlers[v++])&&!Y.isImmediatePropagationStopped();)Y.rnamespace&&!1!==k.namespace&&!Y.rnamespace.test(k.namespace)||(Y.handleObj=k,Y.data=k.data,void 0!==(y=((p.event.special[k.origType]||{}).handle||k.handler).apply(T.elem,R))&&!1===(Y.result=y)&&(Y.preventDefault(),Y.stopPropagation()));return D.postDispatch&&D.postDispatch.call(this,Y),Y.result}},handlers:function(c,d){var v,y,T,k,j,R=[],Y=d.delegateCount,q=c.target;if(Y&&q.nodeType&&!("click"===c.type&&1<=c.button))for(;q!==this;q=q.parentNode||this)if(1===q.nodeType&&("click"!==c.type||!0!==q.disabled)){for(k=[],j={},v=0;v<Y;v++)void 0===j[T=(y=d[v]).selector+" "]&&(j[T]=y.needsContext?-1<p(T,this).index(q):p.find(T,this,null,[q]).length),j[T]&&k.push(y);k.length&&R.push({elem:q,handlers:k})}return q=this,Y<d.length&&R.push({elem:q,handlers:d.slice(Y)}),R},addProp:function(c,d){Object.defineProperty(p.Event.prototype,c,{enumerable:!0,configurable:!0,get:w(d)?function(){if(this.originalEvent)return d(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[c]},set:function(v){Object.defineProperty(this,c,{enumerable:!0,configurable:!0,writable:!0,value:v})}})},fix:function(c){return c[p.expando]?c:new p.Event(c)},special:{load:{noBubble:!0},click:{setup:function(c){var d=this||c;return Re.test(d.type)&&d.click&&W(d,"input")&&Nt(d,"click",dt),!1},trigger:function(c){var d=this||c;return Re.test(d.type)&&d.click&&W(d,"input")&&Nt(d,"click"),!0},_default:function(c){var d=c.target;return Re.test(d.type)&&d.click&&W(d,"input")&&Ft.get(d,"click")||W(d,"a")}},beforeunload:{postDispatch:function(c){void 0!==c.result&&c.originalEvent&&(c.originalEvent.returnValue=c.result)}}}},p.removeEvent=function(c,d,v){c.removeEventListener&&c.removeEventListener(d,v)},p.Event=function(c,d){if(!(this instanceof p.Event))return new p.Event(c,d);c&&c.type?(this.originalEvent=c,this.type=c.type,this.isDefaultPrevented=c.defaultPrevented||void 0===c.defaultPrevented&&!1===c.returnValue?dt:ut,this.target=c.target&&3===c.target.nodeType?c.target.parentNode:c.target,this.currentTarget=c.currentTarget,this.relatedTarget=c.relatedTarget):this.type=c,d&&p.extend(this,d),this.timeStamp=c&&c.timeStamp||Date.now(),this[p.expando]=!0},p.Event.prototype={constructor:p.Event,isDefaultPrevented:ut,isPropagationStopped:ut,isImmediatePropagationStopped:ut,isSimulated:!1,preventDefault:function(){var c=this.originalEvent;this.isDefaultPrevented=dt,c&&!this.isSimulated&&c.preventDefault()},stopPropagation:function(){var c=this.originalEvent;this.isPropagationStopped=dt,c&&!this.isSimulated&&c.stopPropagation()},stopImmediatePropagation:function(){var c=this.originalEvent;this.isImmediatePropagationStopped=dt,c&&!this.isSimulated&&c.stopImmediatePropagation(),this.stopPropagation()}},p.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},p.event.addProp),p.each({focus:"focusin",blur:"focusout"},function(c,d){p.event.special[c]={setup:function(){return Nt(this,c,At),!1},trigger:function(){return Nt(this,c),!0},_default:function(){return!0},delegateType:d}}),p.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(c,d){p.event.special[c]={delegateType:d,bindType:d,handle:function(v){var y,T=v.relatedTarget,k=v.handleObj;return T&&(T===this||p.contains(this,T))||(v.type=k.origType,y=k.handler.apply(this,arguments),v.type=d),y}}}),p.fn.extend({on:function(c,d,v,y){return kt(this,c,d,v,y)},one:function(c,d,v,y){return kt(this,c,d,v,y,1)},off:function(c,d,v){var y,T;if(c&&c.preventDefault&&c.handleObj)return y=c.handleObj,p(c.delegateTarget).off(y.namespace?y.origType+"."+y.namespace:y.origType,y.selector,y.handler),this;if("object"==typeof c){for(T in c)this.off(T,d,c[T]);return this}return!1!==d&&"function"!=typeof d||(v=d,d=void 0),!1===v&&(v=ut),this.each(function(){p.event.remove(this,c,v,d)})}});var Yt=/<script|<style|<link/i,Mt=/checked\s*(?:[^=]|=\s*.checked.)/i,Ht=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Jt(c,d){return W(c,"table")&&W(11!==d.nodeType?d:d.firstChild,"tr")&&p(c).children("tbody")[0]||c}function se(c){return c.type=(null!==c.getAttribute("type"))+"/"+c.type,c}function Xe(c){return"true/"===(c.type||"").slice(0,5)?c.type=c.type.slice(5):c.removeAttribute("type"),c}function li(c,d){var v,y,T,k,j,R;if(1===d.nodeType){if(Ft.hasData(c)&&(R=Ft.get(c).events))for(T in Ft.remove(d,"handle events"),R)for(v=0,y=R[T].length;v<y;v++)p.event.add(d,T,R[T][v]);Rt.hasData(c)&&(k=Rt.access(c),j=p.extend({},k),Rt.set(d,j))}}function Ze(c,d,v,y){d=e(d);var T,k,j,R,Y,q,D=0,g=c.length,x=g-1,A=d[0],$=w(A);if($||1<g&&"string"==typeof A&&!C.checkClone&&Mt.test(A))return c.each(function(lt){var ht=c.eq(lt);$&&(d[0]=A.call(this,lt,ht.html())),Ze(ht,d,v,y)});if(g&&(k=(T=J(d,c[0].ownerDocument,!1,c,y)).firstChild,1===T.childNodes.length&&(T=k),k||y)){for(R=(j=p.map(O(T,"script"),se)).length;D<g;D++)Y=T,D!==x&&(Y=p.clone(Y,!0,!0),R&&p.merge(j,O(Y,"script"))),v.call(c[D],Y,D);if(R)for(q=j[j.length-1].ownerDocument,p.map(j,Xe),D=0;D<R;D++)ze.test((Y=j[D]).type||"")&&!Ft.access(Y,"globalEval")&&p.contains(q,Y)&&(Y.src&&"module"!==(Y.type||"").toLowerCase()?p._evalUrl&&!Y.noModule&&p._evalUrl(Y.src,{nonce:Y.nonce||Y.getAttribute("nonce")},q):H(Y.textContent.replace(Ht,""),Y,q))}return c}function Ye(c,d,v){for(var y,T=d?p.filter(d,c):c,k=0;null!=(y=T[k]);k++)v||1!==y.nodeType||p.cleanData(O(y)),y.parentNode&&(v&&ri(y)&&I(O(y,"script")),y.parentNode.removeChild(y));return c}p.extend({htmlPrefilter:function(c){return c},clone:function(c,d,v){var y,T,k,j,R,Y,q,D=c.cloneNode(!0),g=ri(c);if(!(C.noCloneChecked||1!==c.nodeType&&11!==c.nodeType||p.isXMLDoc(c)))for(j=O(D),y=0,T=(k=O(c)).length;y<T;y++)R=k[y],"input"===(q=(Y=j[y]).nodeName.toLowerCase())&&Re.test(R.type)?Y.checked=R.checked:"input"!==q&&"textarea"!==q||(Y.defaultValue=R.defaultValue);if(d)if(v)for(k=k||O(c),j=j||O(D),y=0,T=k.length;y<T;y++)li(k[y],j[y]);else li(c,D);return 0<(j=O(D,"script")).length&&I(j,!g&&O(c,"script")),D},cleanData:function(c){for(var d,v,y,T=p.event.special,k=0;void 0!==(v=c[k]);k++)if(jt(v)){if(d=v[Ft.expando]){if(d.events)for(y in d.events)T[y]?p.event.remove(v,y):p.removeEvent(v,y,d.handle);v[Ft.expando]=void 0}v[Rt.expando]&&(v[Rt.expando]=void 0)}}}),p.fn.extend({detach:function(c){return Ye(this,c,!0)},remove:function(c){return Ye(this,c)},text:function(c){return Xt(this,function(d){return void 0===d?p.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=d)})},null,c,arguments.length)},append:function(){return Ze(this,arguments,function(c){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Jt(this,c).appendChild(c)})},prepend:function(){return Ze(this,arguments,function(c){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var d=Jt(this,c);d.insertBefore(c,d.firstChild)}})},before:function(){return Ze(this,arguments,function(c){this.parentNode&&this.parentNode.insertBefore(c,this)})},after:function(){return Ze(this,arguments,function(c){this.parentNode&&this.parentNode.insertBefore(c,this.nextSibling)})},empty:function(){for(var c,d=0;null!=(c=this[d]);d++)1===c.nodeType&&(p.cleanData(O(c,!1)),c.textContent="");return this},clone:function(c,d){return c=null!=c&&c,d=d??c,this.map(function(){return p.clone(this,c,d)})},html:function(c){return Xt(this,function(d){var v=this[0]||{},y=0,T=this.length;if(void 0===d&&1===v.nodeType)return v.innerHTML;if("string"==typeof d&&!Yt.test(d)&&!ae[(ai.exec(d)||["",""])[1].toLowerCase()]){d=p.htmlPrefilter(d);try{for(;y<T;y++)1===(v=this[y]||{}).nodeType&&(p.cleanData(O(v,!1)),v.innerHTML=d);v=0}catch{}}v&&this.empty().append(d)},null,c,arguments.length)},replaceWith:function(){var c=[];return Ze(this,arguments,function(d){var v=this.parentNode;p.inArray(this,c)<0&&(p.cleanData(O(this)),v&&v.replaceChild(d,this))},c)}}),p.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(c,d){p.fn[c]=function(v){for(var y,T=[],k=p(v),j=k.length-1,R=0;R<=j;R++)y=R===j?this:this.clone(!0),p(k[R])[d](y),i.apply(T,y.get());return this.pushStack(T)}});var Ae=new RegExp("^("+me+")(?!px)[a-z%]+$","i"),Mi=function(c){var d=c.ownerDocument.defaultView;return d&&d.opener||(d=h),d.getComputedStyle(c)},Hi=function(c,d,v){var y,T,k={};for(T in d)k[T]=c.style[T],c.style[T]=d[T];for(T in y=v.call(c),d)c.style[T]=k[T];return y},an=new RegExp(Ce.join("|"),"i");function $e(c,d,v){var y,T,k,j,R=c.style;return(v=v||Mi(c))&&(""!==(j=v.getPropertyValue(d)||v[d])||ri(c)||(j=p.style(c,d)),!C.pixelBoxStyles()&&Ae.test(j)&&an.test(d)&&(y=R.width,T=R.minWidth,k=R.maxWidth,R.minWidth=R.maxWidth=R.width=j,j=v.width,R.width=y,R.minWidth=T,R.maxWidth=k)),void 0!==j?j+"":j}function ti(c,d){return{get:function(){if(!c())return(this.get=d).apply(this,arguments);delete this.get}}}!function(){function c(){if(q){Y.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",q.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Se.appendChild(Y).appendChild(q);var D=h.getComputedStyle(q);v="1%"!==D.top,R=12===d(D.marginLeft),q.style.right="60%",k=36===d(D.right),y=36===d(D.width),q.style.position="absolute",T=12===d(q.offsetWidth/3),Se.removeChild(Y),q=null}}function d(D){return Math.round(parseFloat(D))}var v,y,T,k,j,R,Y=M.createElement("div"),q=M.createElement("div");q.style&&(q.style.backgroundClip="content-box",q.cloneNode(!0).style.backgroundClip="",C.clearCloneStyle="content-box"===q.style.backgroundClip,p.extend(C,{boxSizingReliable:function(){return c(),y},pixelBoxStyles:function(){return c(),k},pixelPosition:function(){return c(),v},reliableMarginLeft:function(){return c(),R},scrollboxSize:function(){return c(),T},reliableTrDimensions:function(){var D,g,x,A;return null==j&&(D=M.createElement("table"),g=M.createElement("tr"),x=M.createElement("div"),D.style.cssText="position:absolute;left:-11111px;border-collapse:separate",g.style.cssText="border:1px solid",g.style.height="1px",x.style.height="9px",x.style.display="block",Se.appendChild(D).appendChild(g).appendChild(x),A=h.getComputedStyle(g),j=parseInt(A.height,10)+parseInt(A.borderTopWidth,10)+parseInt(A.borderBottomWidth,10)===g.offsetHeight,Se.removeChild(D)),j}}))}();var Ii=["Webkit","Moz","ms"],ei=M.createElement("div").style,mn={};function ln(c){return p.cssProps[c]||mn[c]||(c in ei?c:mn[c]=function(v){for(var y=v[0].toUpperCase()+v.slice(1),T=Ii.length;T--;)if((v=Ii[T]+y)in ei)return v}(c)||c)}var pi=/^(none|table(?!-c[ea]).+)/,Ti=/^--/,cn={position:"absolute",visibility:"hidden",display:"block"},Wi={letterSpacing:"0",fontWeight:"400"};function zi(c,d,v){var y=_e.exec(d);return y?Math.max(0,y[2]-(v||0))+(y[3]||"px"):d}function Ji(c,d,v,y,T,k){var j="width"===d?1:0,R=0,Y=0;if(v===(y?"border":"content"))return 0;for(;j<4;j+=2)"margin"===v&&(Y+=p.css(c,v+Ce[j],!0,T)),y?("content"===v&&(Y-=p.css(c,"padding"+Ce[j],!0,T)),"margin"!==v&&(Y-=p.css(c,"border"+Ce[j]+"Width",!0,T))):(Y+=p.css(c,"padding"+Ce[j],!0,T),"padding"!==v?Y+=p.css(c,"border"+Ce[j]+"Width",!0,T):R+=p.css(c,"border"+Ce[j]+"Width",!0,T));return!y&&0<=k&&(Y+=Math.max(0,Math.ceil(c["offset"+d[0].toUpperCase()+d.slice(1)]-k-Y-R-.5))||0),Y}function vn(c,d,v){var y=Mi(c),T=(!C.boxSizingReliable()||v)&&"border-box"===p.css(c,"boxSizing",!1,y),k=T,j=$e(c,d,y),R="offset"+d[0].toUpperCase()+d.slice(1);if(Ae.test(j)){if(!v)return j;j="auto"}return(!C.boxSizingReliable()&&T||!C.reliableTrDimensions()&&W(c,"tr")||"auto"===j||!parseFloat(j)&&"inline"===p.css(c,"display",!1,y))&&c.getClientRects().length&&(T="border-box"===p.css(c,"boxSizing",!1,y),(k=R in c)&&(j=c[R])),(j=parseFloat(j)||0)+Ji(c,d,v||(T?"border":"content"),k,y,j)+"px"}function je(c,d,v,y,T){return new je.prototype.init(c,d,v,y,T)}p.extend({cssHooks:{opacity:{get:function(c,d){if(d){var v=$e(c,"opacity");return""===v?"1":v}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(c,d,v,y){if(c&&3!==c.nodeType&&8!==c.nodeType&&c.style){var T,k,j,R=re(d),Y=Ti.test(d),q=c.style;if(Y||(d=ln(R)),j=p.cssHooks[d]||p.cssHooks[R],void 0===v)return j&&"get"in j&&void 0!==(T=j.get(c,!1,y))?T:q[d];"string"==(k=typeof v)&&(T=_e.exec(v))&&T[1]&&(v=oi(c,d,T),k="number"),null!=v&&v==v&&("number"!==k||Y||(v+=T&&T[3]||(p.cssNumber[R]?"":"px")),C.clearCloneStyle||""!==v||0!==d.indexOf("background")||(q[d]="inherit"),j&&"set"in j&&void 0===(v=j.set(c,v,y))||(Y?q.setProperty(d,v):q[d]=v))}},css:function(c,d,v,y){var T,k,j,R=re(d);return Ti.test(d)||(d=ln(R)),(j=p.cssHooks[d]||p.cssHooks[R])&&"get"in j&&(T=j.get(c,!0,v)),void 0===T&&(T=$e(c,d,y)),"normal"===T&&d in Wi&&(T=Wi[d]),""===v||v?(k=parseFloat(T),!0===v||isFinite(k)?k||0:T):T}}),p.each(["height","width"],function(c,d){p.cssHooks[d]={get:function(v,y,T){if(y)return!pi.test(p.css(v,"display"))||v.getClientRects().length&&v.getBoundingClientRect().width?vn(v,d,T):Hi(v,cn,function(){return vn(v,d,T)})},set:function(v,y,T){var k,j=Mi(v),R=!C.scrollboxSize()&&"absolute"===j.position,Y=(R||T)&&"border-box"===p.css(v,"boxSizing",!1,j),q=T?Ji(v,d,T,Y,j):0;return Y&&R&&(q-=Math.ceil(v["offset"+d[0].toUpperCase()+d.slice(1)]-parseFloat(j[d])-Ji(v,d,"border",!1,j)-.5)),q&&(k=_e.exec(y))&&"px"!==(k[3]||"px")&&(v.style[d]=y,y=p.css(v,d)),zi(0,y,q)}}}),p.cssHooks.marginLeft=ti(C.reliableMarginLeft,function(c,d){if(d)return(parseFloat($e(c,"marginLeft"))||c.getBoundingClientRect().left-Hi(c,{marginLeft:0},function(){return c.getBoundingClientRect().left}))+"px"}),p.each({margin:"",padding:"",border:"Width"},function(c,d){p.cssHooks[c+d]={expand:function(v){for(var y=0,T={},k="string"==typeof v?v.split(" "):[v];y<4;y++)T[c+Ce[y]+d]=k[y]||k[y-2]||k[0];return T}},"margin"!==c&&(p.cssHooks[c+d].set=zi)}),p.fn.extend({css:function(c,d){return Xt(this,function(v,y,T){var k,j,R={},Y=0;if(Array.isArray(y)){for(k=Mi(v),j=y.length;Y<j;Y++)R[y[Y]]=p.css(v,y[Y],!1,k);return R}return void 0!==T?p.style(v,y,T):p.css(v,y)},c,d,1<arguments.length)}}),((p.Tween=je).prototype={constructor:je,init:function(c,d,v,y,T,k){this.elem=c,this.prop=v,this.easing=T||p.easing._default,this.options=d,this.start=this.now=this.cur(),this.end=y,this.unit=k||(p.cssNumber[v]?"":"px")},cur:function(){var c=je.propHooks[this.prop];return c&&c.get?c.get(this):je.propHooks._default.get(this)},run:function(c){var d,v=je.propHooks[this.prop];return this.pos=d=this.options.duration?p.easing[this.easing](c,this.options.duration*c,0,1,this.options.duration):c,this.now=(this.end-this.start)*d+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),v&&v.set?v.set(this):je.propHooks._default.set(this),this}}).init.prototype=je.prototype,(je.propHooks={_default:{get:function(c){var d;return 1!==c.elem.nodeType||null!=c.elem[c.prop]&&null==c.elem.style[c.prop]?c.elem[c.prop]:(d=p.css(c.elem,c.prop,""))&&"auto"!==d?d:0},set:function(c){p.fx.step[c.prop]?p.fx.step[c.prop](c):1!==c.elem.nodeType||!p.cssHooks[c.prop]&&null==c.elem.style[ln(c.prop)]?c.elem[c.prop]=c.now:p.style(c.elem,c.prop,c.now+c.unit)}}}).scrollTop=je.propHooks.scrollLeft={set:function(c){c.elem.nodeType&&c.elem.parentNode&&(c.elem[c.prop]=c.now)}},p.easing={linear:function(c){return c},swing:function(c){return.5-Math.cos(c*Math.PI)/2},_default:"swing"},p.fx=je.prototype.init,p.fx.step={};var Xi,ci,gi,Mn,hn=/^(?:toggle|show|hide)$/,Si=/queueHooks$/;function Fi(){ci&&(!1===M.hidden&&h.requestAnimationFrame?h.requestAnimationFrame(Fi):h.setTimeout(Fi,p.fx.interval),p.fx.tick())}function _n(){return h.setTimeout(function(){Xi=void 0}),Xi=Date.now()}function Zi(c,d){var v,y=0,T={height:c};for(d=d?1:0;y<4;y+=2-d)T["margin"+(v=Ce[y])]=T["padding"+v]=c;return d&&(T.opacity=T.width=c),T}function yn(c,d,v){for(var y,T=(Be.tweeners[d]||[]).concat(Be.tweeners["*"]),k=0,j=T.length;k<j;k++)if(y=T[k].call(v,d,c))return y}function Be(c,d,v){var y,T,k=0,j=Be.prefilters.length,R=p.Deferred().always(function(){delete Y.elem}),Y=function(){if(T)return!1;for(var g=Xi||_n(),x=Math.max(0,q.startTime+q.duration-g),A=1-(x/q.duration||0),$=0,lt=q.tweens.length;$<lt;$++)q.tweens[$].run(A);return R.notifyWith(c,[q,A,x]),A<1&&lt?x:(lt||R.notifyWith(c,[q,1,0]),R.resolveWith(c,[q]),!1)},q=R.promise({elem:c,props:p.extend({},d),opts:p.extend(!0,{specialEasing:{},easing:p.easing._default},v),originalProperties:d,originalOptions:v,startTime:Xi||_n(),duration:v.duration,tweens:[],createTween:function(g,x){var A=p.Tween(c,q.opts,g,x,q.opts.specialEasing[g]||q.opts.easing);return q.tweens.push(A),A},stop:function(g){var x=0,A=g?q.tweens.length:0;if(T)return this;for(T=!0;x<A;x++)q.tweens[x].run(1);return g?(R.notifyWith(c,[q,1,0]),R.resolveWith(c,[q,g])):R.rejectWith(c,[q,g]),this}}),D=q.props;for(function(g,x){var A,$,lt,ht,Bt;for(A in g)if(lt=x[$=re(A)],ht=g[A],Array.isArray(ht)&&(lt=ht[1],ht=g[A]=ht[0]),A!==$&&(g[$]=ht,delete g[A]),(Bt=p.cssHooks[$])&&"expand"in Bt)for(A in ht=Bt.expand(ht),delete g[$],ht)A in g||(g[A]=ht[A],x[A]=lt);else x[$]=lt}(D,q.opts.specialEasing);k<j;k++)if(y=Be.prefilters[k].call(q,c,D,q.opts))return w(y.stop)&&(p._queueHooks(q.elem,q.opts.queue).stop=y.stop.bind(y)),y;return p.map(D,yn,q),w(q.opts.start)&&q.opts.start.call(c,q),q.progress(q.opts.progress).done(q.opts.done,q.opts.complete).fail(q.opts.fail).always(q.opts.always),p.fx.timer(p.extend(Y,{elem:c,anim:q,queue:q.opts.queue})),q}p.Animation=p.extend(Be,{tweeners:{"*":[function(c,d){var v=this.createTween(c,d);return oi(v.elem,c,_e.exec(d),v),v}]},tweener:function(c,d){w(c)?(d=c,c=["*"]):c=c.match(bt);for(var v,y=0,T=c.length;y<T;y++)(Be.tweeners[v=c[y]]=Be.tweeners[v]||[]).unshift(d)},prefilters:[function(c,d,v){var y,T,k,j,R,Y,q,D,g="width"in d||"height"in d,x=this,A={},$=c.style,lt=c.nodeType&&He(c),ht=Ft.get(c,"fxshow");for(y in v.queue||(null==(j=p._queueHooks(c,"fx")).unqueued&&(j.unqueued=0,R=j.empty.fire,j.empty.fire=function(){j.unqueued||R()}),j.unqueued++,x.always(function(){x.always(function(){j.unqueued--,p.queue(c,"fx").length||j.empty.fire()})})),d)if(hn.test(T=d[y])){if(delete d[y],k=k||"toggle"===T,T===(lt?"hide":"show")){if("show"!==T||!ht||void 0===ht[y])continue;lt=!0}A[y]=ht&&ht[y]||p.style(c,y)}if((Y=!p.isEmptyObject(d))||!p.isEmptyObject(A))for(y in g&&1===c.nodeType&&(v.overflow=[$.overflow,$.overflowX,$.overflowY],null==(q=ht&&ht.display)&&(q=Ft.get(c,"display")),"none"===(D=p.css(c,"display"))&&(q?D=q:(Pe([c],!0),q=c.style.display||q,D=p.css(c,"display"),Pe([c]))),("inline"===D||"inline-block"===D&&null!=q)&&"none"===p.css(c,"float")&&(Y||(x.done(function(){$.display=q}),null==q&&(q="none"===(D=$.display)?"":D)),$.display="inline-block")),v.overflow&&($.overflow="hidden",x.always(function(){$.overflow=v.overflow[0],$.overflowX=v.overflow[1],$.overflowY=v.overflow[2]})),Y=!1,A)Y||(ht?"hidden"in ht&&(lt=ht.hidden):ht=Ft.access(c,"fxshow",{display:q}),k&&(ht.hidden=!lt),lt&&Pe([c],!0),x.done(function(){for(y in lt||Pe([c]),Ft.remove(c,"fxshow"),A)p.style(c,y,A[y])})),Y=yn(lt?ht[y]:0,y,x),y in ht||(ht[y]=Y.start,lt&&(Y.end=Y.start,Y.start=0))}],prefilter:function(c,d){d?Be.prefilters.unshift(c):Be.prefilters.push(c)}}),p.speed=function(c,d,v){var y=c&&"object"==typeof c?p.extend({},c):{complete:v||!v&&d||w(c)&&c,duration:c,easing:v&&d||d&&!w(d)&&d};return p.fx.off?y.duration=0:"number"!=typeof y.duration&&(y.duration=y.duration in p.fx.speeds?p.fx.speeds[y.duration]:p.fx.speeds._default),null!=y.queue&&!0!==y.queue||(y.queue="fx"),y.old=y.complete,y.complete=function(){w(y.old)&&y.old.call(this),y.queue&&p.dequeue(this,y.queue)},y},p.fn.extend({fadeTo:function(c,d,v,y){return this.filter(He).css("opacity",0).show().end().animate({opacity:d},c,v,y)},animate:function(c,d,v,y){var T=p.isEmptyObject(c),k=p.speed(d,v,y),j=function(){var R=Be(this,p.extend({},c),k);(T||Ft.get(this,"finish"))&&R.stop(!0)};return j.finish=j,T||!1===k.queue?this.each(j):this.queue(k.queue,j)},stop:function(c,d,v){var y=function(T){var k=T.stop;delete T.stop,k(v)};return"string"!=typeof c&&(v=d,d=c,c=void 0),d&&this.queue(c||"fx",[]),this.each(function(){var T=!0,k=null!=c&&c+"queueHooks",j=p.timers,R=Ft.get(this);if(k)R[k]&&R[k].stop&&y(R[k]);else for(k in R)R[k]&&R[k].stop&&Si.test(k)&&y(R[k]);for(k=j.length;k--;)j[k].elem!==this||null!=c&&j[k].queue!==c||(j[k].anim.stop(v),T=!1,j.splice(k,1));!T&&v||p.dequeue(this,c)})},finish:function(c){return!1!==c&&(c=c||"fx"),this.each(function(){var d,v=Ft.get(this),y=v[c+"queue"],T=v[c+"queueHooks"],k=p.timers,j=y?y.length:0;for(v.finish=!0,p.queue(this,c,[]),T&&T.stop&&T.stop.call(this,!0),d=k.length;d--;)k[d].elem===this&&k[d].queue===c&&(k[d].anim.stop(!0),k.splice(d,1));for(d=0;d<j;d++)y[d]&&y[d].finish&&y[d].finish.call(this);delete v.finish})}}),p.each(["toggle","show","hide"],function(c,d){var v=p.fn[d];p.fn[d]=function(y,T,k){return null==y||"boolean"==typeof y?v.apply(this,arguments):this.animate(Zi(d,!0),y,T,k)}}),p.each({slideDown:Zi("show"),slideUp:Zi("hide"),slideToggle:Zi("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(c,d){p.fn[c]=function(v,y,T){return this.animate(d,v,y,T)}}),p.timers=[],p.fx.tick=function(){var c,d=0,v=p.timers;for(Xi=Date.now();d<v.length;d++)(c=v[d])()||v[d]!==c||v.splice(d--,1);v.length||p.fx.stop(),Xi=void 0},p.fx.timer=function(c){p.timers.push(c),p.fx.start()},p.fx.interval=13,p.fx.start=function(){ci||(ci=!0,Fi())},p.fx.stop=function(){ci=null},p.fx.speeds={slow:600,fast:200,_default:400},p.fn.delay=function(c,d){return c=p.fx&&p.fx.speeds[c]||c,this.queue(d=d||"fx",function(v,y){var T=h.setTimeout(v,c);y.stop=function(){h.clearTimeout(T)}})},gi=M.createElement("input"),Mn=M.createElement("select").appendChild(M.createElement("option")),gi.type="checkbox",C.checkOn=""!==gi.value,C.optSelected=Mn.selected,(gi=M.createElement("input")).value="t",gi.type="radio",C.radioValue="t"===gi.value;var In,tn=p.expr.attrHandle;p.fn.extend({attr:function(c,d){return Xt(this,p.attr,c,d,1<arguments.length)},removeAttr:function(c){return this.each(function(){p.removeAttr(this,c)})}}),p.extend({attr:function(c,d,v){var y,T,k=c.nodeType;if(3!==k&&8!==k&&2!==k)return typeof c.getAttribute>"u"?p.prop(c,d,v):(1===k&&p.isXMLDoc(c)||(T=p.attrHooks[d.toLowerCase()]||(p.expr.match.bool.test(d)?In:void 0)),void 0!==v?null===v?void p.removeAttr(c,d):T&&"set"in T&&void 0!==(y=T.set(c,v,d))?y:(c.setAttribute(d,v+""),v):T&&"get"in T&&null!==(y=T.get(c,d))?y:null==(y=p.find.attr(c,d))?void 0:y)},attrHooks:{type:{set:function(c,d){if(!C.radioValue&&"radio"===d&&W(c,"input")){var v=c.value;return c.setAttribute("type",d),v&&(c.value=v),d}}}},removeAttr:function(c,d){var v,y=0,T=d&&d.match(bt);if(T&&1===c.nodeType)for(;v=T[y++];)c.removeAttribute(v)}}),In={set:function(c,d,v){return!1===d?p.removeAttr(c,v):c.setAttribute(v,v),v}},p.each(p.expr.match.bool.source.match(/\w+/g),function(c,d){var v=tn[d]||p.find.attr;tn[d]=function(y,T,k){var j,R,Y=T.toLowerCase();return k||(R=tn[Y],tn[Y]=j,j=null!=v(y,T,k)?Y:null,tn[Y]=R),j}});var Fn=/^(?:input|select|textarea|button)$/i,hi=/^(?:a|area)$/i;function Oi(c){return(c.match(bt)||[]).join(" ")}function Yi(c){return c.getAttribute&&c.getAttribute("class")||""}function en(c){return Array.isArray(c)?c:"string"==typeof c&&c.match(bt)||[]}p.fn.extend({prop:function(c,d){return Xt(this,p.prop,c,d,1<arguments.length)},removeProp:function(c){return this.each(function(){delete this[p.propFix[c]||c]})}}),p.extend({prop:function(c,d,v){var y,T,k=c.nodeType;if(3!==k&&8!==k&&2!==k)return 1===k&&p.isXMLDoc(c)||(T=p.propHooks[d=p.propFix[d]||d]),void 0!==v?T&&"set"in T&&void 0!==(y=T.set(c,v,d))?y:c[d]=v:T&&"get"in T&&null!==(y=T.get(c,d))?y:c[d]},propHooks:{tabIndex:{get:function(c){var d=p.find.attr(c,"tabindex");return d?parseInt(d,10):Fn.test(c.nodeName)||hi.test(c.nodeName)&&c.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),C.optSelected||(p.propHooks.selected={get:function(c){return null},set:function(c){}}),p.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){p.propFix[this.toLowerCase()]=this}),p.fn.extend({addClass:function(c){var d,v,y,T,k,j,R,Y=0;if(w(c))return this.each(function(q){p(this).addClass(c.call(this,q,Yi(this)))});if((d=en(c)).length)for(;v=this[Y++];)if(T=Yi(v),y=1===v.nodeType&&" "+Oi(T)+" "){for(j=0;k=d[j++];)y.indexOf(" "+k+" ")<0&&(y+=k+" ");T!==(R=Oi(y))&&v.setAttribute("class",R)}return this},removeClass:function(c){var d,v,y,T,k,j,R,Y=0;if(w(c))return this.each(function(q){p(this).removeClass(c.call(this,q,Yi(this)))});if(!arguments.length)return this.attr("class","");if((d=en(c)).length)for(;v=this[Y++];)if(T=Yi(v),y=1===v.nodeType&&" "+Oi(T)+" "){for(j=0;k=d[j++];)for(;-1<y.indexOf(" "+k+" ");)y=y.replace(" "+k+" "," ");T!==(R=Oi(y))&&v.setAttribute("class",R)}return this},toggleClass:function(c,d){var v=typeof c,y="string"===v||Array.isArray(c);return"boolean"==typeof d&&y?d?this.addClass(c):this.removeClass(c):w(c)?this.each(function(T){p(this).toggleClass(c.call(this,T,Yi(this),d),d)}):this.each(function(){var T,k,j,R;if(y)for(k=0,j=p(this),R=en(c);T=R[k++];)j.hasClass(T)?j.removeClass(T):j.addClass(T);else void 0!==c&&"boolean"!==v||((T=Yi(this))&&Ft.set(this,"__className__",T),this.setAttribute&&this.setAttribute("class",T||!1===c?"":Ft.get(this,"__className__")||""))})},hasClass:function(c){var d,v,y=0;for(d=" "+c+" ";v=this[y++];)if(1===v.nodeType&&-1<(" "+Oi(Yi(v))+" ").indexOf(d))return!0;return!1}});var ir=/\r/g;p.fn.extend({val:function(c){var d,v,y,T=this[0];return arguments.length?(y=w(c),this.each(function(k){var j;1===this.nodeType&&(null==(j=y?c.call(this,k,p(this).val()):c)?j="":"number"==typeof j?j+="":Array.isArray(j)&&(j=p.map(j,function(R){return null==R?"":R+""})),(d=p.valHooks[this.type]||p.valHooks[this.nodeName.toLowerCase()])&&"set"in d&&void 0!==d.set(this,j,"value")||(this.value=j))})):T?(d=p.valHooks[T.type]||p.valHooks[T.nodeName.toLowerCase()])&&"get"in d&&void 0!==(v=d.get(T,"value"))?v:"string"==typeof(v=T.value)?v.replace(ir,""):v??"":void 0}}),p.extend({valHooks:{option:{get:function(c){return p.find.attr(c,"value")??Oi(p.text(c))}},select:{get:function(c){var d,v,y,T=c.options,k=c.selectedIndex,j="select-one"===c.type,R=j?null:[],Y=j?k+1:T.length;for(y=k<0?Y:j?k:0;y<Y;y++)if(((v=T[y]).selected||y===k)&&!v.disabled&&(!v.parentNode.disabled||!W(v.parentNode,"optgroup"))){if(d=p(v).val(),j)return d;R.push(d)}return R},set:function(c,d){for(var v,y,T=c.options,k=p.makeArray(d),j=T.length;j--;)((y=T[j]).selected=-1<p.inArray(p.valHooks.option.get(y),k))&&(v=!0);return v||(c.selectedIndex=-1),k}}}}),p.each(["radio","checkbox"],function(){p.valHooks[this]={set:function(c,d){if(Array.isArray(d))return c.checked=-1<p.inArray(p(c).val(),d)}},C.checkOn||(p.valHooks[this].get=function(c){return null===c.getAttribute("value")?"on":c.value})}),C.focusin="onfocusin"in h;var bn=/^(?:focusinfocus|focusoutblur)$/,xn=function(c){c.stopPropagation()};p.extend(p.event,{trigger:function(c,d,v,y){var T,k,j,R,Y,q,D,g,x=[v||M],A=f.call(c,"type")?c.type:c,$=f.call(c,"namespace")?c.namespace.split("."):[];if(k=g=j=v=v||M,3!==v.nodeType&&8!==v.nodeType&&!bn.test(A+p.event.triggered)&&(-1<A.indexOf(".")&&(A=($=A.split(".")).shift(),$.sort()),Y=A.indexOf(":")<0&&"on"+A,(c=c[p.expando]?c:new p.Event(A,"object"==typeof c&&c)).isTrigger=y?2:3,c.namespace=$.join("."),c.rnamespace=c.namespace?new RegExp("(^|\\.)"+$.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,c.result=void 0,c.target||(c.target=v),d=null==d?[c]:p.makeArray(d,[c]),D=p.event.special[A]||{},y||!D.trigger||!1!==D.trigger.apply(v,d))){if(!y&&!D.noBubble&&!E(v)){for(bn.test((R=D.delegateType||A)+A)||(k=k.parentNode);k;k=k.parentNode)x.push(k),j=k;j===(v.ownerDocument||M)&&x.push(j.defaultView||j.parentWindow||h)}for(T=0;(k=x[T++])&&!c.isPropagationStopped();)g=k,c.type=1<T?R:D.bindType||A,(q=(Ft.get(k,"events")||Object.create(null))[c.type]&&Ft.get(k,"handle"))&&q.apply(k,d),(q=Y&&k[Y])&&q.apply&&jt(k)&&(c.result=q.apply(k,d),!1===c.result&&c.preventDefault());return c.type=A,y||c.isDefaultPrevented()||D._default&&!1!==D._default.apply(x.pop(),d)||!jt(v)||Y&&w(v[A])&&!E(v)&&((j=v[Y])&&(v[Y]=null),p.event.triggered=A,c.isPropagationStopped()&&g.addEventListener(A,xn),v[A](),c.isPropagationStopped()&&g.removeEventListener(A,xn),p.event.triggered=void 0,j&&(v[Y]=j)),c.result}},simulate:function(c,d,v){var y=p.extend(new p.Event,v,{type:c,isSimulated:!0});p.event.trigger(y,null,d)}}),p.fn.extend({trigger:function(c,d){return this.each(function(){p.event.trigger(c,d,this)})},triggerHandler:function(c,d){var v=this[0];if(v)return p.event.trigger(c,d,v,!0)}}),C.focusin||p.each({focus:"focusin",blur:"focusout"},function(c,d){var v=function(y){p.event.simulate(d,y.target,p.event.fix(y))};p.event.special[d]={setup:function(){var y=this.ownerDocument||this.document||this,T=Ft.access(y,d);T||y.addEventListener(c,v,!0),Ft.access(y,d,(T||0)+1)},teardown:function(){var y=this.ownerDocument||this.document||this,T=Ft.access(y,d)-1;T?Ft.access(y,d,T):(y.removeEventListener(c,v,!0),Ft.remove(y,d))}}});var Vi=h.location,wn={guid:Date.now()},Cn=/\?/;p.parseXML=function(c){var d,v;if(!c||"string"!=typeof c)return null;try{d=(new h.DOMParser).parseFromString(c,"text/xml")}catch{}return v=d&&d.getElementsByTagName("parsererror")[0],d&&!v||p.error("Invalid XML: "+(v?p.map(v.childNodes,function(y){return y.textContent}).join("\n"):c)),d};var un=/\[\]$/,nn=/\r?\n/g,fn=/^(?:submit|button|image|reset|file)$/i,Nn=/^(?:input|select|textarea|keygen)/i;function Ei(c,d,v,y){var T;if(Array.isArray(d))p.each(d,function(k,j){v||un.test(c)?y(c,j):Ei(c+"["+("object"==typeof j&&null!=j?k:"")+"]",j,v,y)});else if(v||"object"!==nt(d))y(c,d);else for(T in d)Ei(c+"["+T+"]",d[T],v,y)}p.param=function(c,d){var v,y=[],T=function(k,j){var R=w(j)?j():j;y[y.length]=encodeURIComponent(k)+"="+encodeURIComponent(R??"")};if(null==c)return"";if(Array.isArray(c)||c.jquery&&!p.isPlainObject(c))p.each(c,function(){T(this.name,this.value)});else for(v in c)Ei(v,c[v],d,T);return y.join("&")},p.fn.extend({serialize:function(){return p.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var c=p.prop(this,"elements");return c?p.makeArray(c):this}).filter(function(){var c=this.type;return this.name&&!p(this).is(":disabled")&&Nn.test(this.nodeName)&&!fn.test(c)&&(this.checked||!Re.test(c))}).map(function(c,d){var v=p(this).val();return null==v?null:Array.isArray(v)?p.map(v,function(y){return{name:d.name,value:y.replace(nn,"\r\n")}}):{name:d.name,value:v.replace(nn,"\r\n")}}).get()}});var Tn=/%20/g,Rn=/#.*$/,Yn=/([?&])_=[^&]*/,Vn=/^(.*?):[ \t]*([^\r\n]*)$/gm,Un=/^(?:GET|HEAD)$/,Ni=/^\/\//,Sn={},On={},dn="*/".concat("*"),En=M.createElement("a");function Ui(c){return function(d,v){"string"!=typeof d&&(v=d,d="*");var y,T=0,k=d.toLowerCase().match(bt)||[];if(w(v))for(;y=k[T++];)"+"===y[0]?(y=y.slice(1)||"*",(c[y]=c[y]||[]).unshift(v)):(c[y]=c[y]||[]).push(v)}}function An(c,d,v,y){var T={},k=c===On;function j(R){var Y;return T[R]=!0,p.each(c[R]||[],function(q,D){var g=D(d,v,y);return"string"!=typeof g||k||T[g]?k?!(Y=g):void 0:(d.dataTypes.unshift(g),j(g),!1)}),Y}return j(d.dataTypes[0])||!T["*"]&&j("*")}function rn(c,d){var v,y,T=p.ajaxSettings.flatOptions||{};for(v in d)void 0!==d[v]&&((T[v]?c:y||(y={}))[v]=d[v]);return y&&p.extend(!0,c,y),c}En.href=Vi.href,p.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Vi.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Vi.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":dn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":p.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(c,d){return d?rn(rn(c,p.ajaxSettings),d):rn(p.ajaxSettings,c)},ajaxPrefilter:Ui(Sn),ajaxTransport:Ui(On),ajax:function(c,d){"object"==typeof c&&(d=c,c=void 0);var v,y,T,k,j,R,Y,q,D,g,x=p.ajaxSetup({},d=d||{}),A=x.context||x,$=x.context&&(A.nodeType||A.jquery)?p(A):p.event,lt=p.Deferred(),ht=p.Callbacks("once memory"),Bt=x.statusCode||{},qt={},pe={},ee="canceled",zt={readyState:0,getResponseHeader:function(Zt){var ue;if(Y){if(!k)for(k={};ue=Vn.exec(T);)k[ue[1].toLowerCase()+" "]=(k[ue[1].toLowerCase()+" "]||[]).concat(ue[2]);ue=k[Zt.toLowerCase()+" "]}return null==ue?null:ue.join(", ")},getAllResponseHeaders:function(){return Y?T:null},setRequestHeader:function(Zt,ue){return null==Y&&(Zt=pe[Zt.toLowerCase()]=pe[Zt.toLowerCase()]||Zt,qt[Zt]=ue),this},overrideMimeType:function(Zt){return null==Y&&(x.mimeType=Zt),this},statusCode:function(Zt){var ue;if(Zt)if(Y)zt.always(Zt[zt.status]);else for(ue in Zt)Bt[ue]=[Bt[ue],Zt[ue]];return this},abort:function(Zt){var ue=Zt||ee;return v&&v.abort(ue),De(0,ue),this}};if(lt.promise(zt),x.url=((c||x.url||Vi.href)+"").replace(Ni,Vi.protocol+"//"),x.type=d.method||d.type||x.method||x.type,x.dataTypes=(x.dataType||"*").toLowerCase().match(bt)||[""],null==x.crossDomain){R=M.createElement("a");try{R.href=x.url,R.href=R.href,x.crossDomain=En.protocol+"//"+En.host!=R.protocol+"//"+R.host}catch{x.crossDomain=!0}}if(x.data&&x.processData&&"string"!=typeof x.data&&(x.data=p.param(x.data,x.traditional)),An(Sn,x,d,zt),Y)return zt;for(D in(q=p.event&&x.global)&&0==p.active++&&p.event.trigger("ajaxStart"),x.type=x.type.toUpperCase(),x.hasContent=!Un.test(x.type),y=x.url.replace(Rn,""),x.hasContent?x.data&&x.processData&&0===(x.contentType||"").indexOf("application/x-www-form-urlencoded")&&(x.data=x.data.replace(Tn,"+")):(g=x.url.slice(y.length),x.data&&(x.processData||"string"==typeof x.data)&&(y+=(Cn.test(y)?"&":"?")+x.data,delete x.data),!1===x.cache&&(y=y.replace(Yn,"$1"),g=(Cn.test(y)?"&":"?")+"_="+wn.guid+++g),x.url=y+g),x.ifModified&&(p.lastModified[y]&&zt.setRequestHeader("If-Modified-Since",p.lastModified[y]),p.etag[y]&&zt.setRequestHeader("If-None-Match",p.etag[y])),(x.data&&x.hasContent&&!1!==x.contentType||d.contentType)&&zt.setRequestHeader("Content-Type",x.contentType),zt.setRequestHeader("Accept",x.dataTypes[0]&&x.accepts[x.dataTypes[0]]?x.accepts[x.dataTypes[0]]+("*"!==x.dataTypes[0]?", "+dn+"; q=0.01":""):x.accepts["*"]),x.headers)zt.setRequestHeader(D,x.headers[D]);if(x.beforeSend&&(!1===x.beforeSend.call(A,zt,x)||Y))return zt.abort();if(ee="abort",ht.add(x.complete),zt.done(x.success),zt.fail(x.error),v=An(On,x,d,zt)){if(zt.readyState=1,q&&$.trigger("ajaxSend",[zt,x]),Y)return zt;x.async&&0<x.timeout&&(j=h.setTimeout(function(){zt.abort("timeout")},x.timeout));try{Y=!1,v.send(qt,De)}catch(Zt){if(Y)throw Zt;De(-1,Zt)}}else De(-1,"No Transport");function De(Zt,ue,Ve,Ri){var Ue,Bi,si,Ke,pn,mi=ue;Y||(Y=!0,j&&h.clearTimeout(j),v=void 0,T=Ri||"",zt.readyState=0<Zt?4:0,Ue=200<=Zt&&Zt<300||304===Zt,Ve&&(Ke=function(Oe,vi,_i){for(var ii,te,fe,Ie,ui=Oe.contents,Le=Oe.dataTypes;"*"===Le[0];)Le.shift(),void 0===ii&&(ii=Oe.mimeType||vi.getResponseHeader("Content-Type"));if(ii)for(te in ui)if(ui[te]&&ui[te].test(ii)){Le.unshift(te);break}if(Le[0]in _i)fe=Le[0];else{for(te in _i){if(!Le[0]||Oe.converters[te+" "+Le[0]]){fe=te;break}Ie||(Ie=te)}fe=fe||Ie}if(fe)return fe!==Le[0]&&Le.unshift(fe),_i[fe]}(x,zt,Ve)),!Ue&&-1<p.inArray("script",x.dataTypes)&&p.inArray("json",x.dataTypes)<0&&(x.converters["text script"]=function(){}),Ke=function(Oe,vi,_i,ii){var te,fe,Ie,ui,Le,fi={},jn=Oe.dataTypes.slice();if(jn[1])for(Ie in Oe.converters)fi[Ie.toLowerCase()]=Oe.converters[Ie];for(fe=jn.shift();fe;)if(Oe.responseFields[fe]&&(_i[Oe.responseFields[fe]]=vi),!Le&&ii&&Oe.dataFilter&&(vi=Oe.dataFilter(vi,Oe.dataType)),Le=fe,fe=jn.shift())if("*"===fe)fe=Le;else if("*"!==Le&&Le!==fe){if(!(Ie=fi[Le+" "+fe]||fi["* "+fe]))for(te in fi)if((ui=te.split(" "))[1]===fe&&(Ie=fi[Le+" "+ui[0]]||fi["* "+ui[0]])){!0===Ie?Ie=fi[te]:!0!==fi[te]&&(fe=ui[0],jn.unshift(ui[1]));break}if(!0!==Ie)if(Ie&&Oe.throws)vi=Ie(vi);else try{vi=Ie(vi)}catch(qn){return{state:"parsererror",error:Ie?qn:"No conversion from "+Le+" to "+fe}}}return{state:"success",data:vi}}(x,Ke,zt,Ue),Ue?(x.ifModified&&((pn=zt.getResponseHeader("Last-Modified"))&&(p.lastModified[y]=pn),(pn=zt.getResponseHeader("etag"))&&(p.etag[y]=pn)),204===Zt||"HEAD"===x.type?mi="nocontent":304===Zt?mi="notmodified":(mi=Ke.state,Bi=Ke.data,Ue=!(si=Ke.error))):(si=mi,!Zt&&mi||(mi="error",Zt<0&&(Zt=0))),zt.status=Zt,zt.statusText=(ue||mi)+"",Ue?lt.resolveWith(A,[Bi,mi,zt]):lt.rejectWith(A,[zt,mi,si]),zt.statusCode(Bt),Bt=void 0,q&&$.trigger(Ue?"ajaxSuccess":"ajaxError",[zt,x,Ue?Bi:si]),ht.fireWith(A,[zt,mi]),q&&($.trigger("ajaxComplete",[zt,x]),--p.active||p.event.trigger("ajaxStop")))}return zt},getJSON:function(c,d,v){return p.get(c,d,v,"json")},getScript:function(c,d){return p.get(c,void 0,d,"script")}}),p.each(["get","post"],function(c,d){p[d]=function(v,y,T,k){return w(y)&&(k=k||T,T=y,y=void 0),p.ajax(p.extend({url:v,type:d,dataType:k,data:y,success:T},p.isPlainObject(v)&&v))}}),p.ajaxPrefilter(function(c){var d;for(d in c.headers)"content-type"===d.toLowerCase()&&(c.contentType=c.headers[d]||"")}),p._evalUrl=function(c,d,v){return p.ajax({url:c,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(y){p.globalEval(y,d,v)}})},p.fn.extend({wrapAll:function(c){var d;return this[0]&&(w(c)&&(c=c.call(this[0])),d=p(c,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&d.insertBefore(this[0]),d.map(function(){for(var v=this;v.firstElementChild;)v=v.firstElementChild;return v}).append(this)),this},wrapInner:function(c){return w(c)?this.each(function(d){p(this).wrapInner(c.call(this,d))}):this.each(function(){var d=p(this),v=d.contents();v.length?v.wrapAll(c):d.append(c)})},wrap:function(c){var d=w(c);return this.each(function(v){p(this).wrapAll(d?c.call(this,v):c)})},unwrap:function(c){return this.parent(c).not("body").each(function(){p(this).replaceWith(this.childNodes)}),this}}),p.expr.pseudos.hidden=function(c){return!p.expr.pseudos.visible(c)},p.expr.pseudos.visible=function(c){return!!(c.offsetWidth||c.offsetHeight||c.getClientRects().length)},p.ajaxSettings.xhr=function(){try{return new h.XMLHttpRequest}catch{}};var nr={0:200,1223:204},Ai=p.ajaxSettings.xhr();C.cors=!!Ai&&"withCredentials"in Ai,C.ajax=Ai=!!Ai,p.ajaxTransport(function(c){var d,v;if(C.cors||Ai&&!c.crossDomain)return{send:function(y,T){var k,j=c.xhr();if(j.open(c.type,c.url,c.async,c.username,c.password),c.xhrFields)for(k in c.xhrFields)j[k]=c.xhrFields[k];for(k in c.mimeType&&j.overrideMimeType&&j.overrideMimeType(c.mimeType),c.crossDomain||y["X-Requested-With"]||(y["X-Requested-With"]="XMLHttpRequest"),y)j.setRequestHeader(k,y[k]);d=function(R){return function(){d&&(d=v=j.onload=j.onerror=j.onabort=j.ontimeout=j.onreadystatechange=null,"abort"===R?j.abort():"error"===R?"number"!=typeof j.status?T(0,"error"):T(j.status,j.statusText):T(nr[j.status]||j.status,j.statusText,"text"!==(j.responseType||"text")||"string"!=typeof j.responseText?{binary:j.response}:{text:j.responseText},j.getAllResponseHeaders()))}},j.onload=d(),v=j.onerror=j.ontimeout=d("error"),void 0!==j.onabort?j.onabort=v:j.onreadystatechange=function(){4===j.readyState&&h.setTimeout(function(){d&&v()})},d=d("abort");try{j.send(c.hasContent&&c.data||null)}catch(R){if(d)throw R}},abort:function(){d&&d()}}}),p.ajaxPrefilter(function(c){c.crossDomain&&(c.contents.script=!1)}),p.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(c){return p.globalEval(c),c}}}),p.ajaxPrefilter("script",function(c){void 0===c.cache&&(c.cache=!1),c.crossDomain&&(c.type="GET")}),p.ajaxTransport("script",function(c){var d,v;if(c.crossDomain||c.scriptAttrs)return{send:function(y,T){d=p("<script>").attr(c.scriptAttrs||{}).prop({charset:c.scriptCharset,src:c.url}).on("load error",v=function(k){d.remove(),v=null,k&&T("error"===k.type?404:200,k.type)}),M.head.appendChild(d[0])},abort:function(){v&&v()}}});var kn,Dn=[],Pn=/(=)\?(?=&|$)|\?\?/;p.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var c=Dn.pop()||p.expando+"_"+wn.guid++;return this[c]=!0,c}}),p.ajaxPrefilter("json jsonp",function(c,d,v){var y,T,k,j=!1!==c.jsonp&&(Pn.test(c.url)?"url":"string"==typeof c.data&&0===(c.contentType||"").indexOf("application/x-www-form-urlencoded")&&Pn.test(c.data)&&"data");if(j||"jsonp"===c.dataTypes[0])return y=c.jsonpCallback=w(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback,j?c[j]=c[j].replace(Pn,"$1"+y):!1!==c.jsonp&&(c.url+=(Cn.test(c.url)?"&":"?")+c.jsonp+"="+y),c.converters["script json"]=function(){return k||p.error(y+" was not called"),k[0]},c.dataTypes[0]="json",T=h[y],h[y]=function(){k=arguments},v.always(function(){void 0===T?p(h).removeProp(y):h[y]=T,c[y]&&(c.jsonpCallback=d.jsonpCallback,Dn.push(y)),k&&w(T)&&T(k[0]),k=T=void 0}),"script"}),C.createHTMLDocument=((kn=M.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===kn.childNodes.length),p.parseHTML=function(c,d,v){return"string"!=typeof c?[]:("boolean"==typeof d&&(v=d,d=!1),d||(C.createHTMLDocument?((y=(d=M.implementation.createHTMLDocument("")).createElement("base")).href=M.location.href,d.head.appendChild(y)):d=M),k=!v&&[],(T=z.exec(c))?[d.createElement(T[1])]:(T=J([c],d,k),k&&k.length&&p(k).remove(),p.merge([],T.childNodes)));var y,T,k},p.fn.load=function(c,d,v){var y,T,k,j=this,R=c.indexOf(" ");return-1<R&&(y=Oi(c.slice(R)),c=c.slice(0,R)),w(d)?(v=d,d=void 0):d&&"object"==typeof d&&(T="POST"),0<j.length&&p.ajax({url:c,type:T||"GET",dataType:"html",data:d}).done(function(Y){k=arguments,j.html(y?p("<div>").append(p.parseHTML(Y)).find(y):Y)}).always(v&&function(Y,q){j.each(function(){v.apply(this,k||[Y.responseText,q,Y])})}),this},p.expr.pseudos.animated=function(c){return p.grep(p.timers,function(d){return c===d.elem}).length},p.offset={setOffset:function(c,d,v){var y,T,k,j,R,Y,q=p.css(c,"position"),D=p(c),g={};"static"===q&&(c.style.position="relative"),R=D.offset(),k=p.css(c,"top"),Y=p.css(c,"left"),("absolute"===q||"fixed"===q)&&-1<(k+Y).indexOf("auto")?(j=(y=D.position()).top,T=y.left):(j=parseFloat(k)||0,T=parseFloat(Y)||0),w(d)&&(d=d.call(c,v,p.extend({},R))),null!=d.top&&(g.top=d.top-R.top+j),null!=d.left&&(g.left=d.left-R.left+T),"using"in d?d.using.call(c,g):D.css(g)}},p.fn.extend({offset:function(c){if(arguments.length)return void 0===c?this:this.each(function(T){p.offset.setOffset(this,c,T)});var d,v,y=this[0];return y?y.getClientRects().length?{top:(d=y.getBoundingClientRect()).top+(v=y.ownerDocument.defaultView).pageYOffset,left:d.left+v.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var c,d,v,y=this[0],T={top:0,left:0};if("fixed"===p.css(y,"position"))d=y.getBoundingClientRect();else{for(d=this.offset(),v=y.ownerDocument,c=y.offsetParent||v.documentElement;c&&(c===v.body||c===v.documentElement)&&"static"===p.css(c,"position");)c=c.parentNode;c&&c!==y&&1===c.nodeType&&((T=p(c).offset()).top+=p.css(c,"borderTopWidth",!0),T.left+=p.css(c,"borderLeftWidth",!0))}return{top:d.top-T.top-p.css(y,"marginTop",!0),left:d.left-T.left-p.css(y,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var c=this.offsetParent;c&&"static"===p.css(c,"position");)c=c.offsetParent;return c||Se})}}),p.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(c,d){var v="pageYOffset"===d;p.fn[c]=function(y){return Xt(this,function(T,k,j){var R;if(E(T)?R=T:9===T.nodeType&&(R=T.defaultView),void 0===j)return R?R[d]:T[k];R?R.scrollTo(v?R.pageXOffset:j,v?j:R.pageYOffset):T[k]=j},c,y,arguments.length)}}),p.each(["top","left"],function(c,d){p.cssHooks[d]=ti(C.pixelPosition,function(v,y){if(y)return y=$e(v,d),Ae.test(y)?p(v).position()[d]+"px":y})}),p.each({Height:"height",Width:"width"},function(c,d){p.each({padding:"inner"+c,content:d,"":"outer"+c},function(v,y){p.fn[y]=function(T,k){var j=arguments.length&&(v||"boolean"!=typeof T),R=v||(!0===T||!0===k?"margin":"border");return Xt(this,function(Y,q,D){var g;return E(Y)?0===y.indexOf("outer")?Y["inner"+c]:Y.document.documentElement["client"+c]:9===Y.nodeType?(g=Y.documentElement,Math.max(Y.body["scroll"+c],g["scroll"+c],Y.body["offset"+c],g["offset"+c],g["client"+c])):void 0===D?p.css(Y,q,R):p.style(Y,q,D,R)},d,j?T:void 0,j)}})}),p.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(c,d){p.fn[d]=function(v){return this.on(d,v)}}),p.fn.extend({bind:function(c,d,v){return this.on(c,null,d,v)},unbind:function(c,d){return this.off(c,null,d)},delegate:function(c,d,v,y){return this.on(d,c,v,y)},undelegate:function(c,d,v){return 1===arguments.length?this.off(c,"**"):this.off(d,c||"**",v)},hover:function(c,d){return this.mouseenter(c).mouseleave(d||c)}}),p.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(c,d){p.fn[d]=function(v,y){return 0<arguments.length?this.on(d,null,v,y):this.trigger(d)}});var Gn=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;p.proxy=function(c,d){var v,y,T;if("string"==typeof d&&(v=c[d],d=c,c=v),w(c))return y=t.call(arguments,2),(T=function(){return c.apply(d||this,y.concat(t.call(arguments)))}).guid=c.guid=c.guid||p.guid++,T},p.holdReady=function(c){c?p.readyWait++:p.ready(!0)},p.isArray=Array.isArray,p.parseJSON=JSON.parse,p.nodeName=W,p.isFunction=w,p.isWindow=E,p.camelCase=re,p.type=nt,p.now=Date.now,p.isNumeric=function(c){var d=p.type(c);return("number"===d||"string"===d)&&!isNaN(c-parseFloat(c))},p.trim=function(c){return null==c?"":(c+"").replace(Gn,"")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return p});var sn=h.jQuery,Bn=h.$;return p.noConflict=function(c){return h.$===p&&(h.$=Bn),c&&h.jQuery===p&&(h.jQuery=sn),p},typeof n>"u"&&(h.jQuery=h.$=p),p}),function(h,n){"object"==typeof exports&&typeof module<"u"?module.exports=n():"function"==typeof define&&define.amd?define(n):h.Popper=n()}(this,function(){"use strict";function h(O){return O&&"[object Function]"==={}.toString.call(O)}function n(O,I){if(1!==O.nodeType)return[];var J=O.ownerDocument.defaultView.getComputedStyle(O,null);return I?J[I]:J}function a(O){return"HTML"===O.nodeName?O:O.parentNode||O.host}function l(O){if(!O)return document.body;switch(O.nodeName){case"HTML":case"BODY":return O.ownerDocument.body;case"#document":return O.body}var I=n(O);return/(auto|scroll|overlay)/.test(I.overflow+I.overflowY+I.overflowX)?O:l(a(O))}function t(O){return O&&O.referenceNode?O.referenceNode:O}function e(O){return 11===O?Li:10===O?He:Li||He}function i(O){if(!O)return document.documentElement;for(var I=e(10)?document.body:null,X=O.offsetParent||null;X===I&&O.nextElementSibling;)X=(O=O.nextElementSibling).offsetParent;var J=X&&X.nodeName;return J&&"BODY"!==J&&"HTML"!==J?-1!==["TH","TD","TABLE"].indexOf(X.nodeName)&&"static"===n(X,"position")?i(X):X:O?O.ownerDocument.documentElement:document.documentElement}function r(O){return null===O.parentNode?O:r(O.parentNode)}function o(O,I){if(!(O&&O.nodeType&&I&&I.nodeType))return document.documentElement;var X=O.compareDocumentPosition(I)&Node.DOCUMENT_POSITION_FOLLOWING,J=X?O:I,pt=X?I:O,dt=document.createRange();dt.setStart(J,0),dt.setEnd(pt,0);var ut=dt.commonAncestorContainer;if(O!==ut&&I!==ut||J.contains(pt))return function s(O){var I=O.nodeName;return"BODY"!==I&&("HTML"===I||i(O.firstElementChild)===O)}(ut)?ut:i(ut);var At=r(O);return At.host?o(At.host,I):o(O,r(I).host)}function f(O){var I=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"top",X="top"===I?"scrollTop":"scrollLeft",J=O.nodeName;if("BODY"===J||"HTML"===J){var pt=O.ownerDocument.documentElement,dt=O.ownerDocument.scrollingElement||pt;return dt[X]}return O[X]}function m(O,I){var X=2<arguments.length&&void 0!==arguments[2]&&arguments[2],J=f(I,"top"),pt=f(I,"left"),dt=X?-1:1;return O.top+=J*dt,O.bottom+=J*dt,O.left+=pt*dt,O.right+=pt*dt,O}function b(O,I){var X="x"===I?"Left":"Top",J="Left"==X?"Right":"Bottom";return parseFloat(O["border"+X+"Width"])+parseFloat(O["border"+J+"Width"])}function C(O,I,X,J){return me(I["offset"+O],I["scroll"+O],X["client"+O],X["offset"+O],X["scroll"+O],e(10)?parseInt(X["offset"+O])+parseInt(J["margin"+("Height"===O?"Top":"Left")])+parseInt(J["margin"+("Height"===O?"Bottom":"Right")]):0)}function w(O){var I=O.body,X=O.documentElement,J=e(10)&&getComputedStyle(X);return{height:C("Height",I,X,J),width:C("Width",I,X,J)}}function E(O){return he({},O,{right:O.left+O.width,bottom:O.top+O.height})}function M(O){var I={};try{if(e(10)){I=O.getBoundingClientRect();var X=f(O,"top"),J=f(O,"left");I.top+=X,I.left+=J,I.bottom+=X,I.right+=J}else I=O.getBoundingClientRect()}catch{}var pt={left:I.left,top:I.top,width:I.right-I.left,height:I.bottom-I.top},dt="HTML"===O.nodeName?w(O.ownerDocument):{},kt=O.offsetWidth-(dt.width||O.clientWidth||pt.width),Nt=O.offsetHeight-(dt.height||O.clientHeight||pt.height);if(kt||Nt){var Yt=n(O);kt-=b(Yt,"x"),Nt-=b(Yt,"y"),pt.width-=kt,pt.height-=Nt}return E(pt)}function N(O,I){var X=2<arguments.length&&void 0!==arguments[2]&&arguments[2],J=e(10),pt="HTML"===I.nodeName,dt=M(O),ut=M(I),At=l(O),kt=n(I),Nt=parseFloat(kt.borderTopWidth),Yt=parseFloat(kt.borderLeftWidth);X&&pt&&(ut.top=me(ut.top,0),ut.left=me(ut.left,0));var Mt=E({top:dt.top-ut.top-Nt,left:dt.left-ut.left-Yt,width:dt.width,height:dt.height});if(Mt.marginTop=0,Mt.marginLeft=0,!J&&pt){var Ht=parseFloat(kt.marginTop),Jt=parseFloat(kt.marginLeft);Mt.top-=Nt-Ht,Mt.bottom-=Nt-Ht,Mt.left-=Yt-Jt,Mt.right-=Yt-Jt,Mt.marginTop=Ht,Mt.marginLeft=Jt}return(J&&!X?I.contains(At):I===At&&"BODY"!==At.nodeName)&&(Mt=m(Mt,I)),Mt}function H(O){var I=1<arguments.length&&void 0!==arguments[1]&&arguments[1],X=O.ownerDocument.documentElement,J=N(O,X),pt=me(X.clientWidth,window.innerWidth||0),dt=me(X.clientHeight,window.innerHeight||0),ut=I?0:f(X),At=I?0:f(X,"left"),kt={top:ut-J.top+J.marginTop,left:At-J.left+J.marginLeft,width:pt,height:dt};return E(kt)}function nt(O){var I=O.nodeName;if("BODY"===I||"HTML"===I)return!1;if("fixed"===n(O,"position"))return!0;var X=a(O);return!!X&&nt(X)}function st(O){if(!O||!O.parentElement||e())return document.documentElement;for(var I=O.parentElement;I&&"none"===n(I,"transform");)I=I.parentElement;return I||document.documentElement}function p(O,I,X,J){var pt=4<arguments.length&&void 0!==arguments[4]&&arguments[4],dt={top:0,left:0},ut=pt?st(O):o(O,t(I));if("viewport"===J)dt=H(ut,pt);else{var At;"scrollParent"===J?"BODY"===(At=l(a(I))).nodeName&&(At=O.ownerDocument.documentElement):At="window"===J?O.ownerDocument.documentElement:J;var kt=N(At,ut,pt);if("HTML"!==At.nodeName||nt(ut))dt=kt;else{var Nt=w(O.ownerDocument),Yt=Nt.height,Mt=Nt.width;dt.top+=kt.top-kt.marginTop,dt.bottom=Yt+kt.top,dt.left+=kt.left-kt.marginLeft,dt.right=Mt+kt.left}}var Ht="number"==typeof(X=X||0);return dt.left+=Ht?X:X.left||0,dt.top+=Ht?X:X.top||0,dt.right-=Ht?X:X.right||0,dt.bottom-=Ht?X:X.bottom||0,dt}function F(O){return O.width*O.height}function V(O,I,X,J,pt){var dt=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;if(-1===O.indexOf("auto"))return O;var ut=p(X,J,dt,pt),At={top:{width:ut.width,height:I.top-ut.top},right:{width:ut.right-I.right,height:ut.height},bottom:{width:ut.width,height:ut.bottom-I.bottom},left:{width:I.left-ut.left,height:ut.height}},kt=Object.keys(At).map(function(Ht){return he({key:Ht},At[Ht],{area:F(At[Ht])})}).sort(function(Ht,Jt){return Jt.area-Ht.area}),Nt=kt.filter(function(Ht){return Ht.width>=X.clientWidth&&Ht.height>=X.clientHeight}),Yt=0<Nt.length?Nt[0].key:kt[0].key,Mt=O.split("-")[1];return Yt+(Mt?"-"+Mt:"")}function et(O,I,X){var J=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,pt=J?st(I):o(I,t(X));return N(X,pt,J)}function ot(O){var X=O.ownerDocument.defaultView.getComputedStyle(O),J=parseFloat(X.marginTop||0)+parseFloat(X.marginBottom||0),pt=parseFloat(X.marginLeft||0)+parseFloat(X.marginRight||0);return{width:O.offsetWidth+pt,height:O.offsetHeight+J}}function ct(O){var I={left:"right",right:"left",bottom:"top",top:"bottom"};return O.replace(/left|right|bottom|top/g,function(X){return I[X]})}function W(O,I,X){X=X.split("-")[0];var J=ot(O),pt={width:J.width,height:J.height},dt=-1!==["right","left"].indexOf(X),ut=dt?"top":"left",At=dt?"left":"top",kt=dt?"height":"width",Nt=dt?"width":"height";return pt[ut]=I[ut]+I[kt]/2-J[kt]/2,pt[At]=X===At?I[At]-J[Nt]:I[ct(At)],pt}function z(O,I){return Array.prototype.find?O.find(I):O.filter(I)[0]}function ft(O,I,X){var J=void 0===X?O:O.slice(0,function tt(O,I,X){if(Array.prototype.findIndex)return O.findIndex(function(pt){return pt[I]===X});var J=z(O,function(pt){return pt[I]===X});return O.indexOf(J)}(O,"name",X));return J.forEach(function(pt){pt.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var dt=pt.function||pt.fn;pt.enabled&&h(dt)&&(I.offsets.popper=E(I.offsets.popper),I.offsets.reference=E(I.offsets.reference),I=dt(I,pt))}),I}function at(){if(!this.state.isDestroyed){var O={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};O.offsets.reference=et(this.state,this.popper,this.reference,this.options.positionFixed),O.placement=V(this.options.placement,O.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),O.originalPlacement=O.placement,O.positionFixed=this.options.positionFixed,O.offsets.popper=W(this.popper,O.offsets.reference,O.placement),O.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",O=ft(this.modifiers,O),this.state.isCreated?this.options.onUpdate(O):(this.state.isCreated=!0,this.options.onCreate(O))}}function mt(O,I){return O.some(function(X){return X.enabled&&X.name===I})}function _t(O){for(var I=[!1,"ms","Webkit","Moz","O"],X=O.charAt(0).toUpperCase()+O.slice(1),J=0;J<I.length;J++){var pt=I[J],dt=pt?""+pt+X:O;if(typeof document.body.style[dt]<"u")return dt}return null}function G(){return this.state.isDestroyed=!0,mt(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[_t("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function bt(O){var I=O.ownerDocument;return I?I.defaultView:window}function Ct(O,I,X,J){var pt="BODY"===O.nodeName,dt=pt?O.ownerDocument.defaultView:O;dt.addEventListener(I,X,{passive:!0}),pt||Ct(l(dt.parentNode),I,X,J),J.push(dt)}function Q(O,I,X,J){X.updateBound=J,bt(O).addEventListener("resize",X.updateBound,{passive:!0});var pt=l(O);return Ct(pt,"scroll",X.updateBound,X.scrollParents),X.scrollElement=pt,X.eventsEnabled=!0,X}function St(){this.state.eventsEnabled||(this.state=Q(this.reference,0,this.state,this.scheduleUpdate))}function Lt(){this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=function Tt(O,I){return bt(O).removeEventListener("resize",I.updateBound),I.scrollParents.forEach(function(X){X.removeEventListener("scroll",I.updateBound)}),I.updateBound=null,I.scrollParents=[],I.scrollElement=null,I.eventsEnabled=!1,I}(this.reference,this.state))}function Wt(O){return""!==O&&!isNaN(parseFloat(O))&&isFinite(O)}function Xt(O,I){Object.keys(I).forEach(function(X){var J="";-1!==["width","height","top","right","bottom","left"].indexOf(X)&&Wt(I[X])&&(J="px"),O.style[X]=I[X]+J})}function ne(O,I,X){var J=z(O,function(ut){return ut.name===I}),pt=!!J&&O.some(function(ut){return ut.name===X&&ut.enabled&&ut.order<J.order});if(!pt){var dt="`"+I+"`";console.warn("`"+X+"` modifier is required by "+dt+" modifier in order to work, be sure to include it before "+dt+"!")}return pt}function jt(O){var I=1<arguments.length&&void 0!==arguments[1]&&arguments[1],X=ai.indexOf(O),J=ai.slice(X+1).concat(ai.slice(0,X));return I?J.reverse():J}var qe=Math.min,Je=Math.floor,Ne=Math.round,me=Math.max,_e=typeof window<"u"&&typeof document<"u"&&typeof navigator<"u",Ce=function(){for(var O=["Edge","Trident","Firefox"],I=0;I<O.length;I+=1)if(_e&&0<=navigator.userAgent.indexOf(O[I]))return 1;return 0}(),ri=_e&&window.Promise?function(O){var I=!1;return function(){I||(I=!0,window.Promise.resolve().then(function(){I=!1,O()}))}}:function(O){var I=!1;return function(){I||(I=!0,setTimeout(function(){I=!1,O()},Ce))}},Li=_e&&!(!window.MSInputMethodContext||!document.documentMode),He=_e&&/MSIE 10/.test(navigator.userAgent),oi=function(O,I){if(!(O instanceof I))throw new TypeError("Cannot call a class as a function")},Ci=function(){function O(I,X){for(var J,pt=0;pt<X.length;pt++)(J=X[pt]).enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(I,J.key,J)}return function(I,X,J){return X&&O(I.prototype,X),J&&O(I,J),I}}(),Pe=function(O,I,X){return I in O?Object.defineProperty(O,I,{value:X,enumerable:!0,configurable:!0,writable:!0}):O[I]=X,O},he=Object.assign||function(O){for(var I,X=1;X<arguments.length;X++)for(var J in I=arguments[X])Object.prototype.hasOwnProperty.call(I,J)&&(O[J]=I[J]);return O},We=_e&&/Firefox/i.test(navigator.userAgent),Re=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],ai=Re.slice(3),ae=function(){function O(I,X){var J=this,pt=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};oi(this,O),this.scheduleUpdate=function(){return requestAnimationFrame(J.update)},this.update=ri(this.update.bind(this)),this.options=he({},O.Defaults,pt),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=I&&I.jquery?I[0]:I,this.popper=X&&X.jquery?X[0]:X,this.options.modifiers={},Object.keys(he({},O.Defaults.modifiers,pt.modifiers)).forEach(function(ut){J.options.modifiers[ut]=he({},O.Defaults.modifiers[ut]||{},pt.modifiers?pt.modifiers[ut]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(ut){return he({name:ut},J.options.modifiers[ut])}).sort(function(ut,At){return ut.order-At.order}),this.modifiers.forEach(function(ut){ut.enabled&&h(ut.onLoad)&&ut.onLoad(J.reference,J.popper,J.options,ut,J.state)}),this.update();var dt=this.options.eventsEnabled;dt&&this.enableEventListeners(),this.state.eventsEnabled=dt}return Ci(O,[{key:"update",value:function(){return at.call(this)}},{key:"destroy",value:function(){return G.call(this)}},{key:"enableEventListeners",value:function(){return St.call(this)}},{key:"disableEventListeners",value:function(){return Lt.call(this)}}]),O}();return ae.Utils=(typeof window>"u"?global:window).PopperUtils,ae.placements=Re,ae.Defaults={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(O){var I=O.placement,X=I.split("-")[0],J=I.split("-")[1];if(J){var pt=O.offsets,dt=pt.reference,ut=pt.popper,At=-1!==["bottom","top"].indexOf(X),kt=At?"left":"top",Nt=At?"width":"height",Yt={start:Pe({},kt,dt[kt]),end:Pe({},kt,dt[kt]+dt[Nt]-ut[Nt])};O.offsets.popper=he({},ut,Yt[J])}return O}},offset:{order:200,enabled:!0,fn:function Rt(O,I){var X,J=I.offset,dt=O.offsets,ut=dt.popper,At=dt.reference,kt=O.placement.split("-")[0];return X=Wt(+J)?[+J,0]:function Ft(O,I,X,J){var pt=[0,0],dt=-1!==["right","left"].indexOf(J),ut=O.split(/(\+|\-)/).map(function(Yt){return Yt.trim()}),At=ut.indexOf(z(ut,function(Yt){return-1!==Yt.search(/,|\s/)}));ut[At]&&-1===ut[At].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var kt=/\s*,\s*|\s+/,Nt=-1===At?[ut]:[ut.slice(0,At).concat([ut[At].split(kt)[0]]),[ut[At].split(kt)[1]].concat(ut.slice(At+1))];return Nt=Nt.map(function(Yt,Mt){var Ht=(1===Mt?!dt:dt)?"height":"width",Jt=!1;return Yt.reduce(function(se,Xe){return""===se[se.length-1]&&-1!==["+","-"].indexOf(Xe)?(se[se.length-1]=Xe,Jt=!0,se):Jt?(se[se.length-1]+=Xe,Jt=!1,se):se.concat(Xe)},[]).map(function(se){return function Fe(O,I,X,J){var pt=O.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),dt=+pt[1],ut=pt[2];return dt?0===ut.indexOf("%")?E("%p"===ut?X:J)[I]/100*dt:"vh"===ut||"vw"===ut?("vh"===ut?me(document.documentElement.clientHeight,window.innerHeight||0):me(document.documentElement.clientWidth,window.innerWidth||0))/100*dt:dt:O}(se,Ht,I,X)})}),Nt.forEach(function(Yt,Mt){Yt.forEach(function(Ht,Jt){Wt(Ht)&&(pt[Mt]+=Ht*("-"===Yt[Jt-1]?-1:1))})}),pt}(J,ut,At,kt),"left"===kt?(ut.top+=X[0],ut.left-=X[1]):"right"===kt?(ut.top+=X[0],ut.left+=X[1]):"top"===kt?(ut.left+=X[0],ut.top-=X[1]):"bottom"===kt&&(ut.left+=X[0],ut.top+=X[1]),O.popper=ut,O},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(O,I){var X=I.boundariesElement||i(O.instance.popper);O.instance.reference===X&&(X=i(X));var J=_t("transform"),pt=O.instance.popper.style,dt=pt.top,ut=pt.left,At=pt[J];pt.top="",pt.left="",pt[J]="";var kt=p(O.instance.popper,O.instance.reference,I.padding,X,O.positionFixed);pt.top=dt,pt.left=ut,pt[J]=At,I.boundaries=kt;var Yt=O.offsets.popper,Mt={primary:function(Ht){var Jt=Yt[Ht];return Yt[Ht]<kt[Ht]&&!I.escapeWithReference&&(Jt=me(Yt[Ht],kt[Ht])),Pe({},Ht,Jt)},secondary:function(Ht){var Jt="right"===Ht?"left":"top",se=Yt[Jt];return Yt[Ht]>kt[Ht]&&!I.escapeWithReference&&(se=qe(Yt[Jt],kt[Ht]-("right"===Ht?Yt.width:Yt.height))),Pe({},Jt,se)}};return I.priority.forEach(function(Ht){var Jt=-1===["left","top"].indexOf(Ht)?"secondary":"primary";Yt=he({},Yt,Mt[Jt](Ht))}),O.offsets.popper=Yt,O},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(O){var I=O.offsets,X=I.popper,J=I.reference,pt=O.placement.split("-")[0],dt=Je,ut=-1!==["top","bottom"].indexOf(pt),At=ut?"right":"bottom",kt=ut?"left":"top",Nt=ut?"width":"height";return X[At]<dt(J[kt])&&(O.offsets.popper[kt]=dt(J[kt])-X[Nt]),X[kt]>dt(J[At])&&(O.offsets.popper[kt]=dt(J[At])),O}},arrow:{order:500,enabled:!0,fn:function(O,I){var X;if(!ne(O.instance.modifiers,"arrow","keepTogether"))return O;var J=I.element;if("string"==typeof J){if(!(J=O.instance.popper.querySelector(J)))return O}else if(!O.instance.popper.contains(J))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),O;var pt=O.placement.split("-")[0],dt=O.offsets,ut=dt.popper,At=dt.reference,kt=-1!==["left","right"].indexOf(pt),Nt=kt?"height":"width",Yt=kt?"Top":"Left",Mt=Yt.toLowerCase(),Ht=kt?"left":"top",Jt=kt?"bottom":"right",se=ot(J)[Nt];At[Jt]-se<ut[Mt]&&(O.offsets.popper[Mt]-=ut[Mt]-(At[Jt]-se)),At[Mt]+se>ut[Jt]&&(O.offsets.popper[Mt]+=At[Mt]+se-ut[Jt]),O.offsets.popper=E(O.offsets.popper);var Xe=At[Mt]+At[Nt]/2-se/2,li=n(O.instance.popper),Ze=parseFloat(li["margin"+Yt]),Ye=parseFloat(li["border"+Yt+"Width"]),Ae=Xe-O.offsets.popper[Mt]-Ze-Ye;return Ae=me(qe(ut[Nt]-se,Ae),0),O.arrowElement=J,O.offsets.arrow=(Pe(X={},Mt,Ne(Ae)),Pe(X,Ht,""),X),O},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(O,I){if(mt(O.instance.modifiers,"inner")||O.flipped&&O.placement===O.originalPlacement)return O;var X=p(O.instance.popper,O.instance.reference,I.padding,I.boundariesElement,O.positionFixed),J=O.placement.split("-")[0],pt=ct(J),dt=O.placement.split("-")[1]||"",ut=[];switch(I.behavior){case"flip":ut=[J,pt];break;case"clockwise":ut=jt(J);break;case"counterclockwise":ut=jt(J,!0);break;default:ut=I.behavior}return ut.forEach(function(At,kt){if(J!==At||ut.length===kt+1)return O;J=O.placement.split("-")[0],pt=ct(J);var Nt=O.offsets.popper,Yt=O.offsets.reference,Mt=Je,Ht="left"===J&&Mt(Nt.right)>Mt(Yt.left)||"right"===J&&Mt(Nt.left)<Mt(Yt.right)||"top"===J&&Mt(Nt.bottom)>Mt(Yt.top)||"bottom"===J&&Mt(Nt.top)<Mt(Yt.bottom),Jt=Mt(Nt.left)<Mt(X.left),se=Mt(Nt.right)>Mt(X.right),Xe=Mt(Nt.top)<Mt(X.top),li=Mt(Nt.bottom)>Mt(X.bottom),Ze="left"===J&&Jt||"right"===J&&se||"top"===J&&Xe||"bottom"===J&&li,Ye=-1!==["top","bottom"].indexOf(J),Hi=!!I.flipVariations&&(Ye&&"start"===dt&&Jt||Ye&&"end"===dt&&se||!Ye&&"start"===dt&&Xe||!Ye&&"end"===dt&&li)||!!I.flipVariationsByContent&&(Ye&&"start"===dt&&se||Ye&&"end"===dt&&Jt||!Ye&&"start"===dt&&li||!Ye&&"end"===dt&&Xe);(Ht||Ze||Hi)&&(O.flipped=!0,(Ht||Ze)&&(J=ut[kt+1]),Hi&&(dt=function re(O){return"end"===O?"start":"start"===O?"end":O}(dt)),O.placement=J+(dt?"-"+dt:""),O.offsets.popper=he({},O.offsets.popper,W(O.instance.popper,O.offsets.reference,O.placement)),O=ft(O.instance.modifiers,O,"flip"))}),O},behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:function(O){var I=O.placement,X=I.split("-")[0],J=O.offsets,pt=J.popper,dt=J.reference,ut=-1!==["left","right"].indexOf(X),At=-1===["top","left"].indexOf(X);return pt[ut?"left":"top"]=dt[X]-(At?pt[ut?"width":"height"]:0),O.placement=ct(I),O.offsets.popper=E(pt),O}},hide:{order:800,enabled:!0,fn:function(O){if(!ne(O.instance.modifiers,"hide","preventOverflow"))return O;var I=O.offsets.reference,X=z(O.instance.modifiers,function(J){return"preventOverflow"===J.name}).boundaries;if(I.bottom<X.top||I.left>X.right||I.top>X.bottom||I.right<X.left){if(!0===O.hide)return O;O.hide=!0,O.attributes["x-out-of-boundaries"]=""}else{if(!1===O.hide)return O;O.hide=!1,O.attributes["x-out-of-boundaries"]=!1}return O}},computeStyle:{order:850,enabled:!0,fn:function(O,I){var X=I.x,J=I.y,pt=O.offsets.popper,dt=z(O.instance.modifiers,function(Ae){return"applyStyle"===Ae.name}).gpuAcceleration;void 0!==dt&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var ut,At,kt=void 0===dt?I.gpuAcceleration:dt,Nt=i(O.instance.popper),Yt=M(Nt),Mt={position:pt.position},Ht=function ve(O,I){var X=O.offsets,J=X.popper,dt=Ne,ut=function(Jt){return Jt},At=dt(X.reference.width),kt=dt(J.width),Nt=-1!==["left","right"].indexOf(O.placement),Yt=-1!==O.placement.indexOf("-"),Mt=I?Nt||Yt||At%2==kt%2?dt:Je:ut,Ht=I?dt:ut;return{left:Mt(At%2==1&&kt%2==1&&!Yt&&I?J.left-1:J.left),top:Ht(J.top),bottom:Ht(J.bottom),right:Mt(J.right)}}(O,2>window.devicePixelRatio||!We),Jt="bottom"===X?"top":"bottom",se="right"===J?"left":"right",Xe=_t("transform");if(At="bottom"==Jt?"HTML"===Nt.nodeName?-Nt.clientHeight+Ht.bottom:-Yt.height+Ht.bottom:Ht.top,ut="right"==se?"HTML"===Nt.nodeName?-Nt.clientWidth+Ht.right:-Yt.width+Ht.right:Ht.left,kt&&Xe)Mt[Xe]="translate3d("+ut+"px, "+At+"px, 0)",Mt[Jt]=0,Mt[se]=0,Mt.willChange="transform";else{var Ze="right"==se?-1:1;Mt[Jt]=At*("bottom"==Jt?-1:1),Mt[se]=ut*Ze,Mt.willChange=Jt+", "+se}return O.attributes=he({},{"x-placement":O.placement},O.attributes),O.styles=he({},Mt,O.styles),O.arrowStyles=he({},O.offsets.arrow,O.arrowStyles),O},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(O){return Xt(O.instance.popper,O.styles),function we(O,I){Object.keys(I).forEach(function(X){!1===I[X]?O.removeAttribute(X):O.setAttribute(X,I[X])})}(O.instance.popper,O.attributes),O.arrowElement&&Object.keys(O.arrowStyles).length&&Xt(O.arrowElement,O.arrowStyles),O},onLoad:function(O,I,X,J,pt){var dt=et(pt,I,O,X.positionFixed),ut=V(X.placement,dt,I,O,X.modifiers.flip.boundariesElement,X.modifiers.flip.padding);return I.setAttribute("x-placement",ut),Xt(I,{position:X.positionFixed?"fixed":"absolute"}),X},gpuAcceleration:void 0}}},ae}),function(h,n){"object"==typeof exports&&typeof module<"u"?module.exports=n(require("@popperjs/core")):"function"==typeof define&&define.amd?define(["@popperjs/core"],n):(h=typeof globalThis<"u"?globalThis:h||self).bootstrap=n(h.Popper)}(this,function(h){"use strict";const a=function n(D){if(D&&D.__esModule)return D;const g=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(D)for(const x in D)if("default"!==x){const A=Object.getOwnPropertyDescriptor(D,x);Object.defineProperty(g,x,A.get?A:{enumerable:!0,get:()=>D[x]})}return g.default=D,Object.freeze(g)}(h),l="transitionend",t=D=>{let g=D.getAttribute("data-bs-target");if(!g||"#"===g){let x=D.getAttribute("href");if(!x||!x.includes("#")&&!x.startsWith("."))return null;x.includes("#")&&!x.startsWith("#")&&(x=`#${x.split("#")[1]}`),g=x&&"#"!==x?x.trim():null}return g},e=D=>{const g=t(D);return g&&document.querySelector(g)?g:null},i=D=>{const g=t(D);return g?document.querySelector(g):null},s=D=>{D.dispatchEvent(new Event(l))},r=D=>!(!D||"object"!=typeof D)&&(void 0!==D.jquery&&(D=D[0]),void 0!==D.nodeType),o=D=>r(D)?D.jquery?D[0]:D:"string"==typeof D&&D.length>0?document.querySelector(D):null,f=D=>{if(!r(D)||0===D.getClientRects().length)return!1;const g="visible"===getComputedStyle(D).getPropertyValue("visibility"),x=D.closest("details:not([open])");if(!x)return g;if(x!==D){const A=D.closest("summary");if(A&&A.parentNode!==x||null===A)return!1}return g},m=D=>!D||D.nodeType!==Node.ELEMENT_NODE||!!D.classList.contains("disabled")||(void 0!==D.disabled?D.disabled:D.hasAttribute("disabled")&&"false"!==D.getAttribute("disabled")),b=D=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof D.getRootNode){const g=D.getRootNode();return g instanceof ShadowRoot?g:null}return D instanceof ShadowRoot?D:D.parentNode?b(D.parentNode):null},C=()=>{},E=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,M=[],N=()=>"rtl"===document.documentElement.dir,H=D=>{var g;g=()=>{const x=E();if(x){const A=D.NAME,$=x.fn[A];x.fn[A]=D.jQueryInterface,x.fn[A].Constructor=D,x.fn[A].noConflict=()=>(x.fn[A]=$,D.jQueryInterface)}},"loading"===document.readyState?(M.length||document.addEventListener("DOMContentLoaded",()=>{for(const x of M)x()}),M.push(g)):g()},nt=D=>{"function"==typeof D&&D()},st=(D,g,x=!0)=>{if(!x)return void nt(D);const A=(ht=>{if(!ht)return 0;let{transitionDuration:Bt,transitionDelay:qt}=window.getComputedStyle(ht);const pe=Number.parseFloat(Bt),ee=Number.parseFloat(qt);return pe||ee?(Bt=Bt.split(",")[0],qt=qt.split(",")[0],1e3*(Number.parseFloat(Bt)+Number.parseFloat(qt))):0})(g)+5;let $=!1;const lt=({target:ht})=>{ht===g&&($=!0,g.removeEventListener(l,lt),nt(D))};g.addEventListener(l,lt),setTimeout(()=>{$||s(g)},A)},p=(D,g,x,A)=>{const $=D.length;let lt=D.indexOf(g);return-1===lt?!x&&A?D[$-1]:D[0]:(lt+=x?1:-1,A&&(lt=(lt+$)%$),D[Math.max(0,Math.min(lt,$-1))])},F=/[^.]*(?=\..*)\.|.*/,V=/\..*/,et=/::\d+$/,ot={};let ct=1;const W={mouseenter:"mouseover",mouseleave:"mouseout"},z=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function tt(D,g){return g&&`${g}::${ct++}`||D.uidEvent||ct++}function ft(D){const g=tt(D);return D.uidEvent=g,ot[g]=ot[g]||{},ot[g]}function at(D,g,x=null){return Object.values(D).find(A=>A.callable===g&&A.delegationSelector===x)}function mt(D,g,x){const A="string"==typeof g,$=A?x:g||x;let lt=Ct(D);return z.has(lt)||(lt=D),[A,$,lt]}function _t(D,g,x,A,$){if("string"!=typeof g||!D)return;let[lt,ht,Bt]=mt(g,x,A);var ue;g in W&&(ue=ht,ht=function(Ve){if(!Ve.relatedTarget||Ve.relatedTarget!==Ve.delegateTarget&&!Ve.delegateTarget.contains(Ve.relatedTarget))return ue.call(this,Ve)});const qt=ft(D),pe=qt[Bt]||(qt[Bt]={}),ee=at(pe,ht,lt?x:null);if(ee)return void(ee.oneOff=ee.oneOff&&$);const zt=tt(ht,g.replace(F,"")),De=lt?function(Zt,ue,Ve){return function Ri(Ue){const Bi=Zt.querySelectorAll(ue);for(let{target:si}=Ue;si&&si!==this;si=si.parentNode)for(const Ke of Bi)if(Ke===si)return St(Ue,{delegateTarget:si}),Ri.oneOff&&Q.off(Zt,Ue.type,ue,Ve),Ve.apply(si,[Ue])}}(D,x,ht):function(Zt,ue){return function Ve(Ri){return St(Ri,{delegateTarget:Zt}),Ve.oneOff&&Q.off(Zt,Ri.type,ue),ue.apply(Zt,[Ri])}}(D,ht);De.delegationSelector=lt?x:null,De.callable=ht,De.oneOff=$,De.uidEvent=zt,pe[zt]=De,D.addEventListener(Bt,De,lt)}function G(D,g,x,A,$){const lt=at(g[x],A,$);lt&&(D.removeEventListener(x,lt,Boolean($)),delete g[x][lt.uidEvent])}function bt(D,g,x,A){const $=g[x]||{};for(const lt of Object.keys($))if(lt.includes(A)){const ht=$[lt];G(D,g,x,ht.callable,ht.delegationSelector)}}function Ct(D){return D=D.replace(V,""),W[D]||D}const Q={on(D,g,x,A){_t(D,g,x,A,!1)},one(D,g,x,A){_t(D,g,x,A,!0)},off(D,g,x,A){if("string"!=typeof g||!D)return;const[$,lt,ht]=mt(g,x,A),Bt=ht!==g,qt=ft(D),pe=qt[ht]||{},ee=g.startsWith(".");if(void 0===lt){if(ee)for(const zt of Object.keys(qt))bt(D,qt,zt,g.slice(1));for(const zt of Object.keys(pe)){const De=zt.replace(et,"");if(!Bt||g.includes(De)){const Zt=pe[zt];G(D,qt,ht,Zt.callable,Zt.delegationSelector)}}}else{if(!Object.keys(pe).length)return;G(D,qt,ht,lt,$?x:null)}},trigger(D,g,x){if("string"!=typeof g||!D)return null;const A=E();let $=null,lt=!0,ht=!0,Bt=!1;g!==Ct(g)&&A&&($=A.Event(g,x),A(D).trigger($),lt=!$.isPropagationStopped(),ht=!$.isImmediatePropagationStopped(),Bt=$.isDefaultPrevented());let qt=new Event(g,{bubbles:lt,cancelable:!0});return qt=St(qt,x),Bt&&qt.preventDefault(),ht&&D.dispatchEvent(qt),qt.defaultPrevented&&$&&$.preventDefault(),qt}};function St(D,g){for(const[x,A]of Object.entries(g||{}))try{D[x]=A}catch{Object.defineProperty(D,x,{configurable:!0,get:()=>A})}return D}const Tt=new Map,Lt={set(D,g,x){Tt.has(D)||Tt.set(D,new Map);const A=Tt.get(D);A.has(g)||0===A.size?A.set(g,x):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(A.keys())[0]}.`)},get:(D,g)=>Tt.has(D)&&Tt.get(D).get(g)||null,remove(D,g){if(!Tt.has(D))return;const x=Tt.get(D);x.delete(g),0===x.size&&Tt.delete(D)}};function Wt(D){if("true"===D)return!0;if("false"===D)return!1;if(D===Number(D).toString())return Number(D);if(""===D||"null"===D)return null;if("string"!=typeof D)return D;try{return JSON.parse(decodeURIComponent(D))}catch{return D}}function Xt(D){return D.replace(/[A-Z]/g,g=>`-${g.toLowerCase()}`)}const we={setDataAttribute(D,g,x){D.setAttribute(`data-bs-${Xt(g)}`,x)},removeDataAttribute(D,g){D.removeAttribute(`data-bs-${Xt(g)}`)},getDataAttributes(D){if(!D)return{};const g={},x=Object.keys(D.dataset).filter(A=>A.startsWith("bs")&&!A.startsWith("bsConfig"));for(const A of x){let $=A.replace(/^bs/,"");$=$.charAt(0).toLowerCase()+$.slice(1,$.length),g[$]=Wt(D.dataset[A])}return g},getDataAttribute:(D,g)=>Wt(D.getAttribute(`data-bs-${Xt(g)}`))};class ve{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(g){return g=this._mergeConfigObj(g),g=this._configAfterMerge(g),this._typeCheckConfig(g),g}_configAfterMerge(g){return g}_mergeConfigObj(g,x){const A=r(x)?we.getDataAttribute(x,"config"):{};return{...this.constructor.Default,..."object"==typeof A?A:{},...r(x)?we.getDataAttributes(x):{},..."object"==typeof g?g:{}}}_typeCheckConfig(g,x=this.constructor.DefaultType){for(const $ of Object.keys(x)){const lt=x[$],ht=g[$],Bt=r(ht)?"element":null==(A=ht)?`${A}`:Object.prototype.toString.call(A).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(lt).test(Bt))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${$}" provided type "${Bt}" but expected type "${lt}".`)}var A}}class ne extends ve{constructor(g,x){super(),(g=o(g))&&(this._element=g,this._config=this._getConfig(x),Lt.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Lt.remove(this._element,this.constructor.DATA_KEY),Q.off(this._element,this.constructor.EVENT_KEY);for(const g of Object.getOwnPropertyNames(this))this[g]=null}_queueCallback(g,x,A=!0){st(g,x,A)}_getConfig(g){return g=this._mergeConfigObj(g,this._element),g=this._configAfterMerge(g),this._typeCheckConfig(g),g}static getInstance(g){return Lt.get(o(g),this.DATA_KEY)}static getOrCreateInstance(g,x={}){return this.getInstance(g)||new this(g,"object"==typeof x?x:null)}static get VERSION(){return"5.2.0"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(g){return`${g}${this.EVENT_KEY}`}}const re=(D,g="hide")=>{const A=D.NAME;Q.on(document,`click.dismiss${D.EVENT_KEY}`,`[data-bs-dismiss="${A}"]`,function($){if(["A","AREA"].includes(this.tagName)&&$.preventDefault(),m(this))return;const lt=i(this)||this.closest(`.${A}`);D.getOrCreateInstance(lt)[g]()})};class jt extends ne{static get NAME(){return"alert"}close(){if(Q.trigger(this._element,"close.bs.alert").defaultPrevented)return;this._element.classList.remove("show");const g=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,g)}_destroyElement(){this._element.remove(),Q.trigger(this._element,"closed.bs.alert"),this.dispose()}static jQueryInterface(g){return this.each(function(){const x=jt.getOrCreateInstance(this);if("string"==typeof g){if(void 0===x[g]||g.startsWith("_")||"constructor"===g)throw new TypeError(`No method named "${g}"`);x[g](this)}})}}re(jt,"close"),H(jt);const Fe='[data-bs-toggle="button"]';class Ft extends ne{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(g){return this.each(function(){const x=Ft.getOrCreateInstance(this);"toggle"===g&&x[g]()})}}Q.on(document,"click.bs.button.data-api",Fe,D=>{D.preventDefault();const g=D.target.closest(Fe);Ft.getOrCreateInstance(g).toggle()}),H(Ft);const Rt={find:(D,g=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(g,D)),findOne:(D,g=document.documentElement)=>Element.prototype.querySelector.call(g,D),children:(D,g)=>[].concat(...D.children).filter(x=>x.matches(g)),parents(D,g){const x=[];let A=D.parentNode.closest(g);for(;A;)x.push(A),A=A.parentNode.closest(g);return x},prev(D,g){let x=D.previousElementSibling;for(;x;){if(x.matches(g))return[x];x=x.previousElementSibling}return[]},next(D,g){let x=D.nextElementSibling;for(;x;){if(x.matches(g))return[x];x=x.nextElementSibling}return[]},focusableChildren(D){const g=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(x=>`${x}:not([tabindex^="-"])`).join(",");return this.find(g,D).filter(x=>!m(x)&&f(x))}},qe={endCallback:null,leftCallback:null,rightCallback:null},Je={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Ne extends ve{constructor(g,x){super(),this._element=g,g&&Ne.isSupported()&&(this._config=this._getConfig(x),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return qe}static get DefaultType(){return Je}static get NAME(){return"swipe"}dispose(){Q.off(this._element,".bs.swipe")}_start(g){this._supportPointerEvents?this._eventIsPointerPenTouch(g)&&(this._deltaX=g.clientX):this._deltaX=g.touches[0].clientX}_end(g){this._eventIsPointerPenTouch(g)&&(this._deltaX=g.clientX-this._deltaX),this._handleSwipe(),nt(this._config.endCallback)}_move(g){this._deltaX=g.touches&&g.touches.length>1?0:g.touches[0].clientX-this._deltaX}_handleSwipe(){const g=Math.abs(this._deltaX);if(g<=40)return;const x=g/this._deltaX;this._deltaX=0,x&&nt(x>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(Q.on(this._element,"pointerdown.bs.swipe",g=>this._start(g)),Q.on(this._element,"pointerup.bs.swipe",g=>this._end(g)),this._element.classList.add("pointer-event")):(Q.on(this._element,"touchstart.bs.swipe",g=>this._start(g)),Q.on(this._element,"touchmove.bs.swipe",g=>this._move(g)),Q.on(this._element,"touchend.bs.swipe",g=>this._end(g)))}_eventIsPointerPenTouch(g){return this._supportPointerEvents&&("pen"===g.pointerType||"touch"===g.pointerType)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const me="next",_e="prev",Ce="left",Se="right",ri="slid.bs.carousel",Li="carousel",He="active",oi={ArrowLeft:Se,ArrowRight:Ce},Ci={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Pe={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class he extends ne{constructor(g,x){super(g,x),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Rt.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===Li&&this.cycle()}static get Default(){return Ci}static get DefaultType(){return Pe}static get NAME(){return"carousel"}next(){this._slide(me)}nextWhenVisible(){!document.hidden&&f(this._element)&&this.next()}prev(){this._slide(_e)}pause(){this._isSliding&&s(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?Q.one(this._element,ri,()=>this.cycle()):this.cycle())}to(g){const x=this._getItems();if(g>x.length-1||g<0)return;if(this._isSliding)return void Q.one(this._element,ri,()=>this.to(g));const A=this._getItemIndex(this._getActive());A!==g&&this._slide(g>A?me:_e,x[g])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(g){return g.defaultInterval=g.interval,g}_addEventListeners(){this._config.keyboard&&Q.on(this._element,"keydown.bs.carousel",g=>this._keydown(g)),"hover"===this._config.pause&&(Q.on(this._element,"mouseenter.bs.carousel",()=>this.pause()),Q.on(this._element,"mouseleave.bs.carousel",()=>this._maybeEnableCycle())),this._config.touch&&Ne.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const x of Rt.find(".carousel-item img",this._element))Q.on(x,"dragstart.bs.carousel",A=>A.preventDefault());this._swipeHelper=new Ne(this._element,{leftCallback:()=>this._slide(this._directionToOrder(Ce)),rightCallback:()=>this._slide(this._directionToOrder(Se)),endCallback:()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}})}_keydown(g){if(/input|textarea/i.test(g.target.tagName))return;const x=oi[g.key];x&&(g.preventDefault(),this._slide(this._directionToOrder(x)))}_getItemIndex(g){return this._getItems().indexOf(g)}_setActiveIndicatorElement(g){if(!this._indicatorsElement)return;const x=Rt.findOne(".active",this._indicatorsElement);x.classList.remove(He),x.removeAttribute("aria-current");const A=Rt.findOne(`[data-bs-slide-to="${g}"]`,this._indicatorsElement);A&&(A.classList.add(He),A.setAttribute("aria-current","true"))}_updateInterval(){const g=this._activeElement||this._getActive();if(!g)return;const x=Number.parseInt(g.getAttribute("data-bs-interval"),10);this._config.interval=x||this._config.defaultInterval}_slide(g,x=null){if(this._isSliding)return;const A=this._getActive(),$=g===me,lt=x||p(this._getItems(),A,$,this._config.wrap);if(lt===A)return;const ht=this._getItemIndex(lt),Bt=zt=>Q.trigger(this._element,zt,{relatedTarget:lt,direction:this._orderToDirection(g),from:this._getItemIndex(A),to:ht});if(Bt("slide.bs.carousel").defaultPrevented||!A||!lt)return;const qt=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(ht),this._activeElement=lt;const pe=$?"carousel-item-start":"carousel-item-end",ee=$?"carousel-item-next":"carousel-item-prev";lt.classList.add(ee),A.classList.add(pe),lt.classList.add(pe),this._queueCallback(()=>{lt.classList.remove(pe,ee),lt.classList.add(He),A.classList.remove(He,ee,pe),this._isSliding=!1,Bt(ri)},A,this._isAnimated()),qt&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return Rt.findOne(".active.carousel-item",this._element)}_getItems(){return Rt.find(".carousel-item",this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(g){return N()?g===Ce?_e:me:g===Ce?me:_e}_orderToDirection(g){return N()?g===_e?Ce:Se:g===_e?Se:Ce}static jQueryInterface(g){return this.each(function(){const x=he.getOrCreateInstance(this,g);if("number"!=typeof g){if("string"==typeof g){if(void 0===x[g]||g.startsWith("_")||"constructor"===g)throw new TypeError(`No method named "${g}"`);x[g]()}}else x.to(g)})}}Q.on(document,"click.bs.carousel.data-api","[data-bs-slide], [data-bs-slide-to]",function(D){const g=i(this);if(!g||!g.classList.contains(Li))return;D.preventDefault();const x=he.getOrCreateInstance(g),A=this.getAttribute("data-bs-slide-to");return A?(x.to(A),void x._maybeEnableCycle()):"next"===we.getDataAttribute(this,"slide")?(x.next(),void x._maybeEnableCycle()):(x.prev(),void x._maybeEnableCycle())}),Q.on(window,"load.bs.carousel.data-api",()=>{const D=Rt.find('[data-bs-ride="carousel"]');for(const g of D)he.getOrCreateInstance(g)}),H(he);const We="show",Re="collapse",ai="collapsing",ze='[data-bs-toggle="collapse"]',ae={parent:null,toggle:!0},O={parent:"(null|element)",toggle:"boolean"};class I extends ne{constructor(g,x){super(g,x),this._isTransitioning=!1,this._triggerArray=[];const A=Rt.find(ze);for(const $ of A){const lt=e($),ht=Rt.find(lt).filter(Bt=>Bt===this._element);null!==lt&&ht.length&&this._triggerArray.push($)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return ae}static get DefaultType(){return O}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let g=[];if(this._config.parent&&(g=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter($=>$!==this._element).map($=>I.getOrCreateInstance($,{toggle:!1}))),g.length&&g[0]._isTransitioning||Q.trigger(this._element,"show.bs.collapse").defaultPrevented)return;for(const $ of g)$.hide();const x=this._getDimension();this._element.classList.remove(Re),this._element.classList.add(ai),this._element.style[x]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const A=`scroll${x[0].toUpperCase()+x.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(ai),this._element.classList.add(Re,We),this._element.style[x]="",Q.trigger(this._element,"shown.bs.collapse")},this._element,!0),this._element.style[x]=`${this._element[A]}px`}hide(){if(this._isTransitioning||!this._isShown()||Q.trigger(this._element,"hide.bs.collapse").defaultPrevented)return;const g=this._getDimension();this._element.style[g]=`${this._element.getBoundingClientRect()[g]}px`,this._element.classList.add(ai),this._element.classList.remove(Re,We);for(const x of this._triggerArray){const A=i(x);A&&!this._isShown(A)&&this._addAriaAndCollapsedClass([x],!1)}this._isTransitioning=!0,this._element.style[g]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(ai),this._element.classList.add(Re),Q.trigger(this._element,"hidden.bs.collapse")},this._element,!0)}_isShown(g=this._element){return g.classList.contains(We)}_configAfterMerge(g){return g.toggle=Boolean(g.toggle),g.parent=o(g.parent),g}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const g=this._getFirstLevelChildren(ze);for(const x of g){const A=i(x);A&&this._addAriaAndCollapsedClass([x],this._isShown(A))}}_getFirstLevelChildren(g){const x=Rt.find(":scope .collapse .collapse",this._config.parent);return Rt.find(g,this._config.parent).filter(A=>!x.includes(A))}_addAriaAndCollapsedClass(g,x){if(g.length)for(const A of g)A.classList.toggle("collapsed",!x),A.setAttribute("aria-expanded",x)}static jQueryInterface(g){const x={};return"string"==typeof g&&/show|hide/.test(g)&&(x.toggle=!1),this.each(function(){const A=I.getOrCreateInstance(this,x);if("string"==typeof g){if(void 0===A[g])throw new TypeError(`No method named "${g}"`);A[g]()}})}}Q.on(document,"click.bs.collapse.data-api",ze,function(D){("A"===D.target.tagName||D.delegateTarget&&"A"===D.delegateTarget.tagName)&&D.preventDefault();const g=e(this),x=Rt.find(g);for(const A of x)I.getOrCreateInstance(A,{toggle:!1}).toggle()}),H(I);const X="dropdown",J="ArrowUp",pt="ArrowDown",dt="click.bs.dropdown.data-api",ut="keydown.bs.dropdown.data-api",At="show",kt='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Nt=`${kt}.show`,Yt=".dropdown-menu",Mt=N()?"top-end":"top-start",Ht=N()?"top-start":"top-end",Jt=N()?"bottom-end":"bottom-start",se=N()?"bottom-start":"bottom-end",Xe=N()?"left-start":"right-start",li=N()?"right-start":"left-start",Ze={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Ye={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Ae extends ne{constructor(g,x){super(g,x),this._popper=null,this._parent=this._element.parentNode,this._menu=Rt.findOne(Yt,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Ze}static get DefaultType(){return Ye}static get NAME(){return X}toggle(){return this._isShown()?this.hide():this.show()}show(){if(m(this._element)||this._isShown())return;const g={relatedTarget:this._element};if(!Q.trigger(this._element,"show.bs.dropdown",g).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const x of[].concat(...document.body.children))Q.on(x,"mouseover",C);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(At),this._element.classList.add(At),Q.trigger(this._element,"shown.bs.dropdown",g)}}hide(){!m(this._element)&&this._isShown()&&this._completeHide({relatedTarget:this._element})}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(g){if(!Q.trigger(this._element,"hide.bs.dropdown",g).defaultPrevented){if("ontouchstart"in document.documentElement)for(const x of[].concat(...document.body.children))Q.off(x,"mouseover",C);this._popper&&this._popper.destroy(),this._menu.classList.remove(At),this._element.classList.remove(At),this._element.setAttribute("aria-expanded","false"),we.removeDataAttribute(this._menu,"popper"),Q.trigger(this._element,"hidden.bs.dropdown",g)}}_getConfig(g){if("object"==typeof(g=super._getConfig(g)).reference&&!r(g.reference)&&"function"!=typeof g.reference.getBoundingClientRect)throw new TypeError(`${X.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return g}_createPopper(){if(void 0===a)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let g=this._element;"parent"===this._config.reference?g=this._parent:r(this._config.reference)?g=o(this._config.reference):"object"==typeof this._config.reference&&(g=this._config.reference);const x=this._getPopperConfig();this._popper=a.createPopper(g,this._menu,x)}_isShown(){return this._menu.classList.contains(At)}_getPlacement(){const g=this._parent;if(g.classList.contains("dropend"))return Xe;if(g.classList.contains("dropstart"))return li;if(g.classList.contains("dropup-center"))return"top";if(g.classList.contains("dropdown-center"))return"bottom";const x="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return g.classList.contains("dropup")?x?Ht:Mt:x?se:Jt}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:g}=this._config;return"string"==typeof g?g.split(",").map(x=>Number.parseInt(x,10)):"function"==typeof g?x=>g(x,this._element):g}_getPopperConfig(){const g={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(we.setDataAttribute(this._menu,"popper","static"),g.modifiers=[{name:"applyStyles",enabled:!1}]),{...g,..."function"==typeof this._config.popperConfig?this._config.popperConfig(g):this._config.popperConfig}}_selectMenuItem({key:g,target:x}){const A=Rt.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter($=>f($));A.length&&p(A,x,g===pt,!A.includes(x)).focus()}static jQueryInterface(g){return this.each(function(){const x=Ae.getOrCreateInstance(this,g);if("string"==typeof g){if(void 0===x[g])throw new TypeError(`No method named "${g}"`);x[g]()}})}static clearMenus(g){if(2===g.button||"keyup"===g.type&&"Tab"!==g.key)return;const x=Rt.find(Nt);for(const A of x){const $=Ae.getInstance(A);if(!$||!1===$._config.autoClose)continue;const lt=g.composedPath(),ht=lt.includes($._menu);if(lt.includes($._element)||"inside"===$._config.autoClose&&!ht||"outside"===$._config.autoClose&&ht||$._menu.contains(g.target)&&("keyup"===g.type&&"Tab"===g.key||/input|select|option|textarea|form/i.test(g.target.tagName)))continue;const Bt={relatedTarget:$._element};"click"===g.type&&(Bt.clickEvent=g),$._completeHide(Bt)}}static dataApiKeydownHandler(g){const x=/input|textarea/i.test(g.target.tagName),A="Escape"===g.key,$=[J,pt].includes(g.key);if(!$&&!A||x&&!A)return;g.preventDefault();const lt=Rt.findOne(kt,g.delegateTarget.parentNode),ht=Ae.getOrCreateInstance(lt);if($)return g.stopPropagation(),ht.show(),void ht._selectMenuItem(g);ht._isShown()&&(g.stopPropagation(),ht.hide(),lt.focus())}}Q.on(document,ut,kt,Ae.dataApiKeydownHandler),Q.on(document,ut,Yt,Ae.dataApiKeydownHandler),Q.on(document,dt,Ae.clearMenus),Q.on(document,"keyup.bs.dropdown.data-api",Ae.clearMenus),Q.on(document,dt,kt,function(D){D.preventDefault(),Ae.getOrCreateInstance(this).toggle()}),H(Ae);const Mi=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Hi=".sticky-top",an="padding-right",$e="margin-right";class ti{constructor(){this._element=document.body}getWidth(){const g=document.documentElement.clientWidth;return Math.abs(window.innerWidth-g)}hide(){const g=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,an,x=>x+g),this._setElementAttributes(Mi,an,x=>x+g),this._setElementAttributes(Hi,$e,x=>x-g)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,an),this._resetElementAttributes(Mi,an),this._resetElementAttributes(Hi,$e)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(g,x,A){const $=this.getWidth();this._applyManipulationCallback(g,lt=>{if(lt!==this._element&&window.innerWidth>lt.clientWidth+$)return;this._saveInitialAttribute(lt,x);const ht=window.getComputedStyle(lt).getPropertyValue(x);lt.style.setProperty(x,`${A(Number.parseFloat(ht))}px`)})}_saveInitialAttribute(g,x){const A=g.style.getPropertyValue(x);A&&we.setDataAttribute(g,x,A)}_resetElementAttributes(g,x){this._applyManipulationCallback(g,A=>{const $=we.getDataAttribute(A,x);null!==$?(we.removeDataAttribute(A,x),A.style.setProperty(x,$)):A.style.removeProperty(x)})}_applyManipulationCallback(g,x){if(r(g))x(g);else for(const A of Rt.find(g,this._element))x(A)}}const ei="mousedown.bs.backdrop",mn={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},ln={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class pi extends ve{constructor(g){super(),this._config=this._getConfig(g),this._isAppended=!1,this._element=null}static get Default(){return mn}static get DefaultType(){return ln}static get NAME(){return"backdrop"}show(g){if(!this._config.isVisible)return void nt(g);this._append();this._getElement().classList.add("show"),this._emulateAnimation(()=>{nt(g)})}hide(g){this._config.isVisible?(this._getElement().classList.remove("show"),this._emulateAnimation(()=>{this.dispose(),nt(g)})):nt(g)}dispose(){this._isAppended&&(Q.off(this._element,ei),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const g=document.createElement("div");g.className=this._config.className,this._config.isAnimated&&g.classList.add("fade"),this._element=g}return this._element}_configAfterMerge(g){return g.rootElement=o(g.rootElement),g}_append(){if(this._isAppended)return;const g=this._getElement();this._config.rootElement.append(g),Q.on(g,ei,()=>{nt(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(g){st(g,this._getElement(),this._config.isAnimated)}}const Ti=".bs.focustrap",cn="backward",Wi={autofocus:!0,trapElement:null},zi={autofocus:"boolean",trapElement:"element"};class Ji extends ve{constructor(g){super(),this._config=this._getConfig(g),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Wi}static get DefaultType(){return zi}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),Q.off(document,Ti),Q.on(document,"focusin.bs.focustrap",g=>this._handleFocusin(g)),Q.on(document,"keydown.tab.bs.focustrap",g=>this._handleKeydown(g)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,Q.off(document,Ti))}_handleFocusin(g){const{trapElement:x}=this._config;if(g.target===document||g.target===x||x.contains(g.target))return;const A=Rt.focusableChildren(x);0===A.length?x.focus():this._lastTabNavDirection===cn?A[A.length-1].focus():A[0].focus()}_handleKeydown(g){"Tab"===g.key&&(this._lastTabNavDirection=g.shiftKey?cn:"forward")}}const vn="hidden.bs.modal",je="show.bs.modal",Xi="modal-open",gi="modal-static",Mn={backdrop:!0,focus:!0,keyboard:!0},hn={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Si extends ne{constructor(g,x){super(g,x),this._dialog=Rt.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new ti,this._addEventListeners()}static get Default(){return Mn}static get DefaultType(){return hn}static get NAME(){return"modal"}toggle(g){return this._isShown?this.hide():this.show(g)}show(g){this._isShown||this._isTransitioning||Q.trigger(this._element,je,{relatedTarget:g}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Xi),this._adjustDialog(),this._backdrop.show(()=>this._showElement(g)))}hide(){this._isShown&&!this._isTransitioning&&(Q.trigger(this._element,"hide.bs.modal").defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove("show"),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){for(const g of[window,this._dialog])Q.off(g,".bs.modal");this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new pi({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Ji({trapElement:this._element})}_showElement(g){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const x=Rt.findOne(".modal-body",this._dialog);x&&(x.scrollTop=0),this._element.classList.add("show"),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,Q.trigger(this._element,"shown.bs.modal",{relatedTarget:g})},this._dialog,this._isAnimated())}_addEventListeners(){Q.on(this._element,"keydown.dismiss.bs.modal",g=>{if("Escape"===g.key)return this._config.keyboard?(g.preventDefault(),void this.hide()):void this._triggerBackdropTransition()}),Q.on(window,"resize.bs.modal",()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),Q.on(this._element,"mousedown.dismiss.bs.modal",g=>{g.target===g.currentTarget&&("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Xi),this._resetAdjustments(),this._scrollBar.reset(),Q.trigger(this._element,vn)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(Q.trigger(this._element,"hidePrevented.bs.modal").defaultPrevented)return;const g=this._element.scrollHeight>document.documentElement.clientHeight,x=this._element.style.overflowY;"hidden"===x||this._element.classList.contains(gi)||(g||(this._element.style.overflowY="hidden"),this._element.classList.add(gi),this._queueCallback(()=>{this._element.classList.remove(gi),this._queueCallback(()=>{this._element.style.overflowY=x},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const g=this._element.scrollHeight>document.documentElement.clientHeight,x=this._scrollBar.getWidth(),A=x>0;if(A&&!g){const $=N()?"paddingLeft":"paddingRight";this._element.style[$]=`${x}px`}if(!A&&g){const $=N()?"paddingRight":"paddingLeft";this._element.style[$]=`${x}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(g,x){return this.each(function(){const A=Si.getOrCreateInstance(this,g);if("string"==typeof g){if(void 0===A[g])throw new TypeError(`No method named "${g}"`);A[g](x)}})}}Q.on(document,"click.bs.modal.data-api",'[data-bs-toggle="modal"]',function(D){const g=i(this);["A","AREA"].includes(this.tagName)&&D.preventDefault(),Q.one(g,je,A=>{A.defaultPrevented||Q.one(g,vn,()=>{f(this)&&this.focus()})});const x=Rt.findOne(".modal.show");x&&Si.getInstance(x).hide(),Si.getOrCreateInstance(g).toggle(this)}),re(Si),H(Si);const _n="showing",yn=".offcanvas.show",Be="hidePrevented.bs.offcanvas",In="hidden.bs.offcanvas",tn={backdrop:!0,keyboard:!0,scroll:!1},Fn={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class hi extends ne{constructor(g,x){super(g,x),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return tn}static get DefaultType(){return Fn}static get NAME(){return"offcanvas"}toggle(g){return this._isShown?this.hide():this.show(g)}show(g){this._isShown||Q.trigger(this._element,"show.bs.offcanvas",{relatedTarget:g}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||(new ti).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(_n),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add("show"),this._element.classList.remove(_n),Q.trigger(this._element,"shown.bs.offcanvas",{relatedTarget:g})},this._element,!0))}hide(){this._isShown&&(Q.trigger(this._element,"hide.bs.offcanvas").defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add("hiding"),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove("show","hiding"),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new ti).reset(),Q.trigger(this._element,In)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const g=Boolean(this._config.backdrop);return new pi({className:"offcanvas-backdrop",isVisible:g,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:g?()=>{"static"!==this._config.backdrop?this.hide():Q.trigger(this._element,Be)}:null})}_initializeFocusTrap(){return new Ji({trapElement:this._element})}_addEventListeners(){Q.on(this._element,"keydown.dismiss.bs.offcanvas",g=>{"Escape"===g.key&&(this._config.keyboard?this.hide():Q.trigger(this._element,Be))})}static jQueryInterface(g){return this.each(function(){const x=hi.getOrCreateInstance(this,g);if("string"==typeof g){if(void 0===x[g]||g.startsWith("_")||"constructor"===g)throw new TypeError(`No method named "${g}"`);x[g](this)}})}}Q.on(document,"click.bs.offcanvas.data-api",'[data-bs-toggle="offcanvas"]',function(D){const g=i(this);if(["A","AREA"].includes(this.tagName)&&D.preventDefault(),m(this))return;Q.one(g,In,()=>{f(this)&&this.focus()});const x=Rt.findOne(yn);x&&x!==g&&hi.getInstance(x).hide(),hi.getOrCreateInstance(g).toggle(this)}),Q.on(window,"load.bs.offcanvas.data-api",()=>{for(const D of Rt.find(yn))hi.getOrCreateInstance(D).show()}),Q.on(window,"resize.bs.offcanvas",()=>{for(const D of Rt.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(D).position&&hi.getOrCreateInstance(D).hide()}),re(hi),H(hi);const Oi=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Yi=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,en=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,ir=(D,g)=>{const x=D.nodeName.toLowerCase();return g.includes(x)?!Oi.has(x)||Boolean(Yi.test(D.nodeValue)||en.test(D.nodeValue)):g.filter(A=>A instanceof RegExp).some(A=>A.test(x))},bn={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},xn={allowList:bn,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Vi={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},wn={entry:"(string|element|function|null)",selector:"(string|element)"};class Cn extends ve{constructor(g){super(),this._config=this._getConfig(g)}static get Default(){return xn}static get DefaultType(){return Vi}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(g=>this._resolvePossibleFunction(g)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(g){return this._checkContent(g),this._config.content={...this._config.content,...g},this}toHtml(){const g=document.createElement("div");g.innerHTML=this._maybeSanitize(this._config.template);for(const[$,lt]of Object.entries(this._config.content))this._setContent(g,lt,$);const x=g.children[0],A=this._resolvePossibleFunction(this._config.extraClass);return A&&x.classList.add(...A.split(" ")),x}_typeCheckConfig(g){super._typeCheckConfig(g),this._checkContent(g.content)}_checkContent(g){for(const[x,A]of Object.entries(g))super._typeCheckConfig({selector:x,entry:A},wn)}_setContent(g,x,A){const $=Rt.findOne(A,g);$&&((x=this._resolvePossibleFunction(x))?r(x)?this._putElementInTemplate(o(x),$):this._config.html?$.innerHTML=this._maybeSanitize(x):$.textContent=x:$.remove())}_maybeSanitize(g){return this._config.sanitize?function(x,A,$){if(!x.length)return x;if($&&"function"==typeof $)return $(x);const lt=(new window.DOMParser).parseFromString(x,"text/html"),ht=[].concat(...lt.body.querySelectorAll("*"));for(const Bt of ht){const qt=Bt.nodeName.toLowerCase();if(!Object.keys(A).includes(qt)){Bt.remove();continue}const pe=[].concat(...Bt.attributes),ee=[].concat(A["*"]||[],A[qt]||[]);for(const zt of pe)ir(zt,ee)||Bt.removeAttribute(zt.nodeName)}return lt.body.innerHTML}(g,this._config.allowList,this._config.sanitizeFn):g}_resolvePossibleFunction(g){return"function"==typeof g?g(this):g}_putElementInTemplate(g,x){if(this._config.html)return x.innerHTML="",void x.append(g);x.textContent=g.textContent}}const un=new Set(["sanitize","allowList","sanitizeFn"]),nn="fade",fn="show",Ei="hide.bs.modal",Tn="hover",Yn={AUTO:"auto",TOP:"top",RIGHT:N()?"left":"right",BOTTOM:"bottom",LEFT:N()?"right":"left"},Vn={allowList:bn,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,0],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Un={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Ni extends ne{constructor(g,x){if(void 0===a)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(g,x),this._isEnabled=!0,this._timeout=0,this._isHovered=!1,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners()}static get Default(){return Vn}static get DefaultType(){return Un}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(g){if(this._isEnabled){if(g){const x=this._initializeOnDelegatedTarget(g);return x._activeTrigger.click=!x._activeTrigger.click,void(x._isWithActiveTrigger()?x._enter():x._leave())}this._isShown()?this._leave():this._enter()}}dispose(){clearTimeout(this._timeout),Q.off(this._element.closest(".modal"),Ei,this._hideModalHandler),this.tip&&this.tip.remove(),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const g=Q.trigger(this._element,this.constructor.eventName("show")),x=(b(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(g.defaultPrevented||!x)return;this.tip&&(this.tip.remove(),this.tip=null);const A=this._getTipElement();this._element.setAttribute("aria-describedby",A.getAttribute("id"));const{container:$}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||($.append(A),Q.trigger(this._element,this.constructor.eventName("inserted"))),this._popper?this._popper.update():this._popper=this._createPopper(A),A.classList.add(fn),"ontouchstart"in document.documentElement)for(const lt of[].concat(...document.body.children))Q.on(lt,"mouseover",C);this._queueCallback(()=>{const lt=this._isHovered;this._isHovered=!1,Q.trigger(this._element,this.constructor.eventName("shown")),lt&&this._leave()},this.tip,this._isAnimated())}hide(){if(!this._isShown()||Q.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented)return;const g=this._getTipElement();if(g.classList.remove(fn),"ontouchstart"in document.documentElement)for(const x of[].concat(...document.body.children))Q.off(x,"mouseover",C);this._activeTrigger.click=!1,this._activeTrigger.focus=!1,this._activeTrigger.hover=!1,this._isHovered=!1,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||g.remove(),this._element.removeAttribute("aria-describedby"),Q.trigger(this._element,this.constructor.eventName("hidden")),this._disposePopper())},this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(g){const x=this._getTemplateFactory(g).toHtml();if(!x)return null;x.classList.remove(nn,fn),x.classList.add(`bs-${this.constructor.NAME}-auto`);const A=($=>{do{$+=Math.floor(1e6*Math.random())}while(document.getElementById($));return $})(this.constructor.NAME).toString();return x.setAttribute("id",A),this._isAnimated()&&x.classList.add(nn),x}setContent(g){this._newContent=g,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(g){return this._templateFactory?this._templateFactory.changeContent(g):this._templateFactory=new Cn({...this._config,content:g,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._config.originalTitle}_initializeOnDelegatedTarget(g){return this.constructor.getOrCreateInstance(g.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(nn)}_isShown(){return this.tip&&this.tip.classList.contains(fn)}_createPopper(g){const x="function"==typeof this._config.placement?this._config.placement.call(this,g,this._element):this._config.placement,A=Yn[x.toUpperCase()];return a.createPopper(this._element,g,this._getPopperConfig(A))}_getOffset(){const{offset:g}=this._config;return"string"==typeof g?g.split(",").map(x=>Number.parseInt(x,10)):"function"==typeof g?x=>g(x,this._element):g}_resolvePossibleFunction(g){return"function"==typeof g?g.call(this._element):g}_getPopperConfig(g){const x={placement:g,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:A=>{this._getTipElement().setAttribute("data-popper-placement",A.state.placement)}}]};return{...x,..."function"==typeof this._config.popperConfig?this._config.popperConfig(x):this._config.popperConfig}}_setListeners(){const g=this._config.trigger.split(" ");for(const x of g)if("click"===x)Q.on(this._element,this.constructor.eventName("click"),this._config.selector,A=>this.toggle(A));else if("manual"!==x){const A=this.constructor.eventName(x===Tn?"mouseenter":"focusin"),$=this.constructor.eventName(x===Tn?"mouseleave":"focusout");Q.on(this._element,A,this._config.selector,lt=>{const ht=this._initializeOnDelegatedTarget(lt);ht._activeTrigger["focusin"===lt.type?"focus":Tn]=!0,ht._enter()}),Q.on(this._element,$,this._config.selector,lt=>{const ht=this._initializeOnDelegatedTarget(lt);ht._activeTrigger["focusout"===lt.type?"focus":Tn]=ht._element.contains(lt.relatedTarget),ht._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},Q.on(this._element.closest(".modal"),Ei,this._hideModalHandler),this._config.selector?this._config={...this._config,trigger:"manual",selector:""}:this._fixTitle()}_fixTitle(){const g=this._config.originalTitle;g&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",g),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(g,x){clearTimeout(this._timeout),this._timeout=setTimeout(g,x)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(g){const x=we.getDataAttributes(this._element);for(const A of Object.keys(x))un.has(A)&&delete x[A];return g={...x,..."object"==typeof g&&g?g:{}},g=this._mergeConfigObj(g),g=this._configAfterMerge(g),this._typeCheckConfig(g),g}_configAfterMerge(g){return g.container=!1===g.container?document.body:o(g.container),"number"==typeof g.delay&&(g.delay={show:g.delay,hide:g.delay}),g.originalTitle=this._element.getAttribute("title")||"","number"==typeof g.title&&(g.title=g.title.toString()),"number"==typeof g.content&&(g.content=g.content.toString()),g}_getDelegateConfig(){const g={};for(const x in this._config)this.constructor.Default[x]!==this._config[x]&&(g[x]=this._config[x]);return g}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null)}static jQueryInterface(g){return this.each(function(){const x=Ni.getOrCreateInstance(this,g);if("string"==typeof g){if(void 0===x[g])throw new TypeError(`No method named "${g}"`);x[g]()}})}}H(Ni);const Sn={...Ni.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},On={...Ni.DefaultType,content:"(null|string|element|function)"};class dn extends Ni{static get Default(){return Sn}static get DefaultType(){return On}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(g){return this.each(function(){const x=dn.getOrCreateInstance(this,g);if("string"==typeof g){if(void 0===x[g])throw new TypeError(`No method named "${g}"`);x[g]()}})}}H(dn);const En="click.bs.scrollspy",Ui="active",rn={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null},nr={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element"};class Ai extends ne{constructor(g,x){super(g,x),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return rn}static get DefaultType(){return nr}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const g of this._observableSections.values())this._observer.observe(g)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(g){return g.target=o(g.target)||document.body,g}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(Q.off(this._config.target,En),Q.on(this._config.target,En,"[href]",g=>{const x=this._observableSections.get(g.target.hash);if(x){g.preventDefault();const A=this._rootElement||window,$=x.offsetTop-this._element.offsetTop;if(A.scrollTo)return void A.scrollTo({top:$,behavior:"smooth"});A.scrollTop=$}}))}_getNewObserver(){const g={root:this._rootElement,threshold:[.1,.5,1],rootMargin:this._getRootMargin()};return new IntersectionObserver(x=>this._observerCallback(x),g)}_observerCallback(g){const x=ht=>this._targetLinks.get(`#${ht.target.id}`),A=ht=>{this._previousScrollData.visibleEntryTop=ht.target.offsetTop,this._process(x(ht))},$=(this._rootElement||document.documentElement).scrollTop,lt=$>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=$;for(const ht of g){if(!ht.isIntersecting){this._activeTarget=null,this._clearActiveClass(x(ht));continue}const Bt=ht.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(lt&&Bt){if(A(ht),!$)return}else lt||Bt||A(ht)}}_getRootMargin(){return this._config.offset?`${this._config.offset}px 0px -30%`:this._config.rootMargin}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const g=Rt.find("[href]",this._config.target);for(const x of g){if(!x.hash||m(x))continue;const A=Rt.findOne(x.hash,this._element);f(A)&&(this._targetLinks.set(x.hash,x),this._observableSections.set(x.hash,A))}}_process(g){this._activeTarget!==g&&(this._clearActiveClass(this._config.target),this._activeTarget=g,g.classList.add(Ui),this._activateParents(g),Q.trigger(this._element,"activate.bs.scrollspy",{relatedTarget:g}))}_activateParents(g){if(g.classList.contains("dropdown-item"))Rt.findOne(".dropdown-toggle",g.closest(".dropdown")).classList.add(Ui);else for(const x of Rt.parents(g,".nav, .list-group"))for(const A of Rt.prev(x,".nav-link, .nav-item > .nav-link, .list-group-item"))A.classList.add(Ui)}_clearActiveClass(g){g.classList.remove(Ui);const x=Rt.find("[href].active",g);for(const A of x)A.classList.remove(Ui)}static jQueryInterface(g){return this.each(function(){const x=Ai.getOrCreateInstance(this,g);if("string"==typeof g){if(void 0===x[g]||g.startsWith("_")||"constructor"===g)throw new TypeError(`No method named "${g}"`);x[g]()}})}}Q.on(window,"load.bs.scrollspy.data-api",()=>{for(const D of Rt.find('[data-bs-spy="scroll"]'))Ai.getOrCreateInstance(D)}),H(Ai);const kn="ArrowLeft",Dn="ArrowRight",Pn="ArrowUp",Gn="ArrowDown",sn="active",c="show",d='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',v=`.nav-link:not(.dropdown-toggle), .list-group-item:not(.dropdown-toggle), [role="tab"]:not(.dropdown-toggle), ${d}`;class y extends ne{constructor(g){super(g),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),Q.on(this._element,"keydown.bs.tab",x=>this._keydown(x)))}static get NAME(){return"tab"}show(){const g=this._element;if(this._elemIsActive(g))return;const x=this._getActiveElem(),A=x?Q.trigger(x,"hide.bs.tab",{relatedTarget:g}):null;Q.trigger(g,"show.bs.tab",{relatedTarget:x}).defaultPrevented||A&&A.defaultPrevented||(this._deactivate(x,g),this._activate(g,x))}_activate(g,x){g&&(g.classList.add(sn),this._activate(i(g)),this._queueCallback(()=>{"tab"===g.getAttribute("role")?(g.focus(),g.removeAttribute("tabindex"),g.setAttribute("aria-selected",!0),this._toggleDropDown(g,!0),Q.trigger(g,"shown.bs.tab",{relatedTarget:x})):g.classList.add(c)},g,g.classList.contains("fade")))}_deactivate(g,x){g&&(g.classList.remove(sn),g.blur(),this._deactivate(i(g)),this._queueCallback(()=>{"tab"===g.getAttribute("role")?(g.setAttribute("aria-selected",!1),g.setAttribute("tabindex","-1"),this._toggleDropDown(g,!1),Q.trigger(g,"hidden.bs.tab",{relatedTarget:x})):g.classList.remove(c)},g,g.classList.contains("fade")))}_keydown(g){if(![kn,Dn,Pn,Gn].includes(g.key))return;g.stopPropagation(),g.preventDefault();const x=[Dn,Gn].includes(g.key),A=p(this._getChildren().filter($=>!m($)),g.target,x,!0);A&&y.getOrCreateInstance(A).show()}_getChildren(){return Rt.find(v,this._parent)}_getActiveElem(){return this._getChildren().find(g=>this._elemIsActive(g))||null}_setInitialAttributes(g,x){this._setAttributeIfNotExists(g,"role","tablist");for(const A of x)this._setInitialAttributesOnChild(A)}_setInitialAttributesOnChild(g){g=this._getInnerElement(g);const x=this._elemIsActive(g),A=this._getOuterElement(g);g.setAttribute("aria-selected",x),A!==g&&this._setAttributeIfNotExists(A,"role","presentation"),x||g.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(g,"role","tab"),this._setInitialAttributesOnTargetPanel(g)}_setInitialAttributesOnTargetPanel(g){const x=i(g);x&&(this._setAttributeIfNotExists(x,"role","tabpanel"),g.id&&this._setAttributeIfNotExists(x,"aria-labelledby",`#${g.id}`))}_toggleDropDown(g,x){const A=this._getOuterElement(g);if(!A.classList.contains("dropdown"))return;const $=(lt,ht)=>{const Bt=Rt.findOne(lt,A);Bt&&Bt.classList.toggle(ht,x)};$(".dropdown-toggle",sn),$(".dropdown-menu",c),$(".dropdown-item",sn),A.setAttribute("aria-expanded",x)}_setAttributeIfNotExists(g,x,A){g.hasAttribute(x)||g.setAttribute(x,A)}_elemIsActive(g){return g.classList.contains(sn)}_getInnerElement(g){return g.matches(v)?g:Rt.findOne(v,g)}_getOuterElement(g){return g.closest(".nav-item, .list-group-item")||g}static jQueryInterface(g){return this.each(function(){const x=y.getOrCreateInstance(this);if("string"==typeof g){if(void 0===x[g]||g.startsWith("_")||"constructor"===g)throw new TypeError(`No method named "${g}"`);x[g]()}})}}Q.on(document,"click.bs.tab",d,function(D){["A","AREA"].includes(this.tagName)&&D.preventDefault(),m(this)||y.getOrCreateInstance(this).show()}),Q.on(window,"load.bs.tab",()=>{for(const D of Rt.find('.active[data-bs-toggle="tab"], .active[data-bs-toggle="pill"], .active[data-bs-toggle="list"]'))y.getOrCreateInstance(D)}),H(y);const T="hide",k="show",j="showing",R={animation:"boolean",autohide:"boolean",delay:"number"},Y={animation:!0,autohide:!0,delay:5e3};class q extends ne{constructor(g,x){super(g,x),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Y}static get DefaultType(){return R}static get NAME(){return"toast"}show(){Q.trigger(this._element,"show.bs.toast").defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(T),this._element.classList.add(k,j),this._queueCallback(()=>{this._element.classList.remove(j),Q.trigger(this._element,"shown.bs.toast"),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(Q.trigger(this._element,"hide.bs.toast").defaultPrevented||(this._element.classList.add(j),this._queueCallback(()=>{this._element.classList.add(T),this._element.classList.remove(j,k),Q.trigger(this._element,"hidden.bs.toast")},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(k),super.dispose()}isShown(){return this._element.classList.contains(k)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(g,x){switch(g.type){case"mouseover":case"mouseout":this._hasMouseInteraction=x;break;case"focusin":case"focusout":this._hasKeyboardInteraction=x}if(x)return void this._clearTimeout();const A=g.relatedTarget;this._element===A||this._element.contains(A)||this._maybeScheduleHide()}_setListeners(){Q.on(this._element,"mouseover.bs.toast",g=>this._onInteraction(g,!0)),Q.on(this._element,"mouseout.bs.toast",g=>this._onInteraction(g,!1)),Q.on(this._element,"focusin.bs.toast",g=>this._onInteraction(g,!0)),Q.on(this._element,"focusout.bs.toast",g=>this._onInteraction(g,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(g){return this.each(function(){const x=q.getOrCreateInstance(this,g);if("string"==typeof g){if(void 0===x[g])throw new TypeError(`No method named "${g}"`);x[g](this)}})}}return re(q),H(q),{Alert:jt,Button:Ft,Carousel:he,Collapse:I,Dropdown:Ae,Modal:Si,Offcanvas:hi,Popover:dn,ScrollSpy:Ai,Tab:y,Toast:q,Tooltip:Ni}}),function(h,n){"object"==typeof exports&&typeof module<"u"?module.exports=n():"function"==typeof define&&define.amd?define(n):(h=typeof globalThis<"u"?globalThis:h||self).bootstrap=n()}(this,function(){"use strict";const h="transitionend",n=S=>{let u=S.getAttribute("data-bs-target");if(!u||"#"===u){let _=S.getAttribute("href");if(!_||!_.includes("#")&&!_.startsWith("."))return null;_.includes("#")&&!_.startsWith("#")&&(_=`#${_.split("#")[1]}`),u=_&&"#"!==_?_.trim():null}return u},a=S=>{const u=n(S);return u&&document.querySelector(u)?u:null},l=S=>{const u=n(S);return u?document.querySelector(u):null},t=S=>{S.dispatchEvent(new Event(h))},e=S=>!(!S||"object"!=typeof S)&&(void 0!==S.jquery&&(S=S[0]),void 0!==S.nodeType),i=S=>e(S)?S.jquery?S[0]:S:"string"==typeof S&&S.length>0?document.querySelector(S):null,s=S=>{if(!e(S)||0===S.getClientRects().length)return!1;const u="visible"===getComputedStyle(S).getPropertyValue("visibility"),_=S.closest("details:not([open])");if(!_)return u;if(_!==S){const P=S.closest("summary");if(P&&P.parentNode!==_||null===P)return!1}return u},r=S=>!S||S.nodeType!==Node.ELEMENT_NODE||!!S.classList.contains("disabled")||(void 0!==S.disabled?S.disabled:S.hasAttribute("disabled")&&"false"!==S.getAttribute("disabled")),o=S=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof S.getRootNode){const u=S.getRootNode();return u instanceof ShadowRoot?u:null}return S instanceof ShadowRoot?S:S.parentNode?o(S.parentNode):null},f=()=>{},b=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,C=[],w=()=>"rtl"===document.documentElement.dir,E=S=>{var u;u=()=>{const _=b();if(_){const P=S.NAME,U=_.fn[P];_.fn[P]=S.jQueryInterface,_.fn[P].Constructor=S,_.fn[P].noConflict=()=>(_.fn[P]=U,S.jQueryInterface)}},"loading"===document.readyState?(C.length||document.addEventListener("DOMContentLoaded",()=>{for(const _ of C)_()}),C.push(u)):u()},M=S=>{"function"==typeof S&&S()},N=(S,u,_=!0)=>{if(!_)return void M(S);const P=(rt=>{if(!rt)return 0;let{transitionDuration:yt,transitionDelay:wt}=window.getComputedStyle(rt);const Et=Number.parseFloat(yt),Pt=Number.parseFloat(wt);return Et||Pt?(yt=yt.split(",")[0],wt=wt.split(",")[0],1e3*(Number.parseFloat(yt)+Number.parseFloat(wt))):0})(u)+5;let U=!1;const Z=({target:rt})=>{rt===u&&(U=!0,u.removeEventListener(h,Z),M(S))};u.addEventListener(h,Z),setTimeout(()=>{U||t(u)},P)},H=(S,u,_,P)=>{const U=S.length;let Z=S.indexOf(u);return-1===Z?!_&&P?S[U-1]:S[0]:(Z+=_?1:-1,P&&(Z=(Z+U)%U),S[Math.max(0,Math.min(Z,U-1))])},nt=/[^.]*(?=\..*)\.|.*/,st=/\..*/,p=/::\d+$/,F={};let V=1;const et={mouseenter:"mouseover",mouseleave:"mouseout"},ot=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function ct(S,u){return u&&`${u}::${V++}`||S.uidEvent||V++}function W(S){const u=ct(S);return S.uidEvent=u,F[u]=F[u]||{},F[u]}function z(S,u,_=null){return Object.values(S).find(P=>P.callable===u&&P.delegationSelector===_)}function tt(S,u,_){const P="string"==typeof u,U=P?_:u||_;let Z=_t(S);return ot.has(Z)||(Z=S),[P,U,Z]}function ft(S,u,_,P,U){if("string"!=typeof u||!S)return;let[Z,rt,yt]=tt(u,_,P);var Kt;u in et&&(Kt=rt,rt=function(Qt){if(!Qt.relatedTarget||Qt.relatedTarget!==Qt.delegateTarget&&!Qt.delegateTarget.contains(Qt.relatedTarget))return Kt.call(this,Qt)});const wt=W(S),Et=wt[yt]||(wt[yt]={}),Pt=z(Et,rt,Z?_:null);if(Pt)return void(Pt.oneOff=Pt.oneOff&&U);const It=ct(rt,u.replace(nt,"")),le=Z?function(Ut,Kt,Qt){return function ie(ke){const Te=Ut.querySelectorAll(Kt);for(let{target:oe}=ke;oe&&oe!==this;oe=oe.parentNode)for(const be of Te)if(be===oe)return bt(ke,{delegateTarget:oe}),ie.oneOff&&G.off(Ut,ke.type,Kt,Qt),Qt.apply(oe,[ke])}}(S,_,rt):function(Ut,Kt){return function Qt(ie){return bt(ie,{delegateTarget:Ut}),Qt.oneOff&&G.off(Ut,ie.type,Kt),Kt.apply(Ut,[ie])}}(S,rt);le.delegationSelector=Z?_:null,le.callable=rt,le.oneOff=U,le.uidEvent=It,Et[It]=le,S.addEventListener(yt,le,Z)}function at(S,u,_,P,U){const Z=z(u[_],P,U);Z&&(S.removeEventListener(_,Z,Boolean(U)),delete u[_][Z.uidEvent])}function mt(S,u,_,P){const U=u[_]||{};for(const Z of Object.keys(U))if(Z.includes(P)){const rt=U[Z];at(S,u,_,rt.callable,rt.delegationSelector)}}function _t(S){return S=S.replace(st,""),et[S]||S}const G={on(S,u,_,P){ft(S,u,_,P,!1)},one(S,u,_,P){ft(S,u,_,P,!0)},off(S,u,_,P){if("string"!=typeof u||!S)return;const[U,Z,rt]=tt(u,_,P),yt=rt!==u,wt=W(S),Et=wt[rt]||{},Pt=u.startsWith(".");if(void 0===Z){if(Pt)for(const It of Object.keys(wt))mt(S,wt,It,u.slice(1));for(const It of Object.keys(Et)){const le=It.replace(p,"");if(!yt||u.includes(le)){const Ut=Et[It];at(S,wt,rt,Ut.callable,Ut.delegationSelector)}}}else{if(!Object.keys(Et).length)return;at(S,wt,rt,Z,U?_:null)}},trigger(S,u,_){if("string"!=typeof u||!S)return null;const P=b();let U=null,Z=!0,rt=!0,yt=!1;u!==_t(u)&&P&&(U=P.Event(u,_),P(S).trigger(U),Z=!U.isPropagationStopped(),rt=!U.isImmediatePropagationStopped(),yt=U.isDefaultPrevented());let wt=new Event(u,{bubbles:Z,cancelable:!0});return wt=bt(wt,_),yt&&wt.preventDefault(),rt&&S.dispatchEvent(wt),wt.defaultPrevented&&U&&U.preventDefault(),wt}};function bt(S,u){for(const[_,P]of Object.entries(u||{}))try{S[_]=P}catch{Object.defineProperty(S,_,{configurable:!0,get:()=>P})}return S}const Ct=new Map,Q={set(S,u,_){Ct.has(S)||Ct.set(S,new Map);const P=Ct.get(S);P.has(u)||0===P.size?P.set(u,_):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(P.keys())[0]}.`)},get:(S,u)=>Ct.has(S)&&Ct.get(S).get(u)||null,remove(S,u){if(!Ct.has(S))return;const _=Ct.get(S);_.delete(u),0===_.size&&Ct.delete(S)}};function St(S){if("true"===S)return!0;if("false"===S)return!1;if(S===Number(S).toString())return Number(S);if(""===S||"null"===S)return null;if("string"!=typeof S)return S;try{return JSON.parse(decodeURIComponent(S))}catch{return S}}function Tt(S){return S.replace(/[A-Z]/g,u=>`-${u.toLowerCase()}`)}const Lt={setDataAttribute(S,u,_){S.setAttribute(`data-bs-${Tt(u)}`,_)},removeDataAttribute(S,u){S.removeAttribute(`data-bs-${Tt(u)}`)},getDataAttributes(S){if(!S)return{};const u={},_=Object.keys(S.dataset).filter(P=>P.startsWith("bs")&&!P.startsWith("bsConfig"));for(const P of _){let U=P.replace(/^bs/,"");U=U.charAt(0).toLowerCase()+U.slice(1,U.length),u[U]=St(S.dataset[P])}return u},getDataAttribute:(S,u)=>St(S.getAttribute(`data-bs-${Tt(u)}`))};class Wt{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(u){return u=this._mergeConfigObj(u),u=this._configAfterMerge(u),this._typeCheckConfig(u),u}_configAfterMerge(u){return u}_mergeConfigObj(u,_){const P=e(_)?Lt.getDataAttribute(_,"config"):{};return{...this.constructor.Default,..."object"==typeof P?P:{},...e(_)?Lt.getDataAttributes(_):{},..."object"==typeof u?u:{}}}_typeCheckConfig(u,_=this.constructor.DefaultType){for(const U of Object.keys(_)){const Z=_[U],rt=u[U],yt=e(rt)?"element":null==(P=rt)?`${P}`:Object.prototype.toString.call(P).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(Z).test(yt))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${U}" provided type "${yt}" but expected type "${Z}".`)}var P}}class Xt extends Wt{constructor(u,_){super(),(u=i(u))&&(this._element=u,this._config=this._getConfig(_),Q.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Q.remove(this._element,this.constructor.DATA_KEY),G.off(this._element,this.constructor.EVENT_KEY);for(const u of Object.getOwnPropertyNames(this))this[u]=null}_queueCallback(u,_,P=!0){N(u,_,P)}_getConfig(u){return u=this._mergeConfigObj(u,this._element),u=this._configAfterMerge(u),this._typeCheckConfig(u),u}static getInstance(u){return Q.get(i(u),this.DATA_KEY)}static getOrCreateInstance(u,_={}){return this.getInstance(u)||new this(u,"object"==typeof _?_:null)}static get VERSION(){return"5.2.0"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(u){return`${u}${this.EVENT_KEY}`}}const we=(S,u="hide")=>{const P=S.NAME;G.on(document,`click.dismiss${S.EVENT_KEY}`,`[data-bs-dismiss="${P}"]`,function(U){if(["A","AREA"].includes(this.tagName)&&U.preventDefault(),r(this))return;const Z=l(this)||this.closest(`.${P}`);S.getOrCreateInstance(Z)[u]()})};class ve extends Xt{static get NAME(){return"alert"}close(){if(G.trigger(this._element,"close.bs.alert").defaultPrevented)return;this._element.classList.remove("show");const u=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,u)}_destroyElement(){this._element.remove(),G.trigger(this._element,"closed.bs.alert"),this.dispose()}static jQueryInterface(u){return this.each(function(){const _=ve.getOrCreateInstance(this);if("string"==typeof u){if(void 0===_[u]||u.startsWith("_")||"constructor"===u)throw new TypeError(`No method named "${u}"`);_[u](this)}})}}we(ve,"close"),E(ve);const ne='[data-bs-toggle="button"]';class re extends Xt{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(u){return this.each(function(){const _=re.getOrCreateInstance(this);"toggle"===u&&_[u]()})}}G.on(document,"click.bs.button.data-api",ne,S=>{S.preventDefault();const u=S.target.closest(ne);re.getOrCreateInstance(u).toggle()}),E(re);const jt={find:(S,u=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(u,S)),findOne:(S,u=document.documentElement)=>Element.prototype.querySelector.call(u,S),children:(S,u)=>[].concat(...S.children).filter(_=>_.matches(u)),parents(S,u){const _=[];let P=S.parentNode.closest(u);for(;P;)_.push(P),P=P.parentNode.closest(u);return _},prev(S,u){let _=S.previousElementSibling;for(;_;){if(_.matches(u))return[_];_=_.previousElementSibling}return[]},next(S,u){let _=S.nextElementSibling;for(;_;){if(_.matches(u))return[_];_=_.nextElementSibling}return[]},focusableChildren(S){const u=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(_=>`${_}:not([tabindex^="-"])`).join(",");return this.find(u,S).filter(_=>!r(_)&&s(_))}},Fe={endCallback:null,leftCallback:null,rightCallback:null},Ft={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Rt extends Wt{constructor(u,_){super(),this._element=u,u&&Rt.isSupported()&&(this._config=this._getConfig(_),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return Fe}static get DefaultType(){return Ft}static get NAME(){return"swipe"}dispose(){G.off(this._element,".bs.swipe")}_start(u){this._supportPointerEvents?this._eventIsPointerPenTouch(u)&&(this._deltaX=u.clientX):this._deltaX=u.touches[0].clientX}_end(u){this._eventIsPointerPenTouch(u)&&(this._deltaX=u.clientX-this._deltaX),this._handleSwipe(),M(this._config.endCallback)}_move(u){this._deltaX=u.touches&&u.touches.length>1?0:u.touches[0].clientX-this._deltaX}_handleSwipe(){const u=Math.abs(this._deltaX);if(u<=40)return;const _=u/this._deltaX;this._deltaX=0,_&&M(_>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(G.on(this._element,"pointerdown.bs.swipe",u=>this._start(u)),G.on(this._element,"pointerup.bs.swipe",u=>this._end(u)),this._element.classList.add("pointer-event")):(G.on(this._element,"touchstart.bs.swipe",u=>this._start(u)),G.on(this._element,"touchmove.bs.swipe",u=>this._move(u)),G.on(this._element,"touchend.bs.swipe",u=>this._end(u)))}_eventIsPointerPenTouch(u){return this._supportPointerEvents&&("pen"===u.pointerType||"touch"===u.pointerType)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const qe="next",Je="prev",Ne="left",me="right",_e="slid.bs.carousel",Ce="carousel",Se="active",ri={ArrowLeft:me,ArrowRight:Ne},Li={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},He={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class oi extends Xt{constructor(u,_){super(u,_),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=jt.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===Ce&&this.cycle()}static get Default(){return Li}static get DefaultType(){return He}static get NAME(){return"carousel"}next(){this._slide(qe)}nextWhenVisible(){!document.hidden&&s(this._element)&&this.next()}prev(){this._slide(Je)}pause(){this._isSliding&&t(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?G.one(this._element,_e,()=>this.cycle()):this.cycle())}to(u){const _=this._getItems();if(u>_.length-1||u<0)return;if(this._isSliding)return void G.one(this._element,_e,()=>this.to(u));const P=this._getItemIndex(this._getActive());P!==u&&this._slide(u>P?qe:Je,_[u])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(u){return u.defaultInterval=u.interval,u}_addEventListeners(){this._config.keyboard&&G.on(this._element,"keydown.bs.carousel",u=>this._keydown(u)),"hover"===this._config.pause&&(G.on(this._element,"mouseenter.bs.carousel",()=>this.pause()),G.on(this._element,"mouseleave.bs.carousel",()=>this._maybeEnableCycle())),this._config.touch&&Rt.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const _ of jt.find(".carousel-item img",this._element))G.on(_,"dragstart.bs.carousel",P=>P.preventDefault());this._swipeHelper=new Rt(this._element,{leftCallback:()=>this._slide(this._directionToOrder(Ne)),rightCallback:()=>this._slide(this._directionToOrder(me)),endCallback:()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}})}_keydown(u){if(/input|textarea/i.test(u.target.tagName))return;const _=ri[u.key];_&&(u.preventDefault(),this._slide(this._directionToOrder(_)))}_getItemIndex(u){return this._getItems().indexOf(u)}_setActiveIndicatorElement(u){if(!this._indicatorsElement)return;const _=jt.findOne(".active",this._indicatorsElement);_.classList.remove(Se),_.removeAttribute("aria-current");const P=jt.findOne(`[data-bs-slide-to="${u}"]`,this._indicatorsElement);P&&(P.classList.add(Se),P.setAttribute("aria-current","true"))}_updateInterval(){const u=this._activeElement||this._getActive();if(!u)return;const _=Number.parseInt(u.getAttribute("data-bs-interval"),10);this._config.interval=_||this._config.defaultInterval}_slide(u,_=null){if(this._isSliding)return;const P=this._getActive(),U=u===qe,Z=_||H(this._getItems(),P,U,this._config.wrap);if(Z===P)return;const rt=this._getItemIndex(Z),yt=It=>G.trigger(this._element,It,{relatedTarget:Z,direction:this._orderToDirection(u),from:this._getItemIndex(P),to:rt});if(yt("slide.bs.carousel").defaultPrevented||!P||!Z)return;const wt=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(rt),this._activeElement=Z;const Et=U?"carousel-item-start":"carousel-item-end",Pt=U?"carousel-item-next":"carousel-item-prev";Z.classList.add(Pt),P.classList.add(Et),Z.classList.add(Et),this._queueCallback(()=>{Z.classList.remove(Et,Pt),Z.classList.add(Se),P.classList.remove(Se,Pt,Et),this._isSliding=!1,yt(_e)},P,this._isAnimated()),wt&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return jt.findOne(".active.carousel-item",this._element)}_getItems(){return jt.find(".carousel-item",this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(u){return w()?u===Ne?Je:qe:u===Ne?qe:Je}_orderToDirection(u){return w()?u===Je?Ne:me:u===Je?me:Ne}static jQueryInterface(u){return this.each(function(){const _=oi.getOrCreateInstance(this,u);if("number"!=typeof u){if("string"==typeof u){if(void 0===_[u]||u.startsWith("_")||"constructor"===u)throw new TypeError(`No method named "${u}"`);_[u]()}}else _.to(u)})}}G.on(document,"click.bs.carousel.data-api","[data-bs-slide], [data-bs-slide-to]",function(S){const u=l(this);if(!u||!u.classList.contains(Ce))return;S.preventDefault();const _=oi.getOrCreateInstance(u),P=this.getAttribute("data-bs-slide-to");return P?(_.to(P),void _._maybeEnableCycle()):"next"===Lt.getDataAttribute(this,"slide")?(_.next(),void _._maybeEnableCycle()):(_.prev(),void _._maybeEnableCycle())}),G.on(window,"load.bs.carousel.data-api",()=>{const S=jt.find('[data-bs-ride="carousel"]');for(const u of S)oi.getOrCreateInstance(u)}),E(oi);const Ci="show",Pe="collapse",he="collapsing",We='[data-bs-toggle="collapse"]',Re={parent:null,toggle:!0},ai={parent:"(null|element)",toggle:"boolean"};class ze extends Xt{constructor(u,_){super(u,_),this._isTransitioning=!1,this._triggerArray=[];const P=jt.find(We);for(const U of P){const Z=a(U),rt=jt.find(Z).filter(yt=>yt===this._element);null!==Z&&rt.length&&this._triggerArray.push(U)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Re}static get DefaultType(){return ai}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let u=[];if(this._config.parent&&(u=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(U=>U!==this._element).map(U=>ze.getOrCreateInstance(U,{toggle:!1}))),u.length&&u[0]._isTransitioning||G.trigger(this._element,"show.bs.collapse").defaultPrevented)return;for(const U of u)U.hide();const _=this._getDimension();this._element.classList.remove(Pe),this._element.classList.add(he),this._element.style[_]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const P=`scroll${_[0].toUpperCase()+_.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(he),this._element.classList.add(Pe,Ci),this._element.style[_]="",G.trigger(this._element,"shown.bs.collapse")},this._element,!0),this._element.style[_]=`${this._element[P]}px`}hide(){if(this._isTransitioning||!this._isShown()||G.trigger(this._element,"hide.bs.collapse").defaultPrevented)return;const u=this._getDimension();this._element.style[u]=`${this._element.getBoundingClientRect()[u]}px`,this._element.classList.add(he),this._element.classList.remove(Pe,Ci);for(const _ of this._triggerArray){const P=l(_);P&&!this._isShown(P)&&this._addAriaAndCollapsedClass([_],!1)}this._isTransitioning=!0,this._element.style[u]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(he),this._element.classList.add(Pe),G.trigger(this._element,"hidden.bs.collapse")},this._element,!0)}_isShown(u=this._element){return u.classList.contains(Ci)}_configAfterMerge(u){return u.toggle=Boolean(u.toggle),u.parent=i(u.parent),u}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const u=this._getFirstLevelChildren(We);for(const _ of u){const P=l(_);P&&this._addAriaAndCollapsedClass([_],this._isShown(P))}}_getFirstLevelChildren(u){const _=jt.find(":scope .collapse .collapse",this._config.parent);return jt.find(u,this._config.parent).filter(P=>!_.includes(P))}_addAriaAndCollapsedClass(u,_){if(u.length)for(const P of u)P.classList.toggle("collapsed",!_),P.setAttribute("aria-expanded",_)}static jQueryInterface(u){const _={};return"string"==typeof u&&/show|hide/.test(u)&&(_.toggle=!1),this.each(function(){const P=ze.getOrCreateInstance(this,_);if("string"==typeof u){if(void 0===P[u])throw new TypeError(`No method named "${u}"`);P[u]()}})}}G.on(document,"click.bs.collapse.data-api",We,function(S){("A"===S.target.tagName||S.delegateTarget&&"A"===S.delegateTarget.tagName)&&S.preventDefault();const u=a(this),_=jt.find(u);for(const P of _)ze.getOrCreateInstance(P,{toggle:!1}).toggle()}),E(ze);var ae="top",O="bottom",I="right",X="left",J="auto",pt=[ae,O,I,X],dt="start",ut="end",At="clippingParents",kt="viewport",Nt="popper",Yt="reference",Mt=pt.reduce(function(S,u){return S.concat([u+"-"+dt,u+"-"+ut])},[]),Ht=[].concat(pt,[J]).reduce(function(S,u){return S.concat([u,u+"-"+dt,u+"-"+ut])},[]),Jt="beforeRead",Xe="afterRead",li="beforeMain",Ye="afterMain",Ae="beforeWrite",Hi="afterWrite",an=[Jt,"read",Xe,li,"main",Ye,Ae,"write",Hi];function $e(S){return S?(S.nodeName||"").toLowerCase():null}function ti(S){if(null==S)return window;if("[object Window]"!==S.toString()){var u=S.ownerDocument;return u&&u.defaultView||window}return S}function Ii(S){return S instanceof ti(S).Element||S instanceof Element}function ei(S){return S instanceof ti(S).HTMLElement||S instanceof HTMLElement}function mn(S){return typeof ShadowRoot<"u"&&(S instanceof ti(S).ShadowRoot||S instanceof ShadowRoot)}const ln={name:"applyStyles",enabled:!0,phase:"write",fn:function(S){var u=S.state;Object.keys(u.elements).forEach(function(_){var P=u.styles[_]||{},U=u.attributes[_]||{},Z=u.elements[_];ei(Z)&&$e(Z)&&(Object.assign(Z.style,P),Object.keys(U).forEach(function(rt){var yt=U[rt];!1===yt?Z.removeAttribute(rt):Z.setAttribute(rt,!0===yt?"":yt)}))})},effect:function(S){var u=S.state,_={popper:{position:u.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(u.elements.popper.style,_.popper),u.styles=_,u.elements.arrow&&Object.assign(u.elements.arrow.style,_.arrow),function(){Object.keys(u.elements).forEach(function(P){var U=u.elements[P],Z=u.attributes[P]||{},rt=Object.keys(u.styles.hasOwnProperty(P)?u.styles[P]:_[P]).reduce(function(yt,wt){return yt[wt]="",yt},{});ei(U)&&$e(U)&&(Object.assign(U.style,rt),Object.keys(Z).forEach(function(yt){U.removeAttribute(yt)}))})}},requires:["computeStyles"]};function pi(S){return S.split("-")[0]}var Ti=Math.max,cn=Math.min,Wi=Math.round;function zi(S,u){void 0===u&&(u=!1);var _=S.getBoundingClientRect(),P=1,U=1;if(ei(S)&&u){var Z=S.offsetHeight,rt=S.offsetWidth;rt>0&&(P=Wi(_.width)/rt||1),Z>0&&(U=Wi(_.height)/Z||1)}return{width:_.width/P,height:_.height/U,top:_.top/U,right:_.right/P,bottom:_.bottom/U,left:_.left/P,x:_.left/P,y:_.top/U}}function Ji(S){var u=zi(S),_=S.offsetWidth,P=S.offsetHeight;return Math.abs(u.width-_)<=1&&(_=u.width),Math.abs(u.height-P)<=1&&(P=u.height),{x:S.offsetLeft,y:S.offsetTop,width:_,height:P}}function vn(S,u){var _=u.getRootNode&&u.getRootNode();if(S.contains(u))return!0;if(_&&mn(_)){var P=u;do{if(P&&S.isSameNode(P))return!0;P=P.parentNode||P.host}while(P)}return!1}function je(S){return ti(S).getComputedStyle(S)}function Xi(S){return["table","td","th"].indexOf($e(S))>=0}function ci(S){return((Ii(S)?S.ownerDocument:S.document)||window.document).documentElement}function gi(S){return"html"===$e(S)?S:S.assignedSlot||S.parentNode||(mn(S)?S.host:null)||ci(S)}function Mn(S){return ei(S)&&"fixed"!==je(S).position?S.offsetParent:null}function hn(S){for(var u=ti(S),_=Mn(S);_&&Xi(_)&&"static"===je(_).position;)_=Mn(_);return _&&("html"===$e(_)||"body"===$e(_)&&"static"===je(_).position)?u:_||function(P){var U=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1!==navigator.userAgent.indexOf("Trident")&&ei(P)&&"fixed"===je(P).position)return null;var Z=gi(P);for(mn(Z)&&(Z=Z.host);ei(Z)&&["html","body"].indexOf($e(Z))<0;){var rt=je(Z);if("none"!==rt.transform||"none"!==rt.perspective||"paint"===rt.contain||-1!==["transform","perspective"].indexOf(rt.willChange)||U&&"filter"===rt.willChange||U&&rt.filter&&"none"!==rt.filter)return Z;Z=Z.parentNode}return null}(S)||u}function Si(S){return["top","bottom"].indexOf(S)>=0?"x":"y"}function Fi(S,u,_){return Ti(S,cn(u,_))}function _n(S){return Object.assign({},{top:0,right:0,bottom:0,left:0},S)}function Zi(S,u){return u.reduce(function(_,P){return _[P]=S,_},{})}const yn={name:"arrow",enabled:!0,phase:"main",fn:function(S){var u,xe,Ee,_=S.state,P=S.name,U=S.options,Z=_.elements.arrow,rt=_.modifiersData.popperOffsets,yt=pi(_.placement),wt=Si(yt),Et=[X,I].indexOf(yt)>=0?"height":"width";if(Z&&rt){var Pt=(Ee=_,_n("number"!=typeof(xe="function"==typeof(xe=U.padding)?xe(Object.assign({},Ee.rects,{placement:Ee.placement})):xe)?xe:Zi(xe,pt))),It=Ji(Z),le="y"===wt?ae:X,Ut="y"===wt?O:I,Kt=_.rects.reference[Et]+_.rects.reference[wt]-rt[wt]-_.rects.popper[Et],Qt=rt[wt]-_.rects.reference[wt],ie=hn(Z),ke=ie?"y"===wt?ie.clientHeight||0:ie.clientWidth||0:0,ce=ke/2-It[Et]/2+(Kt/2-Qt/2),de=Fi(Pt[le],ce,ke-It[Et]-Pt[Ut]);_.modifiersData[P]=((u={})[wt]=de,u.centerOffset=de-ce,u)}},effect:function(S){var u=S.state,_=S.options.element,P=void 0===_?"[data-popper-arrow]":_;null!=P&&("string"!=typeof P||(P=u.elements.popper.querySelector(P)))&&vn(u.elements.popper,P)&&(u.elements.arrow=P)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Be(S){return S.split("-")[1]}var In={top:"auto",right:"auto",bottom:"auto",left:"auto"};function tn(S){var u,_=S.popper,P=S.popperRect,U=S.placement,Z=S.variation,rt=S.offsets,yt=S.position,wt=S.gpuAcceleration,Et=S.adaptive,Pt=S.roundOffsets,It=S.isFixed,le=rt.x,Ut=void 0===le?0:le,Kt=rt.y,Qt=void 0===Kt?0:Kt,ie="function"==typeof Pt?Pt({x:Ut,y:Qt}):{x:Ut,y:Qt};Ut=ie.x,Qt=ie.y;var ke=rt.hasOwnProperty("x"),Te=rt.hasOwnProperty("y"),oe=X,be=ae,ce=window;if(Et){var de=hn(_),ge="clientHeight",xe="clientWidth";de===ti(_)&&"static"!==je(de=ci(_)).position&&"absolute"===yt&&(ge="scrollHeight",xe="scrollWidth"),(U===ae||(U===X||U===I)&&Z===ut)&&(be=O,Qt-=(It&&de===ce&&ce.visualViewport?ce.visualViewport.height:de[ge])-P.height,Qt*=wt?1:-1),U!==X&&(U!==ae&&U!==O||Z!==ut)||(oe=I,Ut-=(It&&de===ce&&ce.visualViewport?ce.visualViewport.width:de[xe])-P.width,Ut*=wt?1:-1)}var Ee,bi,gn,xi,Qe=Object.assign({position:yt},Et&&In),ni=!0===Pt?(gn=(bi={x:Ut,y:Qt}).y,xi=window.devicePixelRatio||1,{x:Wi(bi.x*xi)/xi||0,y:Wi(gn*xi)/xi||0}):{x:Ut,y:Qt};return Ut=ni.x,Qt=ni.y,Object.assign({},Qe,wt?((Ee={})[be]=Te?"0":"",Ee[oe]=ke?"0":"",Ee.transform=(ce.devicePixelRatio||1)<=1?"translate("+Ut+"px, "+Qt+"px)":"translate3d("+Ut+"px, "+Qt+"px, 0)",Ee):((u={})[be]=Te?Qt+"px":"",u[oe]=ke?Ut+"px":"",u.transform="",u))}const Fn={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(S){var u=S.state,_=S.options,P=_.gpuAcceleration,U=void 0===P||P,Z=_.adaptive,rt=void 0===Z||Z,yt=_.roundOffsets,wt=void 0===yt||yt,Et={placement:pi(u.placement),variation:Be(u.placement),popper:u.elements.popper,popperRect:u.rects.popper,gpuAcceleration:U,isFixed:"fixed"===u.options.strategy};null!=u.modifiersData.popperOffsets&&(u.styles.popper=Object.assign({},u.styles.popper,tn(Object.assign({},Et,{offsets:u.modifiersData.popperOffsets,position:u.options.strategy,adaptive:rt,roundOffsets:wt})))),null!=u.modifiersData.arrow&&(u.styles.arrow=Object.assign({},u.styles.arrow,tn(Object.assign({},Et,{offsets:u.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:wt})))),u.attributes.popper=Object.assign({},u.attributes.popper,{"data-popper-placement":u.placement})},data:{}};var hi={passive:!0};const Oi={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(S){var u=S.state,_=S.instance,P=S.options,U=P.scroll,Z=void 0===U||U,rt=P.resize,yt=void 0===rt||rt,wt=ti(u.elements.popper),Et=[].concat(u.scrollParents.reference,u.scrollParents.popper);return Z&&Et.forEach(function(Pt){Pt.addEventListener("scroll",_.update,hi)}),yt&&wt.addEventListener("resize",_.update,hi),function(){Z&&Et.forEach(function(Pt){Pt.removeEventListener("scroll",_.update,hi)}),yt&&wt.removeEventListener("resize",_.update,hi)}},data:{}};var Yi={left:"right",right:"left",bottom:"top",top:"bottom"};function en(S){return S.replace(/left|right|bottom|top/g,function(u){return Yi[u]})}var ir={start:"end",end:"start"};function bn(S){return S.replace(/start|end/g,function(u){return ir[u]})}function xn(S){var u=ti(S);return{scrollLeft:u.pageXOffset,scrollTop:u.pageYOffset}}function Vi(S){return zi(ci(S)).left+xn(S).scrollLeft}function wn(S){var u=je(S);return/auto|scroll|overlay|hidden/.test(u.overflow+u.overflowY+u.overflowX)}function Cn(S){return["html","body","#document"].indexOf($e(S))>=0?S.ownerDocument.body:ei(S)&&wn(S)?S:Cn(gi(S))}function un(S,u){var _;void 0===u&&(u=[]);var P=Cn(S),U=P===(null==(_=S.ownerDocument)?void 0:_.body),Z=ti(P),rt=U?[Z].concat(Z.visualViewport||[],wn(P)?P:[]):P,yt=u.concat(rt);return U?yt:yt.concat(un(gi(rt)))}function nn(S){return Object.assign({},S,{left:S.x,top:S.y,right:S.x+S.width,bottom:S.y+S.height})}function fn(S,u){return u===kt?nn((P=ti(_=S),rt=(U=ci(_)).clientWidth,yt=U.clientHeight,wt=0,Et=0,(Z=P.visualViewport)&&(rt=Z.width,yt=Z.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(wt=Z.offsetLeft,Et=Z.offsetTop)),{width:rt,height:yt,x:wt+Vi(_),y:Et})):Ii(u)?function(_){var P=zi(_);return P.top=P.top+_.clientTop,P.left=P.left+_.clientLeft,P.bottom=P.top+_.clientHeight,P.right=P.left+_.clientWidth,P.width=_.clientWidth,P.height=_.clientHeight,P.x=P.left,P.y=P.top,P}(u):nn(function(_){var P,U=ci(_),Z=xn(_),rt=null==(P=_.ownerDocument)?void 0:P.body,yt=Ti(U.scrollWidth,U.clientWidth,rt?rt.scrollWidth:0,rt?rt.clientWidth:0),wt=Ti(U.scrollHeight,U.clientHeight,rt?rt.scrollHeight:0,rt?rt.clientHeight:0),Et=-Z.scrollLeft+Vi(_),Pt=-Z.scrollTop;return"rtl"===je(rt||U).direction&&(Et+=Ti(U.clientWidth,rt?rt.clientWidth:0)-yt),{width:yt,height:wt,x:Et,y:Pt}}(ci(S)));var _,P,U,Z,rt,yt,wt,Et}function Nn(S){var u,_=S.reference,P=S.element,U=S.placement,Z=U?pi(U):null,rt=U?Be(U):null,yt=_.x+_.width/2-P.width/2,wt=_.y+_.height/2-P.height/2;switch(Z){case ae:u={x:yt,y:_.y-P.height};break;case O:u={x:yt,y:_.y+_.height};break;case I:u={x:_.x+_.width,y:wt};break;case X:u={x:_.x-P.width,y:wt};break;default:u={x:_.x,y:_.y}}var Et=Z?Si(Z):null;if(null!=Et){var Pt="y"===Et?"height":"width";switch(rt){case dt:u[Et]=u[Et]-(_[Pt]/2-P[Pt]/2);break;case ut:u[Et]=u[Et]+(_[Pt]/2-P[Pt]/2)}}return u}function Ei(S,u){void 0===u&&(u={});var ni,bi,Ki,Me,Ln,wi,gn,xi,Ge,P=u.placement,U=void 0===P?S.placement:P,Z=u.boundary,rt=void 0===Z?At:Z,yt=u.rootBoundary,wt=void 0===yt?kt:yt,Et=u.elementContext,Pt=void 0===Et?Nt:Et,It=u.altBoundary,le=void 0!==It&&It,Ut=u.padding,Kt=void 0===Ut?0:Ut,Qt=_n("number"!=typeof Kt?Kt:Zi(Kt,pt)),ke=S.rects.popper,Te=S.elements[le?Pt===Nt?Yt:Nt:Pt],oe=(ni=Ii(Te)?Te:Te.contextElement||ci(S.elements.popper),Ki=wt,gn="clippingParents"===(bi=rt)?(Ln=un(gi(Me=ni)),Ii(wi=["absolute","fixed"].indexOf(je(Me).position)>=0&&ei(Me)?hn(Me):Me)?Ln.filter(function(yi){return Ii(yi)&&vn(yi,wi)&&"body"!==$e(yi)}):[]):[].concat(bi),Ge=(xi=[].concat(gn,[Ki])).reduce(function(Me,Ln){var wi=fn(ni,Ln);return Me.top=Ti(wi.top,Me.top),Me.right=cn(wi.right,Me.right),Me.bottom=cn(wi.bottom,Me.bottom),Me.left=Ti(wi.left,Me.left),Me},fn(ni,xi[0])),Ge.width=Ge.right-Ge.left,Ge.height=Ge.bottom-Ge.top,Ge.x=Ge.left,Ge.y=Ge.top,Ge),be=zi(S.elements.reference),ce=Nn({reference:be,element:ke,strategy:"absolute",placement:U}),de=nn(Object.assign({},ke,ce)),ge=Pt===Nt?de:be,xe={top:oe.top-ge.top+Qt.top,bottom:ge.bottom-oe.bottom+Qt.bottom,left:oe.left-ge.left+Qt.left,right:ge.right-oe.right+Qt.right},Ee=S.modifiersData.offset;if(Pt===Nt&&Ee){var Qe=Ee[U];Object.keys(xe).forEach(function(ni){var bi=[I,O].indexOf(ni)>=0?1:-1,Ki=[ae,O].indexOf(ni)>=0?"y":"x";xe[ni]+=Qe[Ki]*bi})}return xe}const Rn={name:"flip",enabled:!0,phase:"main",fn:function(S){var u=S.state,_=S.options,P=S.name;if(!u.modifiersData[P]._skip){for(var U=_.mainAxis,Z=void 0===U||U,rt=_.altAxis,yt=void 0===rt||rt,wt=_.fallbackPlacements,Et=_.padding,Pt=_.boundary,It=_.rootBoundary,le=_.altBoundary,Ut=_.flipVariations,Kt=void 0===Ut||Ut,Qt=_.allowedAutoPlacements,ie=u.options.placement,ke=pi(ie),Te=wt||(ke!==ie&&Kt?function(yi){if(pi(yi)===J)return[];var Qi=en(yi);return[bn(yi),Qi,bn(Qi)]}(ie):[en(ie)]),oe=[ie].concat(Te).reduce(function(yi,Qi){return yi.concat(pi(Qi)===J?function Tn(S,u){void 0===u&&(u={});var U=u.boundary,Z=u.rootBoundary,rt=u.padding,yt=u.flipVariations,wt=u.allowedAutoPlacements,Et=void 0===wt?Ht:wt,Pt=Be(u.placement),It=Pt?yt?Mt:Mt.filter(function(Kt){return Be(Kt)===Pt}):pt,le=It.filter(function(Kt){return Et.indexOf(Kt)>=0});0===le.length&&(le=It);var Ut=le.reduce(function(Kt,Qt){return Kt[Qt]=Ei(S,{placement:Qt,boundary:U,rootBoundary:Z,padding:rt})[pi(Qt)],Kt},{});return Object.keys(Ut).sort(function(Kt,Qt){return Ut[Kt]-Ut[Qt]})}(u,{placement:Qi,boundary:Pt,rootBoundary:It,padding:Et,flipVariations:Kt,allowedAutoPlacements:Qt}):Qi)},[]),be=u.rects.reference,ce=u.rects.popper,de=new Map,ge=!0,xe=oe[0],Ee=0;Ee<oe.length;Ee++){var Qe=oe[Ee],ni=pi(Qe),bi=Be(Qe)===dt,Ki=[ae,O].indexOf(ni)>=0,gn=Ki?"width":"height",xi=Ei(u,{placement:Qe,boundary:Pt,rootBoundary:It,altBoundary:le,padding:Et}),di=Ki?bi?I:X:bi?O:ae;be[gn]>ce[gn]&&(di=en(di));var Ge=en(di),Me=[];if(Z&&Me.push(xi[ni]<=0),yt&&Me.push(xi[di]<=0,xi[Ge]<=0),Me.every(function(yi){return yi})){xe=Qe,ge=!1;break}de.set(Qe,Me)}if(ge)for(var Ln=function(yi){var Qi=oe.find(function(dr){var pr=de.get(dr);if(pr)return pr.slice(0,yi).every(function(gr){return gr})});if(Qi)return xe=Qi,"break"},wi=Kt?3:1;wi>0&&"break"!==Ln(wi);wi--);u.placement!==xe&&(u.modifiersData[P]._skip=!0,u.placement=xe,u.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Yn(S,u,_){return void 0===_&&(_={x:0,y:0}),{top:S.top-u.height-_.y,right:S.right-u.width+_.x,bottom:S.bottom-u.height+_.y,left:S.left-u.width-_.x}}function Vn(S){return[ae,I,O,X].some(function(u){return S[u]>=0})}const Un={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(S){var u=S.state,_=S.name,P=u.rects.reference,U=u.rects.popper,Z=u.modifiersData.preventOverflow,rt=Ei(u,{elementContext:"reference"}),yt=Ei(u,{altBoundary:!0}),wt=Yn(rt,P),Et=Yn(yt,U,Z),Pt=Vn(wt),It=Vn(Et);u.modifiersData[_]={referenceClippingOffsets:wt,popperEscapeOffsets:Et,isReferenceHidden:Pt,hasPopperEscaped:It},u.attributes.popper=Object.assign({},u.attributes.popper,{"data-popper-reference-hidden":Pt,"data-popper-escaped":It})}},Ni={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(S){var u=S.state,P=S.name,U=S.options.offset,Z=void 0===U?[0,0]:U,rt=Ht.reduce(function(Pt,It){return Pt[It]=(Ut=u.rects,Kt=Z,Qt=pi(le=It),ie=[X,ae].indexOf(Qt)>=0?-1:1,Te=(Te=(ke="function"==typeof Kt?Kt(Object.assign({},Ut,{placement:le})):Kt)[0])||0,oe=((oe=ke[1])||0)*ie,[X,I].indexOf(Qt)>=0?{x:oe,y:Te}:{x:Te,y:oe}),Pt;var le,Ut,Kt,Qt,ie,ke,Te,oe},{}),yt=rt[u.placement],Et=yt.y;null!=u.modifiersData.popperOffsets&&(u.modifiersData.popperOffsets.x+=yt.x,u.modifiersData.popperOffsets.y+=Et),u.modifiersData[P]=rt}},Sn={name:"popperOffsets",enabled:!0,phase:"read",fn:function(S){var u=S.state;u.modifiersData[S.name]=Nn({reference:u.rects.reference,element:u.rects.popper,strategy:"absolute",placement:u.placement})},data:{}},On={name:"preventOverflow",enabled:!0,phase:"main",fn:function(S){var Or,Rr,u=S.state,_=S.options,P=S.name,U=_.mainAxis,Z=void 0===U||U,rt=_.altAxis,yt=void 0!==rt&&rt,le=_.tether,Ut=void 0===le||le,Kt=_.tetherOffset,Qt=void 0===Kt?0:Kt,ie=Ei(u,{boundary:_.boundary,rootBoundary:_.rootBoundary,padding:_.padding,altBoundary:_.altBoundary}),ke=pi(u.placement),Te=Be(u.placement),oe=!Te,be=Si(ke),ce="x"===be?"y":"x",de=u.modifiersData.popperOffsets,ge=u.rects.reference,xe=u.rects.popper,Ee="function"==typeof Qt?Qt(Object.assign({},u.rects,{placement:u.placement})):Qt,Qe="number"==typeof Ee?{mainAxis:Ee,altAxis:Ee}:Object.assign({mainAxis:0,altAxis:0},Ee),ni=u.modifiersData.offset?u.modifiersData.offset[u.placement]:null,bi={x:0,y:0};if(de){if(Z){var Ki,gn="y"===be?ae:X,xi="y"===be?O:I,di="y"===be?"height":"width",Ge=de[be],Me=Ge+ie[gn],Ln=Ge-ie[xi],wi=Ut?-xe[di]/2:0,yi=Te===dt?ge[di]:xe[di],Qi=Te===dt?-xe[di]:-ge[di],dr=u.elements.arrow,pr=Ut&&dr?Ji(dr):{width:0,height:0},gr=u.modifiersData["arrow#persistent"]?u.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},Er=gr[gn],Ar=gr[xi],mr=Fi(0,ge[di],pr[di]),Br=oe?ge[di]/2-wi-mr-Er-Qe.mainAxis:yi-mr-Er-Qe.mainAxis,Hr=oe?-ge[di]/2+wi+mr+Ar+Qe.mainAxis:Qi+mr+Ar+Qe.mainAxis,Tr=u.elements.arrow&&hn(u.elements.arrow),kr=null!=(Ki=ni?.[be])?Ki:0,zr=Ge+Hr-kr,Dr=Fi(Ut?cn(Me,Ge+Br-kr-(Tr?"y"===be?Tr.clientTop||0:Tr.clientLeft||0:0)):Me,Ge,Ut?Ti(Ln,zr):Ln);de[be]=Dr,bi[be]=Dr-Ge}if(yt){var Pr,Xn=de[ce],vr="y"===ce?"height":"width",jr=Xn+ie["x"===be?ae:X],Lr=Xn-ie["x"===be?O:I],Sr=-1!==[ae,X].indexOf(ke),Mr=null!=(Pr=ni?.[ce])?Pr:0,Ir=Sr?jr:Xn-ge[vr]-xe[vr]-Mr+Qe.altAxis,Fr=Sr?Xn+ge[vr]+xe[vr]-Mr-Qe.altAxis:Lr,Nr=Ut&&Sr?(Rr=Fi(Ir,Xn,Or=Fr))>Or?Or:Rr:Fi(Ut?Ir:jr,Xn,Ut?Fr:Lr);de[ce]=Nr,bi[ce]=Nr-Xn}u.modifiersData[P]=bi}},requiresIfExists:["offset"]};function dn(S,u,_){void 0===_&&(_=!1);var P,U,It,le,Ut,Kt,Z=ei(u),rt=ei(u)&&(le=(It=u).getBoundingClientRect(),Ut=Wi(le.width)/It.offsetWidth||1,Kt=Wi(le.height)/It.offsetHeight||1,1!==Ut||1!==Kt),yt=ci(u),wt=zi(S,rt),Et={scrollLeft:0,scrollTop:0},Pt={x:0,y:0};return(Z||!Z&&!_)&&(("body"!==$e(u)||wn(yt))&&(Et=(P=u)!==ti(P)&&ei(P)?{scrollLeft:(U=P).scrollLeft,scrollTop:U.scrollTop}:xn(P)),ei(u)?((Pt=zi(u,!0)).x+=u.clientLeft,Pt.y+=u.clientTop):yt&&(Pt.x=Vi(yt))),{x:wt.left+Et.scrollLeft-Pt.x,y:wt.top+Et.scrollTop-Pt.y,width:wt.width,height:wt.height}}function En(S){var u=new Map,_=new Set,P=[];function U(Z){_.add(Z.name),[].concat(Z.requires||[],Z.requiresIfExists||[]).forEach(function(rt){if(!_.has(rt)){var yt=u.get(rt);yt&&U(yt)}}),P.push(Z)}return S.forEach(function(Z){u.set(Z.name,Z)}),S.forEach(function(Z){_.has(Z.name)||U(Z)}),P}var Ui={placement:"bottom",modifiers:[],strategy:"absolute"};function An(){for(var S=arguments.length,u=new Array(S),_=0;_<S;_++)u[_]=arguments[_];return!u.some(function(P){return!(P&&"function"==typeof P.getBoundingClientRect)})}function rn(S){void 0===S&&(S={});var _=S.defaultModifiers,P=void 0===_?[]:_,U=S.defaultOptions,Z=void 0===U?Ui:U;return function(rt,yt,wt){void 0===wt&&(wt=Z);var Et,Pt,It={placement:"bottom",orderedModifiers:[],options:Object.assign({},Ui,Z),modifiersData:{},elements:{reference:rt,popper:yt},attributes:{},styles:{}},le=[],Ut=!1,Kt={state:It,setOptions:function(ie){var ke="function"==typeof ie?ie(It.options):ie;Qt(),It.options=Object.assign({},Z,It.options,ke),It.scrollParents={reference:Ii(rt)?un(rt):rt.contextElement?un(rt.contextElement):[],popper:un(yt)};var Te,oe,ce,de,be=(Te=[].concat(P,It.options.modifiers),oe=Te.reduce(function(ce,de){var ge=ce[de.name];return ce[de.name]=ge?Object.assign({},ge,de,{options:Object.assign({},ge.options,de.options),data:Object.assign({},ge.data,de.data)}):de,ce},{}),ce=Object.keys(oe).map(function(ce){return oe[ce]}),de=En(ce),an.reduce(function(ge,xe){return ge.concat(de.filter(function(Ee){return Ee.phase===xe}))},[]));return It.orderedModifiers=be.filter(function(ce){return ce.enabled}),It.orderedModifiers.forEach(function(ce){var ge=ce.options,Ee=ce.effect;if("function"==typeof Ee){var Qe=Ee({state:It,name:ce.name,instance:Kt,options:void 0===ge?{}:ge});le.push(Qe||function(){})}}),Kt.update()},forceUpdate:function(){if(!Ut){var ie=It.elements,ke=ie.reference,Te=ie.popper;if(An(ke,Te)){It.rects={reference:dn(ke,hn(Te),"fixed"===It.options.strategy),popper:Ji(Te)},It.reset=!1,It.placement=It.options.placement,It.orderedModifiers.forEach(function(Ee){return It.modifiersData[Ee.name]=Object.assign({},Ee.data)});for(var oe=0;oe<It.orderedModifiers.length;oe++)if(!0!==It.reset){var be=It.orderedModifiers[oe],ce=be.fn,de=be.options;"function"==typeof ce&&(It=ce({state:It,options:void 0===de?{}:de,name:be.name,instance:Kt})||It)}else It.reset=!1,oe=-1}}},update:(Et=function(){return new Promise(function(ie){Kt.forceUpdate(),ie(It)})},function(){return Pt||(Pt=new Promise(function(ie){Promise.resolve().then(function(){Pt=void 0,ie(Et())})})),Pt}),destroy:function(){Qt(),Ut=!0}};if(!An(rt,yt))return Kt;function Qt(){le.forEach(function(ie){return ie()}),le=[]}return Kt.setOptions(wt).then(function(ie){!Ut&&wt.onFirstUpdate&&wt.onFirstUpdate(ie)}),Kt}}var nr=rn(),Ai=rn({defaultModifiers:[Oi,Sn,Fn,ln]}),kn=rn({defaultModifiers:[Oi,Sn,Fn,ln,Ni,Rn,On,yn,Un]});const Dn=Object.freeze(Object.defineProperty({__proto__:null,popperGenerator:rn,detectOverflow:Ei,createPopperBase:nr,createPopper:kn,createPopperLite:Ai,top:ae,bottom:O,right:I,left:X,auto:J,basePlacements:pt,start:dt,end:ut,clippingParents:At,viewport:kt,popper:Nt,reference:Yt,variationPlacements:Mt,placements:Ht,beforeRead:Jt,read:"read",afterRead:Xe,beforeMain:li,main:"main",afterMain:Ye,beforeWrite:Ae,write:"write",afterWrite:Hi,modifierPhases:an,applyStyles:ln,arrow:yn,computeStyles:Fn,eventListeners:Oi,flip:Rn,hide:Un,offset:Ni,popperOffsets:Sn,preventOverflow:On},Symbol.toStringTag,{value:"Module"})),Pn="dropdown",Gn="ArrowUp",sn="ArrowDown",Bn="click.bs.dropdown.data-api",c="keydown.bs.dropdown.data-api",d="show",v='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',y=`${v}.show`,T=".dropdown-menu",k=w()?"top-end":"top-start",j=w()?"top-start":"top-end",R=w()?"bottom-end":"bottom-start",Y=w()?"bottom-start":"bottom-end",q=w()?"left-start":"right-start",D=w()?"right-start":"left-start",g={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},x={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class A extends Xt{constructor(u,_){super(u,_),this._popper=null,this._parent=this._element.parentNode,this._menu=jt.findOne(T,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return g}static get DefaultType(){return x}static get NAME(){return Pn}toggle(){return this._isShown()?this.hide():this.show()}show(){if(r(this._element)||this._isShown())return;const u={relatedTarget:this._element};if(!G.trigger(this._element,"show.bs.dropdown",u).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const _ of[].concat(...document.body.children))G.on(_,"mouseover",f);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(d),this._element.classList.add(d),G.trigger(this._element,"shown.bs.dropdown",u)}}hide(){!r(this._element)&&this._isShown()&&this._completeHide({relatedTarget:this._element})}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(u){if(!G.trigger(this._element,"hide.bs.dropdown",u).defaultPrevented){if("ontouchstart"in document.documentElement)for(const _ of[].concat(...document.body.children))G.off(_,"mouseover",f);this._popper&&this._popper.destroy(),this._menu.classList.remove(d),this._element.classList.remove(d),this._element.setAttribute("aria-expanded","false"),Lt.removeDataAttribute(this._menu,"popper"),G.trigger(this._element,"hidden.bs.dropdown",u)}}_getConfig(u){if("object"==typeof(u=super._getConfig(u)).reference&&!e(u.reference)&&"function"!=typeof u.reference.getBoundingClientRect)throw new TypeError(`${Pn.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return u}_createPopper(){if(void 0===Dn)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let u=this._element;"parent"===this._config.reference?u=this._parent:e(this._config.reference)?u=i(this._config.reference):"object"==typeof this._config.reference&&(u=this._config.reference);const _=this._getPopperConfig();this._popper=kn(u,this._menu,_)}_isShown(){return this._menu.classList.contains(d)}_getPlacement(){const u=this._parent;if(u.classList.contains("dropend"))return q;if(u.classList.contains("dropstart"))return D;if(u.classList.contains("dropup-center"))return"top";if(u.classList.contains("dropdown-center"))return"bottom";const _="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return u.classList.contains("dropup")?_?j:k:_?Y:R}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:u}=this._config;return"string"==typeof u?u.split(",").map(_=>Number.parseInt(_,10)):"function"==typeof u?_=>u(_,this._element):u}_getPopperConfig(){const u={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(Lt.setDataAttribute(this._menu,"popper","static"),u.modifiers=[{name:"applyStyles",enabled:!1}]),{...u,..."function"==typeof this._config.popperConfig?this._config.popperConfig(u):this._config.popperConfig}}_selectMenuItem({key:u,target:_}){const P=jt.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(U=>s(U));P.length&&H(P,_,u===sn,!P.includes(_)).focus()}static jQueryInterface(u){return this.each(function(){const _=A.getOrCreateInstance(this,u);if("string"==typeof u){if(void 0===_[u])throw new TypeError(`No method named "${u}"`);_[u]()}})}static clearMenus(u){if(2===u.button||"keyup"===u.type&&"Tab"!==u.key)return;const _=jt.find(y);for(const P of _){const U=A.getInstance(P);if(!U||!1===U._config.autoClose)continue;const Z=u.composedPath(),rt=Z.includes(U._menu);if(Z.includes(U._element)||"inside"===U._config.autoClose&&!rt||"outside"===U._config.autoClose&&rt||U._menu.contains(u.target)&&("keyup"===u.type&&"Tab"===u.key||/input|select|option|textarea|form/i.test(u.target.tagName)))continue;const yt={relatedTarget:U._element};"click"===u.type&&(yt.clickEvent=u),U._completeHide(yt)}}static dataApiKeydownHandler(u){const _=/input|textarea/i.test(u.target.tagName),P="Escape"===u.key,U=[Gn,sn].includes(u.key);if(!U&&!P||_&&!P)return;u.preventDefault();const Z=jt.findOne(v,u.delegateTarget.parentNode),rt=A.getOrCreateInstance(Z);if(U)return u.stopPropagation(),rt.show(),void rt._selectMenuItem(u);rt._isShown()&&(u.stopPropagation(),rt.hide(),Z.focus())}}G.on(document,c,v,A.dataApiKeydownHandler),G.on(document,c,T,A.dataApiKeydownHandler),G.on(document,Bn,A.clearMenus),G.on(document,"keyup.bs.dropdown.data-api",A.clearMenus),G.on(document,Bn,v,function(S){S.preventDefault(),A.getOrCreateInstance(this).toggle()}),E(A);const $=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",lt=".sticky-top",ht="padding-right",Bt="margin-right";class qt{constructor(){this._element=document.body}getWidth(){const u=document.documentElement.clientWidth;return Math.abs(window.innerWidth-u)}hide(){const u=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,ht,_=>_+u),this._setElementAttributes($,ht,_=>_+u),this._setElementAttributes(lt,Bt,_=>_-u)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,ht),this._resetElementAttributes($,ht),this._resetElementAttributes(lt,Bt)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(u,_,P){const U=this.getWidth();this._applyManipulationCallback(u,Z=>{if(Z!==this._element&&window.innerWidth>Z.clientWidth+U)return;this._saveInitialAttribute(Z,_);const rt=window.getComputedStyle(Z).getPropertyValue(_);Z.style.setProperty(_,`${P(Number.parseFloat(rt))}px`)})}_saveInitialAttribute(u,_){const P=u.style.getPropertyValue(_);P&&Lt.setDataAttribute(u,_,P)}_resetElementAttributes(u,_){this._applyManipulationCallback(u,P=>{const U=Lt.getDataAttribute(P,_);null!==U?(Lt.removeDataAttribute(P,_),P.style.setProperty(_,U)):P.style.removeProperty(_)})}_applyManipulationCallback(u,_){if(e(u))_(u);else for(const P of jt.find(u,this._element))_(P)}}const ee="mousedown.bs.backdrop",zt={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},De={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Zt extends Wt{constructor(u){super(),this._config=this._getConfig(u),this._isAppended=!1,this._element=null}static get Default(){return zt}static get DefaultType(){return De}static get NAME(){return"backdrop"}show(u){if(!this._config.isVisible)return void M(u);this._append();this._getElement().classList.add("show"),this._emulateAnimation(()=>{M(u)})}hide(u){this._config.isVisible?(this._getElement().classList.remove("show"),this._emulateAnimation(()=>{this.dispose(),M(u)})):M(u)}dispose(){this._isAppended&&(G.off(this._element,ee),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const u=document.createElement("div");u.className=this._config.className,this._config.isAnimated&&u.classList.add("fade"),this._element=u}return this._element}_configAfterMerge(u){return u.rootElement=i(u.rootElement),u}_append(){if(this._isAppended)return;const u=this._getElement();this._config.rootElement.append(u),G.on(u,ee,()=>{M(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(u){N(u,this._getElement(),this._config.isAnimated)}}const ue=".bs.focustrap",Ve="backward",Ri={autofocus:!0,trapElement:null},Ue={autofocus:"boolean",trapElement:"element"};class Bi extends Wt{constructor(u){super(),this._config=this._getConfig(u),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Ri}static get DefaultType(){return Ue}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),G.off(document,ue),G.on(document,"focusin.bs.focustrap",u=>this._handleFocusin(u)),G.on(document,"keydown.tab.bs.focustrap",u=>this._handleKeydown(u)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,G.off(document,ue))}_handleFocusin(u){const{trapElement:_}=this._config;if(u.target===document||u.target===_||_.contains(u.target))return;const P=jt.focusableChildren(_);0===P.length?_.focus():this._lastTabNavDirection===Ve?P[P.length-1].focus():P[0].focus()}_handleKeydown(u){"Tab"===u.key&&(this._lastTabNavDirection=u.shiftKey?Ve:"forward")}}const si="hidden.bs.modal",Ke="show.bs.modal",pn="modal-open",Oe="modal-static",vi={backdrop:!0,focus:!0,keyboard:!0},_i={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class ii extends Xt{constructor(u,_){super(u,_),this._dialog=jt.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new qt,this._addEventListeners()}static get Default(){return vi}static get DefaultType(){return _i}static get NAME(){return"modal"}toggle(u){return this._isShown?this.hide():this.show(u)}show(u){this._isShown||this._isTransitioning||G.trigger(this._element,Ke,{relatedTarget:u}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(pn),this._adjustDialog(),this._backdrop.show(()=>this._showElement(u)))}hide(){this._isShown&&!this._isTransitioning&&(G.trigger(this._element,"hide.bs.modal").defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove("show"),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){for(const u of[window,this._dialog])G.off(u,".bs.modal");this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Zt({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Bi({trapElement:this._element})}_showElement(u){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const _=jt.findOne(".modal-body",this._dialog);_&&(_.scrollTop=0),this._element.classList.add("show"),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,G.trigger(this._element,"shown.bs.modal",{relatedTarget:u})},this._dialog,this._isAnimated())}_addEventListeners(){G.on(this._element,"keydown.dismiss.bs.modal",u=>{if("Escape"===u.key)return this._config.keyboard?(u.preventDefault(),void this.hide()):void this._triggerBackdropTransition()}),G.on(window,"resize.bs.modal",()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),G.on(this._element,"mousedown.dismiss.bs.modal",u=>{u.target===u.currentTarget&&("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(pn),this._resetAdjustments(),this._scrollBar.reset(),G.trigger(this._element,si)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(G.trigger(this._element,"hidePrevented.bs.modal").defaultPrevented)return;const u=this._element.scrollHeight>document.documentElement.clientHeight,_=this._element.style.overflowY;"hidden"===_||this._element.classList.contains(Oe)||(u||(this._element.style.overflowY="hidden"),this._element.classList.add(Oe),this._queueCallback(()=>{this._element.classList.remove(Oe),this._queueCallback(()=>{this._element.style.overflowY=_},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const u=this._element.scrollHeight>document.documentElement.clientHeight,_=this._scrollBar.getWidth(),P=_>0;if(P&&!u){const U=w()?"paddingLeft":"paddingRight";this._element.style[U]=`${_}px`}if(!P&&u){const U=w()?"paddingRight":"paddingLeft";this._element.style[U]=`${_}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(u,_){return this.each(function(){const P=ii.getOrCreateInstance(this,u);if("string"==typeof u){if(void 0===P[u])throw new TypeError(`No method named "${u}"`);P[u](_)}})}}G.on(document,"click.bs.modal.data-api",'[data-bs-toggle="modal"]',function(S){const u=l(this);["A","AREA"].includes(this.tagName)&&S.preventDefault(),G.one(u,Ke,P=>{P.defaultPrevented||G.one(u,si,()=>{s(this)&&this.focus()})});const _=jt.findOne(".modal.show");_&&ii.getInstance(_).hide(),ii.getOrCreateInstance(u).toggle(this)}),we(ii),E(ii);const fe="showing",ui=".offcanvas.show",Le="hidePrevented.bs.offcanvas",fi="hidden.bs.offcanvas",jn={backdrop:!0,keyboard:!0,scroll:!1},qn={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Gi extends Xt{constructor(u,_){super(u,_),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return jn}static get DefaultType(){return qn}static get NAME(){return"offcanvas"}toggle(u){return this._isShown?this.hide():this.show(u)}show(u){this._isShown||G.trigger(this._element,"show.bs.offcanvas",{relatedTarget:u}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||(new qt).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(fe),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add("show"),this._element.classList.remove(fe),G.trigger(this._element,"shown.bs.offcanvas",{relatedTarget:u})},this._element,!0))}hide(){this._isShown&&(G.trigger(this._element,"hide.bs.offcanvas").defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add("hiding"),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove("show","hiding"),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new qt).reset(),G.trigger(this._element,fi)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const u=Boolean(this._config.backdrop);return new Zt({className:"offcanvas-backdrop",isVisible:u,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:u?()=>{"static"!==this._config.backdrop?this.hide():G.trigger(this._element,Le)}:null})}_initializeFocusTrap(){return new Bi({trapElement:this._element})}_addEventListeners(){G.on(this._element,"keydown.dismiss.bs.offcanvas",u=>{"Escape"===u.key&&(this._config.keyboard?this.hide():G.trigger(this._element,Le))})}static jQueryInterface(u){return this.each(function(){const _=Gi.getOrCreateInstance(this,u);if("string"==typeof u){if(void 0===_[u]||u.startsWith("_")||"constructor"===u)throw new TypeError(`No method named "${u}"`);_[u](this)}})}}G.on(document,"click.bs.offcanvas.data-api",'[data-bs-toggle="offcanvas"]',function(S){const u=l(this);if(["A","AREA"].includes(this.tagName)&&S.preventDefault(),r(this))return;G.one(u,fi,()=>{s(this)&&this.focus()});const _=jt.findOne(ui);_&&_!==u&&Gi.getInstance(_).hide(),Gi.getOrCreateInstance(u).toggle(this)}),G.on(window,"load.bs.offcanvas.data-api",()=>{for(const S of jt.find(ui))Gi.getOrCreateInstance(S).show()}),G.on(window,"resize.bs.offcanvas",()=>{for(const S of jt.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(S).position&&Gi.getOrCreateInstance(S).hide()}),we(Gi),E(Gi);const _r=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),yr=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,$n=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,br=(S,u)=>{const _=S.nodeName.toLowerCase();return u.includes(_)?!_r.has(_)||Boolean(yr.test(S.nodeValue)||$n.test(S.nodeValue)):u.filter(P=>P instanceof RegExp).some(P=>P.test(_))},hr={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},xr={allowList:hr,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Hn={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},wr={entry:"(string|element|function|null)",selector:"(string|element)"};class rr extends Wt{constructor(u){super(),this._config=this._getConfig(u)}static get Default(){return xr}static get DefaultType(){return Hn}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(u=>this._resolvePossibleFunction(u)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(u){return this._checkContent(u),this._config.content={...this._config.content,...u},this}toHtml(){const u=document.createElement("div");u.innerHTML=this._maybeSanitize(this._config.template);for(const[U,Z]of Object.entries(this._config.content))this._setContent(u,Z,U);const _=u.children[0],P=this._resolvePossibleFunction(this._config.extraClass);return P&&_.classList.add(...P.split(" ")),_}_typeCheckConfig(u){super._typeCheckConfig(u),this._checkContent(u.content)}_checkContent(u){for(const[_,P]of Object.entries(u))super._typeCheckConfig({selector:_,entry:P},wr)}_setContent(u,_,P){const U=jt.findOne(P,u);U&&((_=this._resolvePossibleFunction(_))?e(_)?this._putElementInTemplate(i(_),U):this._config.html?U.innerHTML=this._maybeSanitize(_):U.textContent=_:U.remove())}_maybeSanitize(u){return this._config.sanitize?function(_,P,U){if(!_.length)return _;if(U&&"function"==typeof U)return U(_);const Z=(new window.DOMParser).parseFromString(_,"text/html"),rt=[].concat(...Z.body.querySelectorAll("*"));for(const yt of rt){const wt=yt.nodeName.toLowerCase();if(!Object.keys(P).includes(wt)){yt.remove();continue}const Et=[].concat(...yt.attributes),Pt=[].concat(P["*"]||[],P[wt]||[]);for(const It of Et)br(It,Pt)||yt.removeAttribute(It.nodeName)}return Z.body.innerHTML}(u,this._config.allowList,this._config.sanitizeFn):u}_resolvePossibleFunction(u){return"function"==typeof u?u(this):u}_putElementInTemplate(u,_){if(this._config.html)return _.innerHTML="",void _.append(u);_.textContent=u.textContent}}const qi=new Set(["sanitize","allowList","sanitizeFn"]),ki="fade",Wn="show",or="hide.bs.modal",Kn="hover",Qn={AUTO:"auto",TOP:"top",RIGHT:w()?"left":"right",BOTTOM:"bottom",LEFT:w()?"right":"left"},Di={allowList:hr,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,0],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Pi={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class $i extends Xt{constructor(u,_){if(void 0===Dn)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(u,_),this._isEnabled=!0,this._timeout=0,this._isHovered=!1,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners()}static get Default(){return Di}static get DefaultType(){return Pi}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(u){if(this._isEnabled){if(u){const _=this._initializeOnDelegatedTarget(u);return _._activeTrigger.click=!_._activeTrigger.click,void(_._isWithActiveTrigger()?_._enter():_._leave())}this._isShown()?this._leave():this._enter()}}dispose(){clearTimeout(this._timeout),G.off(this._element.closest(".modal"),or,this._hideModalHandler),this.tip&&this.tip.remove(),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const u=G.trigger(this._element,this.constructor.eventName("show")),_=(o(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(u.defaultPrevented||!_)return;this.tip&&(this.tip.remove(),this.tip=null);const P=this._getTipElement();this._element.setAttribute("aria-describedby",P.getAttribute("id"));const{container:U}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(U.append(P),G.trigger(this._element,this.constructor.eventName("inserted"))),this._popper?this._popper.update():this._popper=this._createPopper(P),P.classList.add(Wn),"ontouchstart"in document.documentElement)for(const Z of[].concat(...document.body.children))G.on(Z,"mouseover",f);this._queueCallback(()=>{const Z=this._isHovered;this._isHovered=!1,G.trigger(this._element,this.constructor.eventName("shown")),Z&&this._leave()},this.tip,this._isAnimated())}hide(){if(!this._isShown()||G.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented)return;const u=this._getTipElement();if(u.classList.remove(Wn),"ontouchstart"in document.documentElement)for(const _ of[].concat(...document.body.children))G.off(_,"mouseover",f);this._activeTrigger.click=!1,this._activeTrigger.focus=!1,this._activeTrigger.hover=!1,this._isHovered=!1,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||u.remove(),this._element.removeAttribute("aria-describedby"),G.trigger(this._element,this.constructor.eventName("hidden")),this._disposePopper())},this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(u){const _=this._getTemplateFactory(u).toHtml();if(!_)return null;_.classList.remove(ki,Wn),_.classList.add(`bs-${this.constructor.NAME}-auto`);const P=(U=>{do{U+=Math.floor(1e6*Math.random())}while(document.getElementById(U));return U})(this.constructor.NAME).toString();return _.setAttribute("id",P),this._isAnimated()&&_.classList.add(ki),_}setContent(u){this._newContent=u,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(u){return this._templateFactory?this._templateFactory.changeContent(u):this._templateFactory=new rr({...this._config,content:u,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._config.originalTitle}_initializeOnDelegatedTarget(u){return this.constructor.getOrCreateInstance(u.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(ki)}_isShown(){return this.tip&&this.tip.classList.contains(Wn)}_createPopper(u){const _="function"==typeof this._config.placement?this._config.placement.call(this,u,this._element):this._config.placement,P=Qn[_.toUpperCase()];return kn(this._element,u,this._getPopperConfig(P))}_getOffset(){const{offset:u}=this._config;return"string"==typeof u?u.split(",").map(_=>Number.parseInt(_,10)):"function"==typeof u?_=>u(_,this._element):u}_resolvePossibleFunction(u){return"function"==typeof u?u.call(this._element):u}_getPopperConfig(u){const _={placement:u,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:P=>{this._getTipElement().setAttribute("data-popper-placement",P.state.placement)}}]};return{..._,..."function"==typeof this._config.popperConfig?this._config.popperConfig(_):this._config.popperConfig}}_setListeners(){const u=this._config.trigger.split(" ");for(const _ of u)if("click"===_)G.on(this._element,this.constructor.eventName("click"),this._config.selector,P=>this.toggle(P));else if("manual"!==_){const P=this.constructor.eventName(_===Kn?"mouseenter":"focusin"),U=this.constructor.eventName(_===Kn?"mouseleave":"focusout");G.on(this._element,P,this._config.selector,Z=>{const rt=this._initializeOnDelegatedTarget(Z);rt._activeTrigger["focusin"===Z.type?"focus":Kn]=!0,rt._enter()}),G.on(this._element,U,this._config.selector,Z=>{const rt=this._initializeOnDelegatedTarget(Z);rt._activeTrigger["focusout"===Z.type?"focus":Kn]=rt._element.contains(Z.relatedTarget),rt._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},G.on(this._element.closest(".modal"),or,this._hideModalHandler),this._config.selector?this._config={...this._config,trigger:"manual",selector:""}:this._fixTitle()}_fixTitle(){const u=this._config.originalTitle;u&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",u),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(u,_){clearTimeout(this._timeout),this._timeout=setTimeout(u,_)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(u){const _=Lt.getDataAttributes(this._element);for(const P of Object.keys(_))qi.has(P)&&delete _[P];return u={..._,..."object"==typeof u&&u?u:{}},u=this._mergeConfigObj(u),u=this._configAfterMerge(u),this._typeCheckConfig(u),u}_configAfterMerge(u){return u.container=!1===u.container?document.body:i(u.container),"number"==typeof u.delay&&(u.delay={show:u.delay,hide:u.delay}),u.originalTitle=this._element.getAttribute("title")||"","number"==typeof u.title&&(u.title=u.title.toString()),"number"==typeof u.content&&(u.content=u.content.toString()),u}_getDelegateConfig(){const u={};for(const _ in this._config)this.constructor.Default[_]!==this._config[_]&&(u[_]=this._config[_]);return u}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null)}static jQueryInterface(u){return this.each(function(){const _=$i.getOrCreateInstance(this,u);if("string"==typeof u){if(void 0===_[u])throw new TypeError(`No method named "${u}"`);_[u]()}})}}E($i);const ur={...$i.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Cr={...$i.DefaultType,content:"(null|string|element|function)"};class Jn extends $i{static get Default(){return ur}static get DefaultType(){return Cr}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(u){return this.each(function(){const _=Jn.getOrCreateInstance(this,u);if("string"==typeof u){if(void 0===_[u])throw new TypeError(`No method named "${u}"`);_[u]()}})}}E(Jn);const ar="click.bs.scrollspy",ji="active",fr={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null},tr={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element"};class on extends Xt{constructor(u,_){super(u,_),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return fr}static get DefaultType(){return tr}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const u of this._observableSections.values())this._observer.observe(u)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(u){return u.target=i(u.target)||document.body,u}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(G.off(this._config.target,ar),G.on(this._config.target,ar,"[href]",u=>{const _=this._observableSections.get(u.target.hash);if(_){u.preventDefault();const P=this._rootElement||window,U=_.offsetTop-this._element.offsetTop;if(P.scrollTo)return void P.scrollTo({top:U,behavior:"smooth"});P.scrollTop=U}}))}_getNewObserver(){const u={root:this._rootElement,threshold:[.1,.5,1],rootMargin:this._getRootMargin()};return new IntersectionObserver(_=>this._observerCallback(_),u)}_observerCallback(u){const _=rt=>this._targetLinks.get(`#${rt.target.id}`),P=rt=>{this._previousScrollData.visibleEntryTop=rt.target.offsetTop,this._process(_(rt))},U=(this._rootElement||document.documentElement).scrollTop,Z=U>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=U;for(const rt of u){if(!rt.isIntersecting){this._activeTarget=null,this._clearActiveClass(_(rt));continue}const yt=rt.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(Z&&yt){if(P(rt),!U)return}else Z||yt||P(rt)}}_getRootMargin(){return this._config.offset?`${this._config.offset}px 0px -30%`:this._config.rootMargin}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const u=jt.find("[href]",this._config.target);for(const _ of u){if(!_.hash||r(_))continue;const P=jt.findOne(_.hash,this._element);s(P)&&(this._targetLinks.set(_.hash,_),this._observableSections.set(_.hash,P))}}_process(u){this._activeTarget!==u&&(this._clearActiveClass(this._config.target),this._activeTarget=u,u.classList.add(ji),this._activateParents(u),G.trigger(this._element,"activate.bs.scrollspy",{relatedTarget:u}))}_activateParents(u){if(u.classList.contains("dropdown-item"))jt.findOne(".dropdown-toggle",u.closest(".dropdown")).classList.add(ji);else for(const _ of jt.parents(u,".nav, .list-group"))for(const P of jt.prev(_,".nav-link, .nav-item > .nav-link, .list-group-item"))P.classList.add(ji)}_clearActiveClass(u){u.classList.remove(ji);const _=jt.find("[href].active",u);for(const P of _)P.classList.remove(ji)}static jQueryInterface(u){return this.each(function(){const _=on.getOrCreateInstance(this,u);if("string"==typeof u){if(void 0===_[u]||u.startsWith("_")||"constructor"===u)throw new TypeError(`No method named "${u}"`);_[u]()}})}}G.on(window,"load.bs.scrollspy.data-api",()=>{for(const S of jt.find('[data-bs-spy="scroll"]'))on.getOrCreateInstance(S)}),E(on);const lr="ArrowLeft",zn="ArrowRight",cr="ArrowUp",er="ArrowDown",L="active",B="fade",K="show",gt='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',it=`.nav-link:not(.dropdown-toggle), .list-group-item:not(.dropdown-toggle), [role="tab"]:not(.dropdown-toggle), ${gt}`;class vt extends Xt{constructor(u){super(u),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),G.on(this._element,"keydown.bs.tab",_=>this._keydown(_)))}static get NAME(){return"tab"}show(){const u=this._element;if(this._elemIsActive(u))return;const _=this._getActiveElem(),P=_?G.trigger(_,"hide.bs.tab",{relatedTarget:u}):null;G.trigger(u,"show.bs.tab",{relatedTarget:_}).defaultPrevented||P&&P.defaultPrevented||(this._deactivate(_,u),this._activate(u,_))}_activate(u,_){u&&(u.classList.add(L),this._activate(l(u)),this._queueCallback(()=>{"tab"===u.getAttribute("role")?(u.focus(),u.removeAttribute("tabindex"),u.setAttribute("aria-selected",!0),this._toggleDropDown(u,!0),G.trigger(u,"shown.bs.tab",{relatedTarget:_})):u.classList.add(K)},u,u.classList.contains(B)))}_deactivate(u,_){u&&(u.classList.remove(L),u.blur(),this._deactivate(l(u)),this._queueCallback(()=>{"tab"===u.getAttribute("role")?(u.setAttribute("aria-selected",!1),u.setAttribute("tabindex","-1"),this._toggleDropDown(u,!1),G.trigger(u,"hidden.bs.tab",{relatedTarget:_})):u.classList.remove(K)},u,u.classList.contains(B)))}_keydown(u){if(![lr,zn,cr,er].includes(u.key))return;u.stopPropagation(),u.preventDefault();const _=[zn,er].includes(u.key),P=H(this._getChildren().filter(U=>!r(U)),u.target,_,!0);P&&vt.getOrCreateInstance(P).show()}_getChildren(){return jt.find(it,this._parent)}_getActiveElem(){return this._getChildren().find(u=>this._elemIsActive(u))||null}_setInitialAttributes(u,_){this._setAttributeIfNotExists(u,"role","tablist");for(const P of _)this._setInitialAttributesOnChild(P)}_setInitialAttributesOnChild(u){u=this._getInnerElement(u);const _=this._elemIsActive(u),P=this._getOuterElement(u);u.setAttribute("aria-selected",_),P!==u&&this._setAttributeIfNotExists(P,"role","presentation"),_||u.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(u,"role","tab"),this._setInitialAttributesOnTargetPanel(u)}_setInitialAttributesOnTargetPanel(u){const _=l(u);_&&(this._setAttributeIfNotExists(_,"role","tabpanel"),u.id&&this._setAttributeIfNotExists(_,"aria-labelledby",`#${u.id}`))}_toggleDropDown(u,_){const P=this._getOuterElement(u);if(!P.classList.contains("dropdown"))return;const U=(Z,rt)=>{const yt=jt.findOne(Z,P);yt&&yt.classList.toggle(rt,_)};U(".dropdown-toggle",L),U(".dropdown-menu",K),U(".dropdown-item",L),P.setAttribute("aria-expanded",_)}_setAttributeIfNotExists(u,_,P){u.hasAttribute(_)||u.setAttribute(_,P)}_elemIsActive(u){return u.classList.contains(L)}_getInnerElement(u){return u.matches(it)?u:jt.findOne(it,u)}_getOuterElement(u){return u.closest(".nav-item, .list-group-item")||u}static jQueryInterface(u){return this.each(function(){const _=vt.getOrCreateInstance(this);if("string"==typeof u){if(void 0===_[u]||u.startsWith("_")||"constructor"===u)throw new TypeError(`No method named "${u}"`);_[u]()}})}}G.on(document,"click.bs.tab",gt,function(S){["A","AREA"].includes(this.tagName)&&S.preventDefault(),r(this)||vt.getOrCreateInstance(this).show()}),G.on(window,"load.bs.tab",()=>{for(const S of jt.find('.active[data-bs-toggle="tab"], .active[data-bs-toggle="pill"], .active[data-bs-toggle="list"]'))vt.getOrCreateInstance(S)}),E(vt);const Ot="show",Dt="showing",$t={animation:"boolean",autohide:"boolean",delay:"number"},Gt={animation:!0,autohide:!0,delay:5e3};class Vt extends Xt{constructor(u,_){super(u,_),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Gt}static get DefaultType(){return $t}static get NAME(){return"toast"}show(){G.trigger(this._element,"show.bs.toast").defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove("hide"),this._element.classList.add(Ot,Dt),this._queueCallback(()=>{this._element.classList.remove(Dt),G.trigger(this._element,"shown.bs.toast"),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(G.trigger(this._element,"hide.bs.toast").defaultPrevented||(this._element.classList.add(Dt),this._queueCallback(()=>{this._element.classList.add("hide"),this._element.classList.remove(Dt,Ot),G.trigger(this._element,"hidden.bs.toast")},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Ot),super.dispose()}isShown(){return this._element.classList.contains(Ot)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(u,_){switch(u.type){case"mouseover":case"mouseout":this._hasMouseInteraction=_;break;case"focusin":case"focusout":this._hasKeyboardInteraction=_}if(_)return void this._clearTimeout();const P=u.relatedTarget;this._element===P||this._element.contains(P)||this._maybeScheduleHide()}_setListeners(){G.on(this._element,"mouseover.bs.toast",u=>this._onInteraction(u,!0)),G.on(this._element,"mouseout.bs.toast",u=>this._onInteraction(u,!1)),G.on(this._element,"focusin.bs.toast",u=>this._onInteraction(u,!0)),G.on(this._element,"focusout.bs.toast",u=>this._onInteraction(u,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(u){return this.each(function(){const _=Vt.getOrCreateInstance(this,u);if("string"==typeof u){if(void 0===_[u])throw new TypeError(`No method named "${u}"`);_[u](this)}})}}return we(Vt),E(Vt),{Alert:ve,Button:re,Carousel:oi,Collapse:ze,Dropdown:A,Modal:ii,Offcanvas:Gi,Popover:Jn,ScrollSpy:on,Tab:vt,Toast:Vt,Tooltip:$i}});